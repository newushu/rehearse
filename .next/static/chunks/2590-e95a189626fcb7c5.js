"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2590],{1517:(e,t,r)=>{r.d(t,{AppBrand:()=>s});var a=r(5155),n=r(2619),i=r.n(n),l=r(6979);function s(e){let{href:t="/",textClassName:r="text-2xl font-bold",logoClassName:n=""}=e,s=(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.v,{className:"border border-white/30 bg-white/10 text-white/60 ".concat(n)}),(0,a.jsx)("span",{className:r,children:"Performance Tool"})]});return t?(0,a.jsx)(i(),{href:t,className:"flex items-center gap-3",children:s}):s}},1776:(e,t,r)=>{r.d(t,{z:()=>l});var a=r(5155),n=r(2115),i=r(9157);function l(e){let{title:t="Schedule",accent:r="blue"}=e,{performances:l,rehearsals:s,loading:o,error:c}=function(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[s,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=!0;return async function(){try{let[r,n]=await Promise.all([fetch("/api/performances"),fetch("/api/rehearsals")]);if(!r.ok)throw Error("Failed to fetch performances");if(!n.ok)throw Error("Failed to fetch rehearsals");let i=await r.json(),l=await n.json();if(!e)return;t(i||[]),a(l||[])}catch(t){if(!e)return;o(t instanceof Error?t.message:"Failed to load schedule")}finally{e&&l(!1)}}(),()=>{e=!1}},[]),{performances:e,rehearsals:r,loading:i,error:s}}(),[d,m]=(0,n.useState)("list"),[u,f]=(0,n.useState)(()=>new Date),h=(0,n.useMemo)(()=>{let e=new Map;for(let t of l)e.set(t.id,t.title);return[...l.map(e=>{let t=e.timezone||"America/New_York",r=(0,i.so)(e.date,t);return{id:e.id,type:"performance",dateKey:r,title:e.title,timeLabel:(0,i.Z5)(e.date,t),location:e.location,timezone:t,isoDate:e.date}}),...s.map(t=>({id:t.id,type:"rehearsal",dateKey:t.date,title:t.title,timeLabel:(0,i.a7)(t.time),location:t.location,performanceTitle:e.get(t.performance_id)}))].sort((e,t)=>e.dateKey===t.dateKey?e.timeLabel.localeCompare(t.timeLabel):e.dateKey.localeCompare(t.dateKey))},[l,s]),g=(0,n.useMemo)(()=>{let e=new Map;for(let t of h)e.has(t.dateKey)||e.set(t.dateKey,[]),e.get(t.dateKey).push(t);return e},[h]),p=(0,n.useMemo)(()=>{let e={};for(let t of h)e[t.dateKey]=e[t.dateKey]||[],e[t.dateKey].push(t);return e},[h]),x="green"===r?{active:"bg-green-600 text-white",pill:"bg-green-100 text-green-800"}:{active:"bg-blue-600 text-white",pill:"bg-blue-100 text-blue-800"},y=u.toLocaleString(void 0,{month:"long",year:"numeric"}),b=u.getFullYear(),N=u.getMonth(),w=new Date(b,N,1),j=new Date(b,N+1,0).getDate(),v=w.getDay();return o?(0,a.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Loading schedule..."}):c?(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Performances and rehearsals, day by day."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>m("list"),className:"px-4 py-2 rounded-lg font-semibold ".concat("list"===d?x.active:"bg-white text-gray-700 border border-gray-200"),children:"List"}),(0,a.jsx)("button",{onClick:()=>m("calendar"),className:"px-4 py-2 rounded-lg font-semibold ".concat("calendar"===d?x.active:"bg-white text-gray-700 border border-gray-200"),children:"Calendar"})]})]}),"list"===d&&(0,a.jsxs)("div",{className:"space-y-6",children:[[...g.keys()].map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900 mb-3",children:new Date(e+"T00:00:00").toLocaleDateString()}),(0,a.jsx)("div",{className:"space-y-2",children:g.get(e).map(e=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 bg-white border border-gray-200 rounded-lg px-4 py-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900",children:[e.title,"rehearsal"===e.type&&e.performanceTitle&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(for ",e.performanceTitle,")"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.location})]}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(x.pill),children:"performance"===e.type?"Performance":"Rehearsal"}),(0,a.jsx)("span",{children:"performance"===e.type&&e.timezone?(0,i.P9)(e.isoDate||"",e.timezone):e.timeLabel})]})]},e.id))})]},e)),0===g.size&&(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No scheduled items yet."})]}),"calendar"===d&&(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("button",{onClick:()=>f(new Date(b,N-1,1)),className:"px-3 py-1 rounded border border-gray-200 text-gray-600",children:"Prev"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:y}),(0,a.jsx)("button",{onClick:()=>f(new Date(b,N+1,1)),className:"px-3 py-1 rounded border border-gray-200 text-gray-600",children:"Next"})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 text-xs font-semibold text-gray-500 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center py-2",children:e},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:v}).map((e,t)=>(0,a.jsx)("div",{},"empty-".concat(t))),Array.from({length:j}).map((e,t)=>{let n=t+1,i="".concat(b,"-").concat(String(N+1).padStart(2,"0"),"-").concat(String(n).padStart(2,"0")),l=p[i]||[];return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-2 min-h-[72px]",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:n}),l.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"text-[10px] truncate ".concat("green"===r?"text-green-700":"text-blue-700"),children:["performance"===e.type?"Perf":"Reh",": ",e.title]},e.id)),l.length>3&&(0,a.jsxs)("div",{className:"text-[10px] text-gray-500",children:["+",l.length-3," more"]})]},i)})]})]})]})}},6979:(e,t,r)=>{r.d(t,{v:()=>l});var a=r(5155),n=r(5239),i=r(2115);function l(e){let{size:t=36,className:r="",imgClassName:l=""}=e,[s,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/api/app-logo");if(!t.ok)return;let r=await t.json();e&&o(r.logoUrl||null)}catch(e){}})(),()=>{e=!1}},[]),(0,a.jsx)("div",{className:"flex items-center justify-center overflow-hidden ".concat(r),style:{width:t,height:t,borderRadius:8},children:s?(0,a.jsx)(n.default,{src:s,alt:"App logo",width:t,height:t,unoptimized:!0,className:"max-w-full max-h-full object-contain ".concat(l)}):(0,a.jsx)("span",{className:"text-[10px] font-semibold uppercase tracking-wide",children:"Logo"})})}},9157:(e,t,r)=>{function a(e){if(!e)return null;let[t,r]=e.split("T");if(!t||!r)return null;let[a,n,i]=t.split("-"),[l,s]=r.split(":"),o=Number(a),c=Number(n),d=Number(i),m=Number(l),u=Number(s);return Number.isFinite(o)&&Number.isFinite(c)&&Number.isFinite(d)&&Number.isFinite(m)&&Number.isFinite(u)?{year:o,month:c,day:d,hour:m,minute:u}:null}function n(e,t){let r=a(e);if(!r)return"";let n=new Date(Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,0)),i=function(e,t){let r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),a={};for(let e of r)"literal"!==e.type&&(a[e.type]=e.value);return Date.UTC(Number(a.year),Number(a.month)-1,Number(a.day),Number(a.hour),Number(a.minute),Number(a.second))-t.getTime()}(t,n);return new Date(n.getTime()-i).toISOString()}function i(e,t){if(!e)return"";let r=new Date(e);if(Number.isNaN(r.getTime()))return"";let a=new Intl.DateTimeFormat("en-US",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(r),n={};for(let e of a)"literal"!==e.type&&(n[e.type]=e.value);return"".concat(n.year,"-").concat(n.month,"-").concat(n.day,"T").concat(n.hour,":").concat(n.minute)}function l(e,t){if(!e)return"—";let r=new Date(e);return Number.isNaN(r.getTime())?"—":r.toLocaleString(void 0,{timeZone:t,timeZoneName:"short"})}function s(e,t){if(!e)return"—";let r=new Date(e);return Number.isNaN(r.getTime())?"—":r.toLocaleTimeString(void 0,{timeZone:t,hour:"numeric",minute:"2-digit"})}function o(e,t){if(!e)return"";let r=new Date(e);if(Number.isNaN(r.getTime()))return"";let a=new Intl.DateTimeFormat("en-US",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(r),n={};for(let e of a)"literal"!==e.type&&(n[e.type]=e.value);return"".concat(n.year,"-").concat(n.month,"-").concat(n.day)}function c(e){if(!e)return"—";let[t,r]=e.split(":"),a=Number(t),n=Number(r);return Number.isFinite(a)&&Number.isFinite(n)?new Date(Date.UTC(2e3,0,1,a,n,0)).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}):e}function d(e){let t=a(e);if(!t)return"";let r=new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,0));r.setUTCHours(r.getUTCHours()-1);let n=String(r.getUTCHours()).padStart(2,"0"),i=String(r.getUTCMinutes()).padStart(2,"0");return"".concat(n,":").concat(i)}function m(e,t){if(!e)return!1;let r=new Date(n(e,t));if(Number.isNaN(r.getTime()))return!1;let a=r.getTime()-36e5;return Date.now()>=a}r.d(t,{Kb:()=>d,P9:()=>l,Xr:()=>n,Z5:()=>s,a7:()=>c,eL:()=>m,so:()=>o,y7:()=>i})},9815:(e,t,r)=>{r.d(t,{f:()=>n});var a=r(2115);function n(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/performances");if(!e.ok)throw Error("Failed to fetch performances");let r=await e.json();t(r)}catch(e){l(e instanceof Error?e.message:"An error occurred")}finally{n(!1)}}()},[]);let s=async(r,a,n,i,s,o)=>{try{let l=await fetch("/api/performances",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,description:a,date:n,location:i,call_time:s,timezone:o})});if(!l.ok)throw Error("Failed to create performance");let c=await l.json();return t([...e,c]),c}catch(e){throw l(e instanceof Error?e.message:"An error occurred"),e}},o=async r=>{try{if(!(await fetch("/api/performances/".concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete performance");t(e.filter(e=>e.id!==r))}catch(e){throw l(e instanceof Error?e.message:"An error occurred"),e}};return{performances:e,loading:r,error:i,createPerformance:s,deletePerformance:o}}}}]);