"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/performances/[id]/page",{

/***/ "(app-pages-browser)/./src/components/MarkingPanel.tsx":
/*!*****************************************!*\
  !*** ./src/components/MarkingPanel.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MarkingPanel: () => (/* binding */ MarkingPanel)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/MusicPlayer */ \"(app-pages-browser)/./src/components/MusicPlayer.tsx\");\n/* __next_internal_client_entry_do_not_use__ MarkingPanel auto */ \nvar _s = $RefreshSig$();\n\n\nfunction formatTime(seconds) {\n    const total = Math.max(0, Math.floor(seconds));\n    const mins = Math.floor(total / 60);\n    const secs = total % 60;\n    return \"\".concat(mins, \":\").concat(secs.toString().padStart(2, \"0\"));\n}\nfunction parseTimeString(value) {\n    if (!value) return null;\n    const trimmed = value.trim();\n    if (!trimmed) return null;\n    if (/^\\d+(\\.\\d+)?$/.test(trimmed)) return Math.max(0, parseFloat(trimmed));\n    const parts = trimmed.split(\":\");\n    if (parts.length === 2) {\n        const mins = parseInt(parts[0], 10);\n        const secs = parseFloat(parts[1]);\n        if (Number.isNaN(mins) || Number.isNaN(secs)) return null;\n        return Math.max(0, mins * 60 + secs);\n    }\n    return null;\n}\nfunction uuid() {\n    return Math.random().toString(36).slice(2, 10) + Date.now().toString(36);\n}\nfunction MarkingPanel(param) {\n    let { performanceId, parts, musicUrl, performanceTitle, onPartsUpdated } = param;\n    _s();\n    const [rows, setRows] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeRowId, setActiveRowId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [assignments, setAssignments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartsByPart, setSubpartsByPart] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [newSubpartTitle, setNewSubpartTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionTitle, setSessionTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"New Marking Session\");\n    const [customTitle, setCustomTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionList, setSessionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedSessionId, setSelectedSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [allSessions, setAllSessions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [performanceNameMap, setPerformanceNameMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [musicDuration, setMusicDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioCleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const timelineRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [manualTimelineLength, setManualTimelineLength] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(180);\n    const [partTimelineOverrides, setPartTimelineOverrides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartTimelineOverrides, setSubpartTimelineOverrides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [draggingPartId, setDraggingPartId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const dragStateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            return ({\n                \"MarkingPanel.useEffect\": ()=>{\n                    var _audioCleanupRef_current;\n                    (_audioCleanupRef_current = audioCleanupRef.current) === null || _audioCleanupRef_current === void 0 ? void 0 : _audioCleanupRef_current.call(audioCleanupRef);\n                }\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!draggingPartId) return;\n            const handleMove = {\n                \"MarkingPanel.useEffect.handleMove\": (event)=>{\n                    if (!timelineRef.current || !dragStateRef.current) return;\n                    const rect = timelineRef.current.getBoundingClientRect();\n                    const ratio = (event.clientX - rect.left) / rect.width;\n                    const raw = ratio * timelineLength - dragStateRef.current.offsetSec;\n                    const duration = dragStateRef.current.duration;\n                    const start = Math.max(0, Math.min(timelineLength - duration, raw));\n                    const snapped = Math.round(start);\n                    setPartStartEnd(dragStateRef.current.partId, snapped, snapped + duration);\n                }\n            }[\"MarkingPanel.useEffect.handleMove\"];\n            const handleUp = {\n                \"MarkingPanel.useEffect.handleUp\": ()=>{\n                    setDraggingPartId(null);\n                    dragStateRef.current = null;\n                }\n            }[\"MarkingPanel.useEffect.handleUp\"];\n            window.addEventListener(\"mousemove\", handleMove);\n            window.addEventListener(\"mouseup\", handleUp);\n            return ({\n                \"MarkingPanel.useEffect\": ()=>{\n                    window.removeEventListener(\"mousemove\", handleMove);\n                    window.removeEventListener(\"mouseup\", handleUp);\n                }\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        draggingPartId,\n        timelineLength\n    ]);\n    const handleAudioReady = (audio)=>{\n        if (audioCleanupRef.current) audioCleanupRef.current();\n        if (!audio) {\n            setMusicDuration(null);\n            audioCleanupRef.current = null;\n            return;\n        }\n        const update = ()=>{\n            const duration = Number.isFinite(audio.duration) ? audio.duration : null;\n            setMusicDuration(duration);\n        };\n        audio.addEventListener(\"loadedmetadata\", update);\n        audio.addEventListener(\"durationchange\", update);\n        update();\n        audioCleanupRef.current = ()=>{\n            audio.removeEventListener(\"loadedmetadata\", update);\n            audio.removeEventListener(\"durationchange\", update);\n        };\n    };\n    const assignedMarkCounts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[assignedMarkCounts]\": ()=>{\n            const counts = {};\n            Object.values(assignments).forEach({\n                \"MarkingPanel.useMemo[assignedMarkCounts]\": (value)=>{\n                    if (typeof value === \"string\") {\n                        counts[value] = (counts[value] || 0) + 1;\n                    } else if (value === null || value === void 0 ? void 0 : value.markId) {\n                        counts[value.markId] = (counts[value.markId] || 0) + 1;\n                    }\n                }\n            }[\"MarkingPanel.useMemo[assignedMarkCounts]\"]);\n            return counts;\n        }\n    }[\"MarkingPanel.useMemo[assignedMarkCounts]\"], [\n        assignments\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (rows.length === 0) {\n                const firstRow = {\n                    id: uuid(),\n                    label: \"Row 1\",\n                    note: \"\",\n                    marks: []\n                };\n                setRows([\n                    firstRow\n                ]);\n                setActiveRowId(firstRow.id);\n            }\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        rows.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (customTitle) return;\n            const title = \"\".concat(new Date().toLocaleString(), \" \\xb7 \").concat(performanceTitle || \"Performance\");\n            setSessionTitle(title);\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceTitle,\n        customTitle\n    ]);\n    const timelineLength = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[timelineLength]\": ()=>{\n            const times = [];\n            parts.forEach({\n                \"MarkingPanel.useMemo[timelineLength]\": (part)=>{\n                    const override = partTimelineOverrides[part.id];\n                    var _override_start, _ref;\n                    const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : part.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                    var _override_end, _ref1;\n                    const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : part.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                    if (start !== null) times.push(start);\n                    if (end !== null) times.push(end);\n                    if (start !== null && end === null) times.push(start + 10);\n                }\n            }[\"MarkingPanel.useMemo[timelineLength]\"]);\n            Object.values(subpartsByPart).flat().forEach({\n                \"MarkingPanel.useMemo[timelineLength]\": (sub)=>{\n                    const override = subpartTimelineOverrides[sub.id];\n                    var _override_start, _ref;\n                    const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                    var _override_end, _ref1;\n                    const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                    if (start !== null) times.push(start);\n                    if (end !== null) times.push(end);\n                    if (start !== null && end === null) times.push(start + 10);\n                }\n            }[\"MarkingPanel.useMemo[timelineLength]\"]);\n            const maxTime = times.length ? Math.max(...times) : 0;\n            if (musicDuration && Number.isFinite(musicDuration)) return Math.max(musicDuration, maxTime, 10);\n            return Math.max(manualTimelineLength, maxTime, 10);\n        }\n    }[\"MarkingPanel.useMemo[timelineLength]\"], [\n        musicDuration,\n        manualTimelineLength,\n        parts,\n        subpartsByPart,\n        partTimelineOverrides,\n        subpartTimelineOverrides\n    ]);\n    const getPartStartEnd = (part)=>{\n        const override = partTimelineOverrides[part.id];\n        var _override_start, _ref;\n        const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : part.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n        var _override_end, _ref1;\n        const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : part.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n        return {\n            start,\n            end\n        };\n    };\n    const setPartStartEnd = (partId, start, end)=>{\n        setPartTimelineOverrides((prev)=>({\n                ...prev,\n                [partId]: {\n                    start,\n                    end\n                }\n            }));\n    };\n    const setSubpartStartEnd = (subpartId, start, end)=>{\n        setSubpartTimelineOverrides((prev)=>({\n                ...prev,\n                [subpartId]: {\n                    start,\n                    end\n                }\n            }));\n    };\n    const getSubpartStartEnd = (sub)=>{\n        const override = subpartTimelineOverrides[sub.id];\n        var _override_start, _ref;\n        const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n        var _override_end, _ref1;\n        const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n        return {\n            start,\n            end\n        };\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSubparts = {\n                \"MarkingPanel.useEffect.fetchSubparts\": async ()=>{\n                    const entries = await Promise.all(parts.map({\n                        \"MarkingPanel.useEffect.fetchSubparts\": async (part)=>{\n                            const res = await fetch(\"/api/subparts?partId=\".concat(part.id));\n                            if (!res.ok) return [\n                                part.id,\n                                []\n                            ];\n                            const data = await res.json();\n                            return [\n                                part.id,\n                                data || []\n                            ];\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]));\n                    const map = {};\n                    entries.forEach({\n                        \"MarkingPanel.useEffect.fetchSubparts\": (param)=>{\n                            let [partId, list] = param;\n                            map[partId] = list;\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]);\n                    setSubpartsByPart(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchSubparts\"];\n            fetchSubparts();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        parts\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSessions = {\n                \"MarkingPanel.useEffect.fetchSessions\": async ()=>{\n                    const res = await fetch(allSessions ? \"/api/marking-sessions?all=1\" : \"/api/marking-sessions?performanceId=\".concat(performanceId));\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    setSessionList(data || []);\n                }\n            }[\"MarkingPanel.useEffect.fetchSessions\"];\n            fetchSessions();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        allSessions\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const fetchPerformanceNames = {\n                \"MarkingPanel.useEffect.fetchPerformanceNames\": async ()=>{\n                    const res = await fetch(\"/api/performances\");\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    const map = {};\n                    (data || []).forEach({\n                        \"MarkingPanel.useEffect.fetchPerformanceNames\": (perf)=>{\n                            map[perf.id] = perf.title || \"Performance\";\n                        }\n                    }[\"MarkingPanel.useEffect.fetchPerformanceNames\"]);\n                    setPerformanceNameMap(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchPerformanceNames\"];\n            fetchPerformanceNames();\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"MarkingPanel.useEffect.handleKeyDown\": (event)=>{\n                    var _target_tagName;\n                    const target = event.target;\n                    const tag = target === null || target === void 0 ? void 0 : (_target_tagName = target.tagName) === null || _target_tagName === void 0 ? void 0 : _target_tagName.toLowerCase();\n                    if (tag === \"input\" || tag === \"textarea\" || tag === \"select\") return;\n                    if (event.code === \"Space\") {\n                        var _rows_;\n                        event.preventDefault();\n                        const rowId = activeRowId || ((_rows_ = rows[0]) === null || _rows_ === void 0 ? void 0 : _rows_.id);\n                        if (!rowId) return;\n                        const mark = {\n                            id: uuid(),\n                            time: currentTime,\n                            createdAt: new Date().toISOString()\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>prev.map({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (row)=>row.id === rowId ? {\n                                            ...row,\n                                            marks: [\n                                                ...row.marks,\n                                                mark\n                                            ]\n                                        } : row\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"])\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                    }\n                    if (event.key === \"e\" || event.key === \"E\") {\n                        event.preventDefault();\n                        const nextIndex = rows.length + 1;\n                        const newRow = {\n                            id: uuid(),\n                            label: \"Row \".concat(nextIndex),\n                            note: \"\",\n                            marks: []\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>{\n                                const idx = activeRowId ? prev.findIndex({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (r)=>r.id === activeRowId\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"]) : prev.length - 1;\n                                if (idx === -1) return [\n                                    ...prev,\n                                    newRow\n                                ];\n                                const next = [\n                                    ...prev\n                                ];\n                                next.splice(idx + 1, 0, newRow);\n                                return next;\n                            }\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                        setActiveRowId(newRow.id);\n                    }\n                }\n            }[\"MarkingPanel.useEffect.handleKeyDown\"];\n            window.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"MarkingPanel.useEffect\": ()=>window.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        activeRowId,\n        currentTime,\n        rows\n    ]);\n    const handleDropToRow = (rowId, markId)=>{\n        setRows((prev)=>{\n            let moved = null;\n            const removed = prev.map((row)=>{\n                const nextMarks = row.marks.filter((m)=>{\n                    if (m.id === markId) {\n                        moved = m;\n                        return false;\n                    }\n                    return true;\n                });\n                return {\n                    ...row,\n                    marks: nextMarks\n                };\n            });\n            if (!moved) return prev;\n            return removed.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: [\n                        ...row.marks,\n                        moved\n                    ]\n                } : row);\n        });\n    };\n    const handleRemoveMark = (rowId, markId)=>{\n        setRows((prev)=>prev.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: row.marks.filter((m)=>m.id !== markId)\n                } : row));\n    };\n    const getMarkTimeById = (markId)=>{\n        for (const row of rows){\n            const mark = row.marks.find((m)=>m.id === markId);\n            if (mark) return mark.time;\n        }\n        return null;\n    };\n    const timelineDefaultDuration = 10;\n    const timelineData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[timelineData]\": ()=>{\n            const assigned = [];\n            const unassigned = [];\n            parts.forEach({\n                \"MarkingPanel.useMemo[timelineData]\": (part)=>{\n                    const { start, end } = getPartStartEnd(part);\n                    if (start === null) {\n                        unassigned.push(part);\n                        return;\n                    }\n                    const resolvedEnd = end !== null && end !== void 0 ? end : start + timelineDefaultDuration;\n                    assigned.push({\n                        id: part.id,\n                        name: part.name,\n                        start,\n                        end: resolvedEnd,\n                        missingEnd: end === null\n                    });\n                }\n            }[\"MarkingPanel.useMemo[timelineData]\"]);\n            assigned.sort({\n                \"MarkingPanel.useMemo[timelineData]\": (a, b)=>a.start - b.start\n            }[\"MarkingPanel.useMemo[timelineData]\"]);\n            const rows = [];\n            assigned.forEach({\n                \"MarkingPanel.useMemo[timelineData]\": (item)=>{\n                    let placed = false;\n                    for (const row of rows){\n                        const last = row.items[row.items.length - 1];\n                        if (!last || item.start >= last.end) {\n                            row.items.push(item);\n                            placed = true;\n                            break;\n                        }\n                    }\n                    if (!placed) {\n                        rows.push({\n                            id: uuid(),\n                            items: [\n                                item\n                            ]\n                        });\n                    }\n                }\n            }[\"MarkingPanel.useMemo[timelineData]\"]);\n            return {\n                rows,\n                unassigned\n            };\n        }\n    }[\"MarkingPanel.useMemo[timelineData]\"], [\n        parts,\n        partTimelineOverrides\n    ]);\n    const normalizeAssignments = (rowsSnapshot, raw)=>{\n        const normalized = {};\n        Object.entries(raw || {}).forEach((param)=>{\n            let [key, value] = param;\n            if (typeof value === \"string\") {\n                const mark = rowsSnapshot.flatMap((r)=>r.marks).find((m)=>m.id === value);\n                if (mark) {\n                    normalized[key] = {\n                        markId: value,\n                        time: mark.time\n                    };\n                }\n            } else if (value && typeof value === \"object\") {\n                normalized[key] = value;\n            }\n        });\n        return normalized;\n    };\n    const getAssignedTime = (targetKey)=>{\n        const value = assignments[targetKey];\n        if (!value) return null;\n        if (typeof value === \"string\") {\n            for (const row of rows){\n                const mark = row.marks.find((m)=>m.id === value);\n                if (mark) return mark.time;\n            }\n            return null;\n        }\n        var _value_time;\n        return (_value_time = value.time) !== null && _value_time !== void 0 ? _value_time : null;\n    };\n    const getExistingTime = (type, id, field)=>{\n        if (type === \"part\") {\n            const part = parts.find((p)=>p.id === id);\n            if (!part) return null;\n            var _part_timepoint_seconds, _part_timepoint_end_seconds;\n            return field === \"start\" ? (_part_timepoint_seconds = part.timepoint_seconds) !== null && _part_timepoint_seconds !== void 0 ? _part_timepoint_seconds : null : (_part_timepoint_end_seconds = part.timepoint_end_seconds) !== null && _part_timepoint_end_seconds !== void 0 ? _part_timepoint_end_seconds : null;\n        }\n        const sub = Object.values(subpartsByPart).flat().find((s)=>s.id === id);\n        if (!sub) return null;\n        var _sub_timepoint_seconds, _sub_timepoint_end_seconds;\n        return field === \"start\" ? (_sub_timepoint_seconds = sub.timepoint_seconds) !== null && _sub_timepoint_seconds !== void 0 ? _sub_timepoint_seconds : null : (_sub_timepoint_end_seconds = sub.timepoint_end_seconds) !== null && _sub_timepoint_end_seconds !== void 0 ? _sub_timepoint_end_seconds : null;\n    };\n    const assignMarkToTarget = (targetKey, markId)=>{\n        var _rows_flatMap_find;\n        const [type, id, field] = targetKey.split(\":\");\n        const markTime = (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === markId)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time;\n        if (markTime === undefined) return;\n        const oppositeField = field === \"start\" ? \"end\" : \"start\";\n        const assignedOpposite = getAssignedTime(\"\".concat(type, \":\").concat(id, \":\").concat(oppositeField));\n        const existingOpposite = getExistingTime(type, id, oppositeField);\n        const oppositeTime = assignedOpposite !== null && assignedOpposite !== void 0 ? assignedOpposite : existingOpposite;\n        if (field === \"end\" && oppositeTime !== null && markTime < oppositeTime) {\n            alert(\"End time cannot be before start time.\");\n            return;\n        }\n        if (field === \"start\" && oppositeTime !== null && markTime > oppositeTime) {\n            alert(\"Start time cannot be after end time.\");\n            return;\n        }\n        setAssignments((prev)=>({\n                ...prev,\n                [targetKey]: {\n                    markId,\n                    time: markTime\n                }\n            }));\n    };\n    const clearAssignment = (targetKey)=>{\n        setAssignments((prev)=>{\n            const next = {\n                ...prev\n            };\n            delete next[targetKey];\n            return next;\n        });\n    };\n    const renderTimeTarget = (type, id, field)=>{\n        const targetKey = \"\".concat(type, \":\").concat(id, \":\").concat(field);\n        const assignedValue = assignments[targetKey];\n        const assignedMarkId = typeof assignedValue === \"string\" ? assignedValue : assignedValue === null || assignedValue === void 0 ? void 0 : assignedValue.markId;\n        const assignedTime = getAssignedTime(targetKey);\n        const existingTime = getExistingTime(type, id, field);\n        const showTime = assignedTime !== null ? assignedTime : existingTime;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"border border-dashed rounded px-2 py-1 text-xs flex items-center gap-2 \".concat(assignedMarkId ? \"border-emerald-400 bg-emerald-50\" : \"border-gray-300 bg-white\"),\n            onDragOver: (e)=>e.preventDefault(),\n            onDrop: (e)=>{\n                const markId = e.dataTransfer.getData(\"markId\");\n                if (!markId) return;\n                assignMarkToTarget(targetKey, markId);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-gray-500 uppercase\",\n                    children: field\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 492,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: showTime !== null ? formatTime(showTime) : \"--:--\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 493,\n                    columnNumber: 9\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"ml-1 px-2 py-0.5 rounded-full text-[10px] bg-emerald-600 text-white\",\n                    children: \"Chip\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 497,\n                    columnNumber: 11\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>clearAssignment(targetKey),\n                    className: \"ml-auto text-red-600 hover:text-red-800\",\n                    title: \"Remove\",\n                    children: \"\\xc3â€”\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 502,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n            lineNumber: 481,\n            columnNumber: 7\n        }, this);\n    };\n    const handleSaveSession = async ()=>{\n        const payload = {\n            performance_id: performanceId,\n            title: sessionTitle || \"Marking Session\",\n            rows,\n            assignments\n        };\n        const res = await fetch(\"/api/marking-sessions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n        if (res.ok) {\n            const created = await res.json();\n            setSessionList((prev)=>[\n                    created,\n                    ...prev\n                ]);\n        }\n    };\n    const handleApply = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            Object.entries(assignments).forEach((param)=>{\n                let [key, value] = param;\n                var _rows_flatMap_find;\n                const [type, id, field] = key.split(\":\");\n                const markId = typeof value === \"string\" ? value : value === null || value === void 0 ? void 0 : value.markId;\n                const markTime = typeof value === \"string\" ? (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === value)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time : value === null || value === void 0 ? void 0 : value.time;\n                if (markTime === undefined || markTime === null) return;\n                if (type === \"part\") {\n                    updatesByPart[id] = updatesByPart[id] || {};\n                    updatesByPart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = markTime;\n                } else {\n                    updatesBySubpart[id] = updatesBySubpart[id] || {};\n                    updatesBySubpart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = markTime;\n                }\n            });\n            const updatedParts = [];\n            const updatedSubparts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                const res = await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    if (updated) updatedSubparts.push(updated);\n                }\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n            if (updatedSubparts.length > 0) {\n                setSubpartsByPart((prev)=>{\n                    const next = {\n                        ...prev\n                    };\n                    updatedSubparts.forEach((sub)=>{\n                        next[sub.part_id] = (next[sub.part_id] || []).map((s)=>s.id === sub.id ? {\n                                ...s,\n                                ...sub\n                            } : s);\n                    });\n                    return next;\n                });\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    const handleSaveTimeline = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            parts.forEach((part)=>{\n                const { start, end } = getPartStartEnd(part);\n                if (start !== null) {\n                    updatesByPart[part.id] = {\n                        timepoint_seconds: start,\n                        timepoint_end_seconds: end !== null && end !== void 0 ? end : null\n                    };\n                }\n            });\n            Object.values(subpartsByPart).flat().forEach((sub)=>{\n                const override = subpartTimelineOverrides[sub.id];\n                var _override_start, _ref;\n                const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                var _override_end, _ref1;\n                const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                if (start !== null) {\n                    updatesBySubpart[sub.id] = {\n                        timepoint_seconds: start,\n                        timepoint_end_seconds: end !== null && end !== void 0 ? end : null\n                    };\n                }\n            });\n            const updatedParts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"grid grid-cols-1 xl:grid-cols-[320px_1fr] gap-6\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xl font-bold text-gray-900 mb-2\",\n                        children: \"Parts & Subparts\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 671,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 mb-4\",\n                        children: \"Drop time chips onto Start/End. Only dropped chips change timepoints when saved.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 672,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: parts.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"border border-gray-200 rounded-lg p-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-semibold text-gray-900 mb-2\",\n                                        children: part.name\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 678,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid grid-cols-2 gap-2 mb-2\",\n                                        children: [\n                                            renderTimeTarget(\"part\", part.id, \"start\"),\n                                            renderTimeTarget(\"part\", part.id, \"end\")\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 679,\n                                        columnNumber: 15\n                                    }, this),\n                                    (subpartsByPart[part.id] || []).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 space-y-2\",\n                                        children: (subpartsByPart[part.id] || []).map((sub)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border border-gray-100 rounded p-2 bg-gray-50\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-sm font-semibold text-gray-800\",\n                                                        children: sub.title\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 687,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"grid grid-cols-2 gap-2 mt-2\",\n                                                        children: [\n                                                            renderTimeTarget(\"subpart\", sub.id, \"start\"),\n                                                            renderTimeTarget(\"subpart\", sub.id, \"end\")\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 688,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, sub.id, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 686,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 684,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-3 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: newSubpartTitle[part.id] || \"\",\n                                                onChange: (e)=>setNewSubpartTitle((prev)=>({\n                                                            ...prev,\n                                                            [part.id]: e.target.value\n                                                        })),\n                                                placeholder: \"Add subpart\",\n                                                className: \"flex-1 px-2 py-1 border border-gray-300 rounded text-xs\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 697,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: async ()=>{\n                                                    const title = (newSubpartTitle[part.id] || \"\").trim();\n                                                    if (!title) return;\n                                                    const res = await fetch(\"/api/subparts\", {\n                                                        method: \"POST\",\n                                                        headers: {\n                                                            \"Content-Type\": \"application/json\"\n                                                        },\n                                                        body: JSON.stringify({\n                                                            part_id: part.id,\n                                                            title\n                                                        })\n                                                    });\n                                                    if (res.ok) {\n                                                        const created = await res.json();\n                                                        setSubpartsByPart((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: [\n                                                                    ...prev[part.id] || [],\n                                                                    created\n                                                                ]\n                                                            }));\n                                                        setNewSubpartTitle((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: \"\"\n                                                            }));\n                                                    }\n                                                },\n                                                className: \"px-2 py-1 bg-gray-900 text-white rounded text-xs\",\n                                                children: \"Add\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 706,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 696,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, part.id, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 677,\n                                columnNumber: 13\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 675,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 670,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-wrap items-center gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xl font-bold text-gray-900\",\n                                        children: \"Marking Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 737,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"ml-auto flex gap-2 items-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: sessionTitle,\n                                                onChange: (e)=>{\n                                                    setSessionTitle(e.target.value);\n                                                    setCustomTitle(true);\n                                                },\n                                                className: \"px-3 py-1 border border-gray-300 rounded text-sm\",\n                                                placeholder: \"Session title\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 739,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleSaveSession,\n                                                className: \"px-3 py-1 bg-gray-900 text-white rounded text-sm\",\n                                                children: \"Save Session\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 748,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleApply,\n                                                disabled: saving,\n                                                className: \"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:bg-gray-400\",\n                                                children: saving ? \"Saving...\" : \"Apply Timepoints\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 754,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 738,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 736,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-2\",\n                                children: \"Hotkeys: Space = mark time, E = new row. Works while music is playing or paused.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 763,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-1\",\n                                children: [\n                                    \"Music length: \",\n                                    musicDuration ? formatTime(musicDuration) : \"Ã¯Â¿Â½\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 766,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 bg-gray-50 border border-dashed border-gray-300 rounded p-3 text-xs text-gray-500\",\n                                children: \"Waveform view: not available yet. We can add a waveform preview in a follow-up.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 769,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 flex flex-wrap items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                        value: selectedSessionId,\n                                        onChange: async (e)=>{\n                                            const id = e.target.value;\n                                            setSelectedSessionId(id);\n                                            if (!id) return;\n                                            const res = await fetch(\"/api/marking-sessions/\".concat(id));\n                                            if (!res.ok) return;\n                                            const data = await res.json();\n                                            setSessionTitle(data.title || \"Marking Session\");\n                                            setCustomTitle(true);\n                                            const nextRows = (data.rows || []).map((row)=>({\n                                                    ...row,\n                                                    note: row.note || \"\"\n                                                }));\n                                            setRows(nextRows);\n                                            setAssignments(normalizeAssignments(nextRows, data.assignments || {}));\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                value: \"\",\n                                                children: \"Load saved session...\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 793,\n                                                columnNumber: 15\n                                            }, this),\n                                            sessionList.map((sess)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: sess.id,\n                                                    children: [\n                                                        sess.title || \"Untitled\",\n                                                        \" \\xef\\xbf\\xbd \",\n                                                        performanceNameMap[sess.performance_id] || \"Performance\",\n                                                        \" \\xef\\xbf\\xbd \",\n                                                        new Date(sess.created_at).toLocaleString()\n                                                    ]\n                                                }, sess.id, true, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 795,\n                                                    columnNumber: 17\n                                                }, this))\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 773,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-xs text-gray-600 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: allSessions,\n                                                onChange: (e)=>setAllSessions(e.target.checked),\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 801,\n                                                columnNumber: 15\n                                            }, this),\n                                            \"Show sessions from all performances\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 800,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            const firstRow = {\n                                                id: uuid(),\n                                                label: \"Row 1\",\n                                                note: \"\",\n                                                marks: []\n                                            };\n                                            setRows([\n                                                firstRow\n                                            ]);\n                                            setActiveRowId(firstRow.id);\n                                            setAssignments({});\n                                            setSelectedSessionId(\"\");\n                                            setCustomTitle(false);\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: \"New Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 809,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 772,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 735,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-3 mb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-lg font-semibold text-gray-900\",\n                                        children: \"Timeline\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 827,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"ml-auto flex items-center gap-2\",\n                                        children: [\n                                            !musicDuration && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 text-xs text-gray-600\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        children: \"Timeline length (sec)\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 831,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"number\",\n                                                        min: 10,\n                                                        value: manualTimelineLength,\n                                                        onChange: (e)=>setManualTimelineLength(parseInt(e.target.value || \"0\", 10) || 0),\n                                                        className: \"w-20 px-2 py-1 border border-gray-300 rounded text-xs\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 832,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 830,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleSaveTimeline,\n                                                disabled: saving,\n                                                className: \"px-3 py-1 bg-indigo-600 text-white rounded text-sm disabled:bg-gray-400\",\n                                                children: saving ? \"Saving...\" : \"Save Timeline\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 841,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 828,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 826,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500\",\n                                children: \"Drag parts to move them. Drop chips or type times to set Start/End.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 850,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 space-y-4\",\n                                children: [\n                                    timelineData.rows.map((row, rowIndex)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"space-y-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs font-semibold text-gray-600\",\n                                                    children: [\n                                                        \"Row \",\n                                                        rowIndex + 1\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 856,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    ref: rowIndex === 0 ? timelineRef : undefined,\n                                                    className: \"relative h-24 border border-gray-200 rounded bg-gray-50 overflow-hidden\",\n                                                    onDragOver: (e)=>e.preventDefault(),\n                                                    onDrop: (e)=>{\n                                                        const partId = e.dataTransfer.getData(\"partId\");\n                                                        if (!partId) return;\n                                                        const rect = e.currentTarget.getBoundingClientRect();\n                                                        const ratio = (e.clientX - rect.left) / rect.width;\n                                                        const start = Math.max(0, Math.min(timelineLength - timelineDefaultDuration, Math.round(ratio * timelineLength)));\n                                                        const part = parts.find((p)=>p.id === partId);\n                                                        const { start: existingStart, end: existingEnd } = part ? getPartStartEnd(part) : {\n                                                            start: null,\n                                                            end: null\n                                                        };\n                                                        const duration = existingStart !== null && existingEnd !== null ? existingEnd - existingStart : timelineDefaultDuration;\n                                                        setPartStartEnd(partId, start, start + Math.max(1, duration));\n                                                    },\n                                                    children: row.items.map((item)=>{\n                                                        const left = item.start / timelineLength * 100;\n                                                        const width = (item.end - item.start) / timelineLength * 100;\n                                                        const part = parts.find((p)=>p.id === item.id);\n                                                        const subparts = part ? subpartsByPart[part.id] || [] : [];\n                                                        const { start, end } = part ? getPartStartEnd(part) : {\n                                                            start: null,\n                                                            end: null\n                                                        };\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"absolute top-2 h-[84px] rounded border px-2 py-1 bg-white shadow-sm cursor-move \".concat(item.missingEnd ? \"border-blue-400\" : \"border-gray-300\"),\n                                                            style: {\n                                                                left: \"\".concat(left, \"%\"),\n                                                                width: \"\".concat(Math.max(4, width), \"%\")\n                                                            },\n                                                            onMouseDown: (e)=>{\n                                                                const target = e.target;\n                                                                if ([\n                                                                    \"INPUT\",\n                                                                    \"TEXTAREA\",\n                                                                    \"BUTTON\"\n                                                                ].includes(target.tagName)) return;\n                                                                if (!timelineRef.current) return;\n                                                                const rect = timelineRef.current.getBoundingClientRect();\n                                                                const ratio = (e.clientX - rect.left) / rect.width;\n                                                                const offsetSec = ratio * timelineLength - item.start;\n                                                                dragStateRef.current = {\n                                                                    partId: item.id,\n                                                                    duration: item.end - item.start,\n                                                                    offsetSec\n                                                                };\n                                                                setDraggingPartId(item.id);\n                                                            },\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"text-xs font-semibold text-gray-900 truncate\",\n                                                                    children: item.name\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                    lineNumber: 901,\n                                                                    columnNumber: 25\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"mt-1 grid grid-cols-2 gap-1 text-[10px]\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"border border-dashed rounded px-1 py-0.5 \".concat(item.missingEnd ? \"border-blue-400 bg-blue-50\" : \"border-gray-300 bg-white\"),\n                                                                            onDragOver: (e)=>e.preventDefault(),\n                                                                            onDrop: (e)=>{\n                                                                                const markId = e.dataTransfer.getData(\"markId\");\n                                                                                if (!markId) return;\n                                                                                const markTime = getMarkTimeById(markId);\n                                                                                if (markTime === null) return;\n                                                                                const nextEnd = end !== null && markTime > end ? markTime : end;\n                                                                                setPartStartEnd(item.id, markTime, nextEnd);\n                                                                            },\n                                                                            children: [\n                                                                                \"Start:\",\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"ml-1 w-12 bg-transparent\",\n                                                                                    value: start !== null ? formatTime(start) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (end !== null && value > end) return;\n                                                                                        setPartStartEnd(item.id, value, end);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 918,\n                                                                                    columnNumber: 29\n                                                                                }, this)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                            lineNumber: 903,\n                                                                            columnNumber: 27\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"border border-dashed rounded px-1 py-0.5 \".concat(item.missingEnd ? \"border-blue-400 bg-blue-50\" : \"border-gray-300 bg-white\"),\n                                                                            onDragOver: (e)=>e.preventDefault(),\n                                                                            onDrop: (e)=>{\n                                                                                const markId = e.dataTransfer.getData(\"markId\");\n                                                                                if (!markId) return;\n                                                                                const markTime = getMarkTimeById(markId);\n                                                                                if (markTime === null) return;\n                                                                                if (start !== null && markTime < start) return;\n                                                                                setPartStartEnd(item.id, start, markTime);\n                                                                            },\n                                                                            children: [\n                                                                                \"End:\",\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"ml-1 w-12 bg-transparent\",\n                                                                                    value: end !== null ? formatTime(end) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (start !== null && value < start) return;\n                                                                                        setPartStartEnd(item.id, start, value);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 944,\n                                                                                    columnNumber: 29\n                                                                                }, this)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                            lineNumber: 929,\n                                                                            columnNumber: 27\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                    lineNumber: 902,\n                                                                    columnNumber: 25\n                                                                }, this),\n                                                                subparts.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"mt-1 space-y-1 text-[10px]\",\n                                                                    children: subparts.map((sub)=>{\n                                                                        const subTimes = getSubpartStartEnd(sub);\n                                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"flex items-center gap-1\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: \"truncate\",\n                                                                                    children: sub.title\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 962,\n                                                                                    columnNumber: 35\n                                                                                }, this),\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"w-10 bg-transparent border border-gray-200 rounded px-1\",\n                                                                                    value: subTimes.start !== null ? formatTime(subTimes.start) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (subTimes.end !== null && value > subTimes.end) return;\n                                                                                        setSubpartStartEnd(sub.id, value, subTimes.end);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 963,\n                                                                                    columnNumber: 35\n                                                                                }, this),\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"w-10 bg-transparent border border-gray-200 rounded px-1\",\n                                                                                    value: subTimes.end !== null ? formatTime(subTimes.end) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (subTimes.start !== null && value < subTimes.start) return;\n                                                                                        setSubpartStartEnd(sub.id, subTimes.start, value);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 973,\n                                                                                    columnNumber: 35\n                                                                                }, this)\n                                                                            ]\n                                                                        }, sub.id, true, {\n                                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                            lineNumber: 961,\n                                                                            columnNumber: 33\n                                                                        }, this);\n                                                                    })\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                    lineNumber: 957,\n                                                                    columnNumber: 27\n                                                                }, this)\n                                                            ]\n                                                        }, item.id, true, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 880,\n                                                            columnNumber: 23\n                                                        }, this);\n                                                    })\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 857,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, row.id, true, {\n                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                            lineNumber: 855,\n                                            columnNumber: 15\n                                        }, this)),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs font-semibold text-gray-600\",\n                                                children: \"Unassigned\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 995,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-2\",\n                                                children: [\n                                                    timelineData.unassigned.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: \"All parts assigned\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 998,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    timelineData.unassigned.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            draggable: true,\n                                                            onDragStart: (e)=>e.dataTransfer.setData(\"partId\", part.id),\n                                                            className: \"px-2 py-1 bg-gray-200 text-gray-800 rounded text-xs cursor-move\",\n                                                            children: part.name\n                                                        }, part.id, false, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 1001,\n                                                            columnNumber: 19\n                                                        }, this))\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 996,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 994,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 853,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 825,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-lg font-semibold text-gray-900 mb-3\",\n                                children: \"Mark Chips\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 1016,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-4\",\n                                children: rows.map((row)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        onClick: ()=>setActiveRowId(row.id),\n                                        className: \"border rounded-lg p-3 cursor-pointer \".concat(activeRowId === row.id ? \"border-blue-400 bg-blue-50\" : \"border-gray-200\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3 mb-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>setActiveRowId(row.id),\n                                                        className: \"px-2 py-1 rounded text-xs font-semibold \".concat(activeRowId === row.id ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700\"),\n                                                        children: row.label\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1027,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: \"Drop chips into the empty slot to organize.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1035,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    rows.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: (e)=>{\n                                                            e.stopPropagation();\n                                                            setRows((prev)=>prev.filter((r)=>r.id !== row.id));\n                                                            if (activeRowId === row.id) {\n                                                                const fallback = rows.find((r)=>r.id !== row.id);\n                                                                setActiveRowId(fallback ? fallback.id : null);\n                                                            }\n                                                        },\n                                                        className: \"ml-auto text-xs text-red-600 hover:text-red-800\",\n                                                        children: \"Delete Row\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1037,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1026,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: row.note || \"\",\n                                                onChange: (e)=>setRows((prev)=>prev.map((r)=>r.id === row.id ? {\n                                                                ...r,\n                                                                note: e.target.value\n                                                            } : r)),\n                                                placeholder: \"Row notes...\",\n                                                className: \"w-full px-2 py-1 border border-gray-200 rounded text-xs mb-2\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1052,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-2\",\n                                                children: [\n                                                    row.marks.map((mark)=>{\n                                                        const usage = assignedMarkCounts[mark.id] || 0;\n                                                        const colorClass = usage >= 2 ? \"bg-gray-200 text-gray-700\" : usage === 1 ? \"bg-yellow-200 text-yellow-900\" : \"bg-indigo-100 text-indigo-800\";\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            draggable: true,\n                                                            onDragStart: (e)=>{\n                                                                e.dataTransfer.setData(\"markId\", mark.id);\n                                                            },\n                                                            className: \"px-2 py-1 rounded text-xs cursor-move \".concat(colorClass),\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"flex items-center gap-2\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                        children: formatTime(mark.time)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                        lineNumber: 1081,\n                                                                        columnNumber: 25\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                        onClick: ()=>handleRemoveMark(row.id, mark.id),\n                                                                        className: \"text-[10px] text-gray-600 hover:text-gray-800\",\n                                                                        title: \"Remove chip\",\n                                                                        children: \"\\xef\\xbf\\xbd\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                        lineNumber: 1082,\n                                                                        columnNumber: 25\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                lineNumber: 1080,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, mark.id, false, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 1072,\n                                                            columnNumber: 21\n                                                        }, this);\n                                                    }),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"px-2 py-1 border border-dashed border-gray-300 rounded text-xs text-gray-500\",\n                                                        onDragOver: (e)=>e.preventDefault(),\n                                                        onDrop: (e)=>{\n                                                            const markId = e.dataTransfer.getData(\"markId\");\n                                                            if (!markId) return;\n                                                            handleDropToRow(row.id, markId);\n                                                        },\n                                                        children: \"Empty slot\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1093,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1062,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-2 text-[11px] text-gray-500\",\n                                                children: [\n                                                    \"Times:\",\n                                                    \" \",\n                                                    row.marks.length === 0 ? \"Ã¯Â¿Â½\" : row.marks.map((m)=>formatTime(m.time)).join(\", \")\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1105,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, row.id, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 1019,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 1017,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 1015,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__.MusicPlayer, {\n                            musicUrl: musicUrl || undefined,\n                            onTimeUpdate: (t)=>setCurrentTime(t),\n                            onAudioReady: handleAudioReady,\n                            audioRef: audioRef\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                            lineNumber: 1117,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 1116,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 734,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n        lineNumber: 669,\n        columnNumber: 5\n    }, this);\n}\n_s(MarkingPanel, \"CF4MmryRaLW4z7zmCCoWyhjHkdk=\");\n_c = MarkingPanel;\nvar _c;\n$RefreshReg$(_c, \"MarkingPanel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hcmtpbmdQYW5lbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU2RDtBQUNOO0FBNkN2RCxTQUFTSyxXQUFXQyxPQUFlO0lBQ2pDLE1BQU1DLFFBQVFDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxLQUFLLENBQUNKO0lBQ3JDLE1BQU1LLE9BQU9ILEtBQUtFLEtBQUssQ0FBQ0gsUUFBUTtJQUNoQyxNQUFNSyxPQUFPTCxRQUFRO0lBQ3JCLE9BQU8sR0FBV0ssT0FBUkQsTUFBSyxLQUFvQyxPQUFqQ0MsS0FBS0MsUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRztBQUNoRDtBQUVBLFNBQVNDLGdCQUFnQkMsS0FBYTtJQUNwQyxJQUFJLENBQUNBLE9BQU8sT0FBTztJQUNuQixNQUFNQyxVQUFVRCxNQUFNRSxJQUFJO0lBQzFCLElBQUksQ0FBQ0QsU0FBUyxPQUFPO0lBQ3JCLElBQUksZ0JBQWdCRSxJQUFJLENBQUNGLFVBQVUsT0FBT1QsS0FBS0MsR0FBRyxDQUFDLEdBQUdXLFdBQVdIO0lBQ2pFLE1BQU1JLFFBQVFKLFFBQVFLLEtBQUssQ0FBQztJQUM1QixJQUFJRCxNQUFNRSxNQUFNLEtBQUssR0FBRztRQUN0QixNQUFNWixPQUFPYSxTQUFTSCxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQ2hDLE1BQU1ULE9BQU9RLFdBQVdDLEtBQUssQ0FBQyxFQUFFO1FBQ2hDLElBQUlJLE9BQU9DLEtBQUssQ0FBQ2YsU0FBU2MsT0FBT0MsS0FBSyxDQUFDZCxPQUFPLE9BQU87UUFDckQsT0FBT0osS0FBS0MsR0FBRyxDQUFDLEdBQUdFLE9BQU8sS0FBS0M7SUFDakM7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTZTtJQUNQLE9BQU9uQixLQUFLb0IsTUFBTSxHQUFHZixRQUFRLENBQUMsSUFBSWdCLEtBQUssQ0FBQyxHQUFHLE1BQU1DLEtBQUtDLEdBQUcsR0FBR2xCLFFBQVEsQ0FBQztBQUN2RTtB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QVU7d0VBQ1Z0RyxPQUFNO2tGQUNQOzs7Ozs7Ozs7Ozs7MkRBYkV1QyxLQUFLM0MsRUFBRTs7Ozs7b0RBbUJoQjtrRUFDQSw4REFBQ3lHO3dEQUNDQyxXQUFVO3dEQUNWQyxZQUFZLENBQUNDLElBQU1BLEVBQUVuRSxjQUFjO3dEQUNuQ29FLFFBQVEsQ0FBQ0Q7NERBQ1AsTUFBTTlHLFNBQVM4RyxFQUFFRSxZQUFZLENBQUNDLE9BQU8sQ0FBQzs0REFDdEMsSUFBSSxDQUFDakgsUUFBUTs0REFDYjBELGdCQUFnQlQsSUFBSS9DLEVBQUUsRUFBRUY7d0RBQzFCO2tFQUNEOzs7Ozs7Ozs7Ozs7MERBSUgsOERBQUMyRztnREFBSUMsV0FBVTs7b0RBQWlDO29EQUN2QztvREFDTjNELElBQUk1QyxLQUFLLENBQUMzRixNQUFNLEtBQUssSUFDbEIsUUFDQXVJLElBQUk1QyxLQUFLLENBQUNzQixHQUFHLENBQUMsQ0FBQ29DLElBQU12SyxXQUFXdUssRUFBRWpCLElBQUksR0FBR3FILElBQUksQ0FBQzs7Ozs7Ozs7dUNBekYvQ2xILElBQUkvQyxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7O2tDQWdHbkIsOERBQUN5Rzt3QkFBSUMsV0FBVTtrQ0FDYiw0RUFBQ3JOLGdFQUFXQTs0QkFDVjhCLFVBQVVBLFlBQVl5Szs0QkFDdEJzRSxjQUFjLENBQUNDLElBQU14TyxlQUFld087NEJBQ3BDQyxjQUFjL0s7NEJBQ2RsQyxVQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNdEI7R0E1aENnQmxDO0tBQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNhbHZpXFxEZXNrdG9wXFxQZXJmVG9vbFxcc3JjXFxjb21wb25lbnRzXFxNYXJraW5nUGFuZWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE11c2ljUGxheWVyIH0gZnJvbSBcIkAvY29tcG9uZW50cy9NdXNpY1BsYXllclwiO1xuXG5pbnRlcmZhY2UgUGFydEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHRpbWVwb2ludF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbiAgdGltZXBvaW50X2VuZF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIFN1YnBhcnRJdGVtIHtcbiAgaWQ6IHN0cmluZztcbiAgcGFydF9pZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICB0aW1lcG9pbnRfc2Vjb25kcz86IG51bWJlciB8IG51bGw7XG4gIHRpbWVwb2ludF9lbmRfc2Vjb25kcz86IG51bWJlciB8IG51bGw7XG59XG5cbmludGVyZmFjZSBNYXJrIHtcbiAgaWQ6IHN0cmluZztcbiAgdGltZTogbnVtYmVyO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE1hcmtSb3cge1xuICBpZDogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xuICBub3RlPzogc3RyaW5nO1xuICBtYXJrczogTWFya1tdO1xufVxuXG50eXBlIEFzc2lnbm1lbnRWYWx1ZSA9XG4gIHwgc3RyaW5nXG4gIHwge1xuICAgICAgbWFya0lkPzogc3RyaW5nO1xuICAgICAgdGltZTogbnVtYmVyO1xuICAgIH07XG5cbmludGVyZmFjZSBNYXJraW5nUGFuZWxQcm9wcyB7XG4gIHBlcmZvcm1hbmNlSWQ6IHN0cmluZztcbiAgcGFydHM6IFBhcnRJdGVtW107XG4gIG11c2ljVXJsPzogc3RyaW5nIHwgbnVsbDtcbiAgcGVyZm9ybWFuY2VUaXRsZT86IHN0cmluZztcbiAgb25QYXJ0c1VwZGF0ZWQ6IChwYXJ0czogUGFydEl0ZW1bXSkgPT4gdm9pZDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZShzZWNvbmRzOiBudW1iZXIpIHtcbiAgY29uc3QgdG90YWwgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHNlY29uZHMpKTtcbiAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IodG90YWwgLyA2MCk7XG4gIGNvbnN0IHNlY3MgPSB0b3RhbCAlIDYwO1xuICByZXR1cm4gYCR7bWluc306JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWA7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZVN0cmluZyh2YWx1ZTogc3RyaW5nKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpO1xuICBpZiAoIXRyaW1tZWQpIHJldHVybiBudWxsO1xuICBpZiAoL15cXGQrKFxcLlxcZCspPyQvLnRlc3QodHJpbW1lZCkpIHJldHVybiBNYXRoLm1heCgwLCBwYXJzZUZsb2F0KHRyaW1tZWQpKTtcbiAgY29uc3QgcGFydHMgPSB0cmltbWVkLnNwbGl0KFwiOlwiKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGNvbnN0IG1pbnMgPSBwYXJzZUludChwYXJ0c1swXSwgMTApO1xuICAgIGNvbnN0IHNlY3MgPSBwYXJzZUZsb2F0KHBhcnRzWzFdKTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKG1pbnMpIHx8IE51bWJlci5pc05hTihzZWNzKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIG1pbnMgKiA2MCArIHNlY3MpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB1dWlkKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgMTApICsgRGF0ZS5ub3coKS50b1N0cmluZygzNik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBNYXJraW5nUGFuZWwoeyBwZXJmb3JtYW5jZUlkLCBwYXJ0cywgbXVzaWNVcmwsIHBlcmZvcm1hbmNlVGl0bGUsIG9uUGFydHNVcGRhdGVkIH06IE1hcmtpbmdQYW5lbFByb3BzKSB7XG4gIGNvbnN0IFtyb3dzLCBzZXRSb3dzXSA9IHVzZVN0YXRlPE1hcmtSb3dbXT4oW10pO1xuICBjb25zdCBbYWN0aXZlUm93SWQsIHNldEFjdGl2ZVJvd0lkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbYXNzaWdubWVudHMsIHNldEFzc2lnbm1lbnRzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIEFzc2lnbm1lbnRWYWx1ZT4+KHt9KTtcbiAgY29uc3QgW3N1YnBhcnRzQnlQYXJ0LCBzZXRTdWJwYXJ0c0J5UGFydF0gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBTdWJwYXJ0SXRlbVtdPj4oe30pO1xuICBjb25zdCBbbmV3U3VicGFydFRpdGxlLCBzZXROZXdTdWJwYXJ0VGl0bGVdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oe30pO1xuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2Vzc2lvblRpdGxlLCBzZXRTZXNzaW9uVGl0bGVdID0gdXNlU3RhdGUoXCJOZXcgTWFya2luZyBTZXNzaW9uXCIpO1xuICBjb25zdCBbY3VzdG9tVGl0bGUsIHNldEN1c3RvbVRpdGxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nlc3Npb25MaXN0LCBzZXRTZXNzaW9uTGlzdF0gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWRTZXNzaW9uSWQsIHNldFNlbGVjdGVkU2Vzc2lvbklkXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFthbGxTZXNzaW9ucywgc2V0QWxsU2Vzc2lvbnNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGVyZm9ybWFuY2VOYW1lTWFwLCBzZXRQZXJmb3JtYW5jZU5hbWVNYXBdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oe30pO1xuICBjb25zdCBbbXVzaWNEdXJhdGlvbiwgc2V0TXVzaWNEdXJhdGlvbl0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9DbGVhbnVwUmVmID0gdXNlUmVmPCgoKSA9PiB2b2lkKSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBhdWRpb1JlZiA9IHVzZVJlZjxIVE1MQXVkaW9FbGVtZW50PihudWxsKTtcbiAgY29uc3QgdGltZWxpbmVSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbbWFudWFsVGltZWxpbmVMZW5ndGgsIHNldE1hbnVhbFRpbWVsaW5lTGVuZ3RoXSA9IHVzZVN0YXRlPG51bWJlcj4oMTgwKTtcbiAgY29uc3QgW3BhcnRUaW1lbGluZU92ZXJyaWRlcywgc2V0UGFydFRpbWVsaW5lT3ZlcnJpZGVzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIHsgc3RhcnQ6IG51bWJlciB8IG51bGw7IGVuZDogbnVtYmVyIHwgbnVsbCB9Pj4oe30pO1xuICBjb25zdCBbc3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzLCBzZXRTdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgeyBzdGFydDogbnVtYmVyIHwgbnVsbDsgZW5kOiBudW1iZXIgfCBudWxsIH0+Pih7fSk7XG4gIGNvbnN0IFtkcmFnZ2luZ1BhcnRJZCwgc2V0RHJhZ2dpbmdQYXJ0SWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGRyYWdTdGF0ZVJlZiA9IHVzZVJlZjx7IHBhcnRJZDogc3RyaW5nOyBkdXJhdGlvbjogbnVtYmVyOyBvZmZzZXRTZWM6IG51bWJlciB9IHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQ/LigpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZHJhZ2dpbmdQYXJ0SWQpIHJldHVybjtcbiAgICBjb25zdCBoYW5kbGVNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXRpbWVsaW5lUmVmLmN1cnJlbnQgfHwgIWRyYWdTdGF0ZVJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBjb25zdCByZWN0ID0gdGltZWxpbmVSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHJhdGlvID0gKGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpIC8gcmVjdC53aWR0aDtcbiAgICAgIGNvbnN0IHJhdyA9IHJhdGlvICogdGltZWxpbmVMZW5ndGggLSBkcmFnU3RhdGVSZWYuY3VycmVudC5vZmZzZXRTZWM7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IGRyYWdTdGF0ZVJlZi5jdXJyZW50LmR1cmF0aW9uO1xuICAgICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aW1lbGluZUxlbmd0aCAtIGR1cmF0aW9uLCByYXcpKTtcbiAgICAgIGNvbnN0IHNuYXBwZWQgPSBNYXRoLnJvdW5kKHN0YXJ0KTtcbiAgICAgIHNldFBhcnRTdGFydEVuZChkcmFnU3RhdGVSZWYuY3VycmVudC5wYXJ0SWQsIHNuYXBwZWQsIHNuYXBwZWQgKyBkdXJhdGlvbik7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVVcCA9ICgpID0+IHtcbiAgICAgIHNldERyYWdnaW5nUGFydElkKG51bGwpO1xuICAgICAgZHJhZ1N0YXRlUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW92ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZVVwKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW92ZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgaGFuZGxlVXApO1xuICAgIH07XG4gIH0sIFtkcmFnZ2luZ1BhcnRJZCwgdGltZWxpbmVMZW5ndGhdKTtcblxuICBjb25zdCBoYW5kbGVBdWRpb1JlYWR5ID0gKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCkgPT4ge1xuICAgIGlmIChhdWRpb0NsZWFudXBSZWYuY3VycmVudCkgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQoKTtcbiAgICBpZiAoIWF1ZGlvKSB7XG4gICAgICBzZXRNdXNpY0R1cmF0aW9uKG51bGwpO1xuICAgICAgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IE51bWJlci5pc0Zpbml0ZShhdWRpby5kdXJhdGlvbikgPyBhdWRpby5kdXJhdGlvbiA6IG51bGw7XG4gICAgICBzZXRNdXNpY0R1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICB9O1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCB1cGRhdGUpO1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJkdXJhdGlvbmNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIHVwZGF0ZSgpO1xuICAgIGF1ZGlvQ2xlYW51cFJlZi5jdXJyZW50ID0gKCkgPT4ge1xuICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsIHVwZGF0ZSk7XG4gICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHVyYXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGFzc2lnbmVkTWFya0NvdW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIE9iamVjdC52YWx1ZXMoYXNzaWdubWVudHMpLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvdW50c1t2YWx1ZV0gPSAoY291bnRzW3ZhbHVlXSB8fCAwKSArIDE7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlPy5tYXJrSWQpIHtcbiAgICAgICAgY291bnRzW3ZhbHVlLm1hcmtJZF0gPSAoY291bnRzW3ZhbHVlLm1hcmtJZF0gfHwgMCkgKyAxO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHM7XG4gIH0sIFthc3NpZ25tZW50c10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBmaXJzdFJvdyA9IHsgaWQ6IHV1aWQoKSwgbGFiZWw6IFwiUm93IDFcIiwgbm90ZTogXCJcIiwgbWFya3M6IFtdIH07XG4gICAgICBzZXRSb3dzKFtmaXJzdFJvd10pO1xuICAgICAgc2V0QWN0aXZlUm93SWQoZmlyc3RSb3cuaWQpO1xuICAgIH1cbiAgfSwgW3Jvd3MubGVuZ3RoXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY3VzdG9tVGl0bGUpIHJldHVybjtcbiAgICBjb25zdCB0aXRsZSA9IGAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX0gwrcgJHtwZXJmb3JtYW5jZVRpdGxlIHx8IFwiUGVyZm9ybWFuY2VcIn1gO1xuICAgIHNldFNlc3Npb25UaXRsZSh0aXRsZSk7XG4gIH0sIFtwZXJmb3JtYW5jZVRpdGxlLCBjdXN0b21UaXRsZV0pO1xuICBjb25zdCB0aW1lbGluZUxlbmd0aCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHRpbWVzOiBudW1iZXJbXSA9IFtdO1xuICAgIHBhcnRzLmZvckVhY2goKHBhcnQpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJyaWRlID0gcGFydFRpbWVsaW5lT3ZlcnJpZGVzW3BhcnQuaWRdO1xuICAgICAgY29uc3Qgc3RhcnQgPSBvdmVycmlkZT8uc3RhcnQgPz8gcGFydC50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBwYXJ0LnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsKSB0aW1lcy5wdXNoKHN0YXJ0KTtcbiAgICAgIGlmIChlbmQgIT09IG51bGwpIHRpbWVzLnB1c2goZW5kKTtcbiAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBlbmQgPT09IG51bGwpIHRpbWVzLnB1c2goc3RhcnQgKyAxMCk7XG4gICAgfSk7XG4gICAgT2JqZWN0LnZhbHVlcyhzdWJwYXJ0c0J5UGFydCkuZmxhdCgpLmZvckVhY2goKHN1YikgPT4ge1xuICAgICAgY29uc3Qgb3ZlcnJpZGUgPSBzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNbc3ViLmlkXTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gb3ZlcnJpZGU/LnN0YXJ0ID8/IHN1Yi50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBzdWIudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgICBpZiAoc3RhcnQgIT09IG51bGwpIHRpbWVzLnB1c2goc3RhcnQpO1xuICAgICAgaWYgKGVuZCAhPT0gbnVsbCkgdGltZXMucHVzaChlbmQpO1xuICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsICYmIGVuZCA9PT0gbnVsbCkgdGltZXMucHVzaChzdGFydCArIDEwKTtcbiAgICB9KTtcbiAgICBjb25zdCBtYXhUaW1lID0gdGltZXMubGVuZ3RoID8gTWF0aC5tYXgoLi4udGltZXMpIDogMDtcbiAgICBpZiAobXVzaWNEdXJhdGlvbiAmJiBOdW1iZXIuaXNGaW5pdGUobXVzaWNEdXJhdGlvbikpIHJldHVybiBNYXRoLm1heChtdXNpY0R1cmF0aW9uLCBtYXhUaW1lLCAxMCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KG1hbnVhbFRpbWVsaW5lTGVuZ3RoLCBtYXhUaW1lLCAxMCk7XG4gIH0sIFttdXNpY0R1cmF0aW9uLCBtYW51YWxUaW1lbGluZUxlbmd0aCwgcGFydHMsIHN1YnBhcnRzQnlQYXJ0LCBwYXJ0VGltZWxpbmVPdmVycmlkZXMsIHN1YnBhcnRUaW1lbGluZU92ZXJyaWRlc10pO1xuXG4gIGNvbnN0IGdldFBhcnRTdGFydEVuZCA9IChwYXJ0OiBQYXJ0SXRlbSkgPT4ge1xuICAgIGNvbnN0IG92ZXJyaWRlID0gcGFydFRpbWVsaW5lT3ZlcnJpZGVzW3BhcnQuaWRdO1xuICAgIGNvbnN0IHN0YXJ0ID0gb3ZlcnJpZGU/LnN0YXJ0ID8/IHBhcnQudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbDtcbiAgICBjb25zdCBlbmQgPSBvdmVycmlkZT8uZW5kID8/IHBhcnQudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgcmV0dXJuIHsgc3RhcnQsIGVuZCB9O1xuICB9O1xuXG4gIGNvbnN0IHNldFBhcnRTdGFydEVuZCA9IChwYXJ0SWQ6IHN0cmluZywgc3RhcnQ6IG51bWJlciB8IG51bGwsIGVuZDogbnVtYmVyIHwgbnVsbCkgPT4ge1xuICAgIHNldFBhcnRUaW1lbGluZU92ZXJyaWRlcygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbcGFydElkXTogeyBzdGFydCwgZW5kIH0sXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IHNldFN1YnBhcnRTdGFydEVuZCA9IChzdWJwYXJ0SWQ6IHN0cmluZywgc3RhcnQ6IG51bWJlciB8IG51bGwsIGVuZDogbnVtYmVyIHwgbnVsbCkgPT4ge1xuICAgIHNldFN1YnBhcnRUaW1lbGluZU92ZXJyaWRlcygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbc3VicGFydElkXTogeyBzdGFydCwgZW5kIH0sXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGdldFN1YnBhcnRTdGFydEVuZCA9IChzdWI6IFN1YnBhcnRJdGVtKSA9PiB7XG4gICAgY29uc3Qgb3ZlcnJpZGUgPSBzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNbc3ViLmlkXTtcbiAgICBjb25zdCBzdGFydCA9IG92ZXJyaWRlPy5zdGFydCA/PyBzdWIudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbDtcbiAgICBjb25zdCBlbmQgPSBvdmVycmlkZT8uZW5kID8/IHN1Yi50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgICByZXR1cm4geyBzdGFydCwgZW5kIH07XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXBlcmZvcm1hbmNlSWQpIHJldHVybjtcbiAgICBjb25zdCBmZXRjaFN1YnBhcnRzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBwYXJ0cy5tYXAoYXN5bmMgKHBhcnQpID0+IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9zdWJwYXJ0cz9wYXJ0SWQ9JHtwYXJ0LmlkfWApO1xuICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm4gW3BhcnQuaWQsIFtdXSBhcyBjb25zdDtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICByZXR1cm4gW3BhcnQuaWQsIGRhdGEgfHwgW11dIGFzIGNvbnN0O1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgU3VicGFydEl0ZW1bXT4gPSB7fTtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoW3BhcnRJZCwgbGlzdF0pID0+IHtcbiAgICAgICAgbWFwW3BhcnRJZF0gPSBsaXN0O1xuICAgICAgfSk7XG4gICAgICBzZXRTdWJwYXJ0c0J5UGFydChtYXApO1xuICAgIH07XG4gICAgZmV0Y2hTdWJwYXJ0cygpO1xuICB9LCBbcGVyZm9ybWFuY2VJZCwgcGFydHNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcGVyZm9ybWFuY2VJZCkgcmV0dXJuO1xuICAgIGNvbnN0IGZldGNoU2Vzc2lvbnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYWxsU2Vzc2lvbnMgPyBcIi9hcGkvbWFya2luZy1zZXNzaW9ucz9hbGw9MVwiIDogYC9hcGkvbWFya2luZy1zZXNzaW9ucz9wZXJmb3JtYW5jZUlkPSR7cGVyZm9ybWFuY2VJZH1gXG4gICAgICApO1xuICAgICAgaWYgKCFyZXMub2spIHJldHVybjtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgc2V0U2Vzc2lvbkxpc3QoZGF0YSB8fCBbXSk7XG4gICAgfTtcbiAgICBmZXRjaFNlc3Npb25zKCk7XG4gIH0sIFtwZXJmb3JtYW5jZUlkLCBhbGxTZXNzaW9uc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZmV0Y2hQZXJmb3JtYW5jZU5hbWVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL3BlcmZvcm1hbmNlc1wiKTtcbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgKGRhdGEgfHwgW10pLmZvckVhY2goKHBlcmY6IGFueSkgPT4ge1xuICAgICAgICBtYXBbcGVyZi5pZF0gPSBwZXJmLnRpdGxlIHx8IFwiUGVyZm9ybWFuY2VcIjtcbiAgICAgIH0pO1xuICAgICAgc2V0UGVyZm9ybWFuY2VOYW1lTWFwKG1hcCk7XG4gICAgfTtcbiAgICBmZXRjaFBlcmZvcm1hbmNlTmFtZXMoKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgdGFnID0gdGFyZ2V0Py50YWdOYW1lPy50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHRhZyA9PT0gXCJpbnB1dFwiIHx8IHRhZyA9PT0gXCJ0ZXh0YXJlYVwiIHx8IHRhZyA9PT0gXCJzZWxlY3RcIikgcmV0dXJuO1xuXG4gICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJTcGFjZVwiKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHJvd0lkID0gYWN0aXZlUm93SWQgfHwgcm93c1swXT8uaWQ7XG4gICAgICAgIGlmICghcm93SWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbWFyazogTWFyayA9IHtcbiAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgIHRpbWU6IGN1cnJlbnRUaW1lLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9O1xuICAgICAgICBzZXRSb3dzKChwcmV2KSA9PlxuICAgICAgICAgIHByZXYubWFwKChyb3cpID0+XG4gICAgICAgICAgICByb3cuaWQgPT09IHJvd0lkID8geyAuLi5yb3csIG1hcmtzOiBbLi4ucm93Lm1hcmtzLCBtYXJrXSB9IDogcm93XG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcImVcIiB8fCBldmVudC5rZXkgPT09IFwiRVwiKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHJvd3MubGVuZ3RoICsgMTtcbiAgICAgICAgY29uc3QgbmV3Um93OiBNYXJrUm93ID0ge1xuICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgbGFiZWw6IGBSb3cgJHtuZXh0SW5kZXh9YCxcbiAgICAgICAgICBub3RlOiBcIlwiLFxuICAgICAgICAgIG1hcmtzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0Um93cygocHJldikgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkeCA9IGFjdGl2ZVJvd0lkID8gcHJldi5maW5kSW5kZXgoKHIpID0+IHIuaWQgPT09IGFjdGl2ZVJvd0lkKSA6IHByZXYubGVuZ3RoIC0gMTtcbiAgICAgICAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIFsuLi5wcmV2LCBuZXdSb3ddO1xuICAgICAgICAgIGNvbnN0IG5leHQgPSBbLi4ucHJldl07XG4gICAgICAgICAgbmV4dC5zcGxpY2UoaWR4ICsgMSwgMCwgbmV3Um93KTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEFjdGl2ZVJvd0lkKG5ld1Jvdy5pZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleURvd24pO1xuICB9LCBbYWN0aXZlUm93SWQsIGN1cnJlbnRUaW1lLCByb3dzXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJvcFRvUm93ID0gKHJvd0lkOiBzdHJpbmcsIG1hcmtJZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0Um93cygocHJldikgPT4ge1xuICAgICAgbGV0IG1vdmVkOiBNYXJrIHwgbnVsbCA9IG51bGw7XG4gICAgICBjb25zdCByZW1vdmVkID0gcHJldi5tYXAoKHJvdykgPT4ge1xuICAgICAgICBjb25zdCBuZXh0TWFya3MgPSByb3cubWFya3MuZmlsdGVyKChtKSA9PiB7XG4gICAgICAgICAgaWYgKG0uaWQgPT09IG1hcmtJZCkge1xuICAgICAgICAgICAgbW92ZWQgPSBtO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IC4uLnJvdywgbWFya3M6IG5leHRNYXJrcyB9O1xuICAgICAgfSk7XG4gICAgICBpZiAoIW1vdmVkKSByZXR1cm4gcHJldjtcbiAgICAgIHJldHVybiByZW1vdmVkLm1hcCgocm93KSA9PlxuICAgICAgICByb3cuaWQgPT09IHJvd0lkID8geyAuLi5yb3csIG1hcmtzOiBbLi4ucm93Lm1hcmtzLCBtb3ZlZCFdIH0gOiByb3dcbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVtb3ZlTWFyayA9IChyb3dJZDogc3RyaW5nLCBtYXJrSWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFJvd3MoKHByZXYpID0+XG4gICAgICBwcmV2Lm1hcCgocm93KSA9PlxuICAgICAgICByb3cuaWQgPT09IHJvd0lkID8geyAuLi5yb3csIG1hcmtzOiByb3cubWFya3MuZmlsdGVyKChtKSA9PiBtLmlkICE9PSBtYXJrSWQpIH0gOiByb3dcbiAgICAgIClcbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IGdldE1hcmtUaW1lQnlJZCA9IChtYXJrSWQ6IHN0cmluZykgPT4ge1xuICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgIGNvbnN0IG1hcmsgPSByb3cubWFya3MuZmluZCgobSkgPT4gbS5pZCA9PT0gbWFya0lkKTtcbiAgICAgIGlmIChtYXJrKSByZXR1cm4gbWFyay50aW1lO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBjb25zdCB0aW1lbGluZURlZmF1bHREdXJhdGlvbiA9IDEwO1xuXG4gIGNvbnN0IHRpbWVsaW5lRGF0YSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGFzc2lnbmVkOiBBcnJheTx7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgc3RhcnQ6IG51bWJlcjtcbiAgICAgIGVuZDogbnVtYmVyO1xuICAgICAgbWlzc2luZ0VuZDogYm9vbGVhbjtcbiAgICB9PiA9IFtdO1xuICAgIGNvbnN0IHVuYXNzaWduZWQ6IFBhcnRJdGVtW10gPSBbXTtcblxuICAgIHBhcnRzLmZvckVhY2goKHBhcnQpID0+IHtcbiAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gZ2V0UGFydFN0YXJ0RW5kKHBhcnQpO1xuICAgICAgaWYgKHN0YXJ0ID09PSBudWxsKSB7XG4gICAgICAgIHVuYXNzaWduZWQucHVzaChwYXJ0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZWRFbmQgPSBlbmQgPz8gc3RhcnQgKyB0aW1lbGluZURlZmF1bHREdXJhdGlvbjtcbiAgICAgIGFzc2lnbmVkLnB1c2goe1xuICAgICAgICBpZDogcGFydC5pZCxcbiAgICAgICAgbmFtZTogcGFydC5uYW1lLFxuICAgICAgICBzdGFydCxcbiAgICAgICAgZW5kOiByZXNvbHZlZEVuZCxcbiAgICAgICAgbWlzc2luZ0VuZDogZW5kID09PSBudWxsLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhc3NpZ25lZC5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7XG5cbiAgICBjb25zdCByb3dzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGl0ZW1zOiB0eXBlb2YgYXNzaWduZWQgfT4gPSBbXTtcbiAgICBhc3NpZ25lZC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBsZXQgcGxhY2VkID0gZmFsc2U7XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSByb3cuaXRlbXNbcm93Lml0ZW1zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoIWxhc3QgfHwgaXRlbS5zdGFydCA+PSBsYXN0LmVuZCkge1xuICAgICAgICAgIHJvdy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgIHBsYWNlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghcGxhY2VkKSB7XG4gICAgICAgIHJvd3MucHVzaCh7IGlkOiB1dWlkKCksIGl0ZW1zOiBbaXRlbV0gfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4geyByb3dzLCB1bmFzc2lnbmVkIH07XG4gIH0sIFtwYXJ0cywgcGFydFRpbWVsaW5lT3ZlcnJpZGVzXSk7XG5cbiAgY29uc3Qgbm9ybWFsaXplQXNzaWdubWVudHMgPSAocm93c1NuYXBzaG90OiBNYXJrUm93W10sIHJhdzogUmVjb3JkPHN0cmluZywgQXNzaWdubWVudFZhbHVlPikgPT4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQ6IFJlY29yZDxzdHJpbmcsIEFzc2lnbm1lbnRWYWx1ZT4gPSB7fTtcbiAgICBPYmplY3QuZW50cmllcyhyYXcgfHwge30pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBtYXJrID0gcm93c1NuYXBzaG90LmZsYXRNYXAoKHIpID0+IHIubWFya3MpLmZpbmQoKG0pID0+IG0uaWQgPT09IHZhbHVlKTtcbiAgICAgICAgaWYgKG1hcmspIHtcbiAgICAgICAgICBub3JtYWxpemVkW2tleV0gPSB7IG1hcmtJZDogdmFsdWUsIHRpbWU6IG1hcmsudGltZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBub3JtYWxpemVkW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgfTtcblxuICBjb25zdCBnZXRBc3NpZ25lZFRpbWUgPSAodGFyZ2V0S2V5OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IGFzc2lnbm1lbnRzW3RhcmdldEtleV07XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBtYXJrID0gcm93Lm1hcmtzLmZpbmQoKG0pID0+IG0uaWQgPT09IHZhbHVlKTtcbiAgICAgICAgaWYgKG1hcmspIHJldHVybiBtYXJrLnRpbWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlLnRpbWUgPz8gbnVsbDtcbiAgfTtcblxuICBjb25zdCBnZXRFeGlzdGluZ1RpbWUgPSAodHlwZTogXCJwYXJ0XCIgfCBcInN1YnBhcnRcIiwgaWQ6IHN0cmluZywgZmllbGQ6IFwic3RhcnRcIiB8IFwiZW5kXCIpID0+IHtcbiAgICBpZiAodHlwZSA9PT0gXCJwYXJ0XCIpIHtcbiAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0cy5maW5kKChwKSA9PiBwLmlkID09PSBpZCk7XG4gICAgICBpZiAoIXBhcnQpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIGZpZWxkID09PSBcInN0YXJ0XCIgPyBwYXJ0LnRpbWVwb2ludF9zZWNvbmRzID8/IG51bGwgOiBwYXJ0LnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICAgIH1cbiAgICBjb25zdCBzdWIgPSBPYmplY3QudmFsdWVzKHN1YnBhcnRzQnlQYXJ0KS5mbGF0KCkuZmluZCgocykgPT4gcy5pZCA9PT0gaWQpO1xuICAgIGlmICghc3ViKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gZmllbGQgPT09IFwic3RhcnRcIiA/IHN1Yi50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsIDogc3ViLnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICB9O1xuXG4gIGNvbnN0IGFzc2lnbk1hcmtUb1RhcmdldCA9ICh0YXJnZXRLZXk6IHN0cmluZywgbWFya0lkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBbdHlwZSwgaWQsIGZpZWxkXSA9IHRhcmdldEtleS5zcGxpdChcIjpcIikgYXMgW1wicGFydFwiIHwgXCJzdWJwYXJ0XCIsIHN0cmluZywgXCJzdGFydFwiIHwgXCJlbmRcIl07XG4gICAgY29uc3QgbWFya1RpbWUgPSByb3dzLmZsYXRNYXAoKHIpID0+IHIubWFya3MpLmZpbmQoKG0pID0+IG0uaWQgPT09IG1hcmtJZCk/LnRpbWU7XG4gICAgaWYgKG1hcmtUaW1lID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG9wcG9zaXRlRmllbGQ6IFwic3RhcnRcIiB8IFwiZW5kXCIgPSBmaWVsZCA9PT0gXCJzdGFydFwiID8gXCJlbmRcIiA6IFwic3RhcnRcIjtcbiAgICBjb25zdCBhc3NpZ25lZE9wcG9zaXRlID0gZ2V0QXNzaWduZWRUaW1lKGAke3R5cGV9OiR7aWR9OiR7b3Bwb3NpdGVGaWVsZH1gKTtcbiAgICBjb25zdCBleGlzdGluZ09wcG9zaXRlID0gZ2V0RXhpc3RpbmdUaW1lKHR5cGUsIGlkLCBvcHBvc2l0ZUZpZWxkKTtcbiAgICBjb25zdCBvcHBvc2l0ZVRpbWUgPSBhc3NpZ25lZE9wcG9zaXRlID8/IGV4aXN0aW5nT3Bwb3NpdGU7XG5cbiAgICBpZiAoZmllbGQgPT09IFwiZW5kXCIgJiYgb3Bwb3NpdGVUaW1lICE9PSBudWxsICYmIG1hcmtUaW1lIDwgb3Bwb3NpdGVUaW1lKSB7XG4gICAgICBhbGVydChcIkVuZCB0aW1lIGNhbm5vdCBiZSBiZWZvcmUgc3RhcnQgdGltZS5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChmaWVsZCA9PT0gXCJzdGFydFwiICYmIG9wcG9zaXRlVGltZSAhPT0gbnVsbCAmJiBtYXJrVGltZSA+IG9wcG9zaXRlVGltZSkge1xuICAgICAgYWxlcnQoXCJTdGFydCB0aW1lIGNhbm5vdCBiZSBhZnRlciBlbmQgdGltZS5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2V0QXNzaWdubWVudHMoKHByZXYpID0+ICh7IC4uLnByZXYsIFt0YXJnZXRLZXldOiB7IG1hcmtJZCwgdGltZTogbWFya1RpbWUgfSB9KSk7XG4gIH07XG5cbiAgY29uc3QgY2xlYXJBc3NpZ25tZW50ID0gKHRhcmdldEtleTogc3RyaW5nKSA9PiB7XG4gICAgc2V0QXNzaWdubWVudHMoKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSB7IC4uLnByZXYgfTtcbiAgICAgIGRlbGV0ZSBuZXh0W3RhcmdldEtleV07XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJUaW1lVGFyZ2V0ID0gKHR5cGU6IFwicGFydFwiIHwgXCJzdWJwYXJ0XCIsIGlkOiBzdHJpbmcsIGZpZWxkOiBcInN0YXJ0XCIgfCBcImVuZFwiKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0S2V5ID0gYCR7dHlwZX06JHtpZH06JHtmaWVsZH1gO1xuICAgIGNvbnN0IGFzc2lnbmVkVmFsdWUgPSBhc3NpZ25tZW50c1t0YXJnZXRLZXldO1xuICAgIGNvbnN0IGFzc2lnbmVkTWFya0lkID0gdHlwZW9mIGFzc2lnbmVkVmFsdWUgPT09IFwic3RyaW5nXCIgPyBhc3NpZ25lZFZhbHVlIDogYXNzaWduZWRWYWx1ZT8ubWFya0lkO1xuICAgIGNvbnN0IGFzc2lnbmVkVGltZSA9IGdldEFzc2lnbmVkVGltZSh0YXJnZXRLZXkpO1xuICAgIGNvbnN0IGV4aXN0aW5nVGltZSA9IGdldEV4aXN0aW5nVGltZSh0eXBlLCBpZCwgZmllbGQpO1xuICAgIGNvbnN0IHNob3dUaW1lID0gYXNzaWduZWRUaW1lICE9PSBudWxsID8gYXNzaWduZWRUaW1lIDogZXhpc3RpbmdUaW1lO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtgYm9yZGVyIGJvcmRlci1kYXNoZWQgcm91bmRlZCBweC0yIHB5LTEgdGV4dC14cyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiAke1xuICAgICAgICAgIGFzc2lnbmVkTWFya0lkID8gXCJib3JkZXItZW1lcmFsZC00MDAgYmctZW1lcmFsZC01MFwiIDogXCJib3JkZXItZ3JheS0zMDAgYmctd2hpdGVcIlxuICAgICAgICB9YH1cbiAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgb25Ecm9wPXsoZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1hcmtJZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJtYXJrSWRcIik7XG4gICAgICAgICAgaWYgKCFtYXJrSWQpIHJldHVybjtcbiAgICAgICAgICBhc3NpZ25NYXJrVG9UYXJnZXQodGFyZ2V0S2V5LCBtYXJrSWQpO1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZVwiPntmaWVsZH08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMFwiPlxuICAgICAgICAgIHtzaG93VGltZSAhPT0gbnVsbCA/IGZvcm1hdFRpbWUoc2hvd1RpbWUpIDogXCItLTotLVwifVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIHthc3NpZ25lZE1hcmtJZCAmJiAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMSBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgdGV4dC1bMTBweF0gYmctZW1lcmFsZC02MDAgdGV4dC13aGl0ZVwiPlxuICAgICAgICAgICAgQ2hpcFxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKX1cbiAgICAgICAge2Fzc2lnbmVkTWFya0lkICYmIChcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBjbGVhckFzc2lnbm1lbnQodGFyZ2V0S2V5KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLWF1dG8gdGV4dC1yZWQtNjAwIGhvdmVyOnRleHQtcmVkLTgwMFwiXG4gICAgICAgICAgICB0aXRsZT1cIlJlbW92ZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgw4PigJRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2F2ZVNlc3Npb24gPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIHBlcmZvcm1hbmNlX2lkOiBwZXJmb3JtYW5jZUlkLFxuICAgICAgdGl0bGU6IHNlc3Npb25UaXRsZSB8fCBcIk1hcmtpbmcgU2Vzc2lvblwiLFxuICAgICAgcm93cyxcbiAgICAgIGFzc2lnbm1lbnRzLFxuICAgIH07XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL21hcmtpbmctc2Vzc2lvbnNcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgIH0pO1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgc2V0U2Vzc2lvbkxpc3QoKHByZXYpID0+IFtjcmVhdGVkLCAuLi5wcmV2XSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFwcGx5ID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXBkYXRlc0J5UGFydDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICAgICAgY29uc3QgdXBkYXRlc0J5U3VicGFydDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgICBPYmplY3QuZW50cmllcyhhc3NpZ25tZW50cykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGNvbnN0IFt0eXBlLCBpZCwgZmllbGRdID0ga2V5LnNwbGl0KFwiOlwiKSBhcyBbXCJwYXJ0XCIgfCBcInN1YnBhcnRcIiwgc3RyaW5nLCBcInN0YXJ0XCIgfCBcImVuZFwiXTtcbiAgICAgICAgY29uc3QgbWFya0lkID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUgOiB2YWx1ZT8ubWFya0lkO1xuICAgICAgICBjb25zdCBtYXJrVGltZSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcm93cy5mbGF0TWFwKChyKSA9PiByLm1hcmtzKS5maW5kKChtKSA9PiBtLmlkID09PSB2YWx1ZSk/LnRpbWVcbiAgICAgICAgICA6IHZhbHVlPy50aW1lO1xuICAgICAgICBpZiAobWFya1RpbWUgPT09IHVuZGVmaW5lZCB8fCBtYXJrVGltZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJwYXJ0XCIpIHtcbiAgICAgICAgICB1cGRhdGVzQnlQYXJ0W2lkXSA9IHVwZGF0ZXNCeVBhcnRbaWRdIHx8IHt9O1xuICAgICAgICAgIHVwZGF0ZXNCeVBhcnRbaWRdW2ZpZWxkID09PSBcInN0YXJ0XCIgPyBcInRpbWVwb2ludF9zZWNvbmRzXCIgOiBcInRpbWVwb2ludF9lbmRfc2Vjb25kc1wiXSA9IG1hcmtUaW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVwZGF0ZXNCeVN1YnBhcnRbaWRdID0gdXBkYXRlc0J5U3VicGFydFtpZF0gfHwge307XG4gICAgICAgICAgdXBkYXRlc0J5U3VicGFydFtpZF1bZmllbGQgPT09IFwic3RhcnRcIiA/IFwidGltZXBvaW50X3NlY29uZHNcIiA6IFwidGltZXBvaW50X2VuZF9zZWNvbmRzXCJdID0gbWFya1RpbWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVkUGFydHM6IFBhcnRJdGVtW10gPSBbXTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTdWJwYXJ0czogU3VicGFydEl0ZW1bXSA9IFtdO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZXNCeVBhcnQpLm1hcChhc3luYyAoW3BhcnRJZCwgcGF5bG9hZF0pID0+IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9wYXJ0cy8ke3BhcnRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIHVwZGF0ZWRQYXJ0cy5wdXNoKHVwZGF0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBPYmplY3QuZW50cmllcyh1cGRhdGVzQnlTdWJwYXJ0KS5tYXAoYXN5bmMgKFtzdWJwYXJ0SWQsIHBheWxvYWRdKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvc3VicGFydHMvJHtzdWJwYXJ0SWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZCkgdXBkYXRlZFN1YnBhcnRzLnB1c2godXBkYXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgaWYgKHVwZGF0ZWRQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9uUGFydHNVcGRhdGVkKFxuICAgICAgICAgIHBhcnRzLm1hcCgocGFydCkgPT4gdXBkYXRlZFBhcnRzLmZpbmQoKHUpID0+IHUuaWQgPT09IHBhcnQuaWQpIHx8IHBhcnQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlZFN1YnBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2V0U3VicGFydHNCeVBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0geyAuLi5wcmV2IH07XG4gICAgICAgICAgdXBkYXRlZFN1YnBhcnRzLmZvckVhY2goKHN1YikgPT4ge1xuICAgICAgICAgICAgbmV4dFtzdWIucGFydF9pZF0gPSAobmV4dFtzdWIucGFydF9pZF0gfHwgW10pLm1hcCgocykgPT5cbiAgICAgICAgICAgICAgcy5pZCA9PT0gc3ViLmlkID8geyAuLi5zLCAuLi5zdWIgfSA6IHNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlU2F2ZVRpbWVsaW5lID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXBkYXRlc0J5UGFydDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICAgICAgY29uc3QgdXBkYXRlc0J5U3VicGFydDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgICBwYXJ0cy5mb3JFYWNoKChwYXJ0KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gZ2V0UGFydFN0YXJ0RW5kKHBhcnQpO1xuICAgICAgICBpZiAoc3RhcnQgIT09IG51bGwpIHtcbiAgICAgICAgICB1cGRhdGVzQnlQYXJ0W3BhcnQuaWRdID0ge1xuICAgICAgICAgICAgdGltZXBvaW50X3NlY29uZHM6IHN0YXJ0LFxuICAgICAgICAgICAgdGltZXBvaW50X2VuZF9zZWNvbmRzOiBlbmQgPz8gbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgT2JqZWN0LnZhbHVlcyhzdWJwYXJ0c0J5UGFydCkuZmxhdCgpLmZvckVhY2goKHN1YikgPT4ge1xuICAgICAgICBjb25zdCBvdmVycmlkZSA9IHN1YnBhcnRUaW1lbGluZU92ZXJyaWRlc1tzdWIuaWRdO1xuICAgICAgICBjb25zdCBzdGFydCA9IG92ZXJyaWRlPy5zdGFydCA/PyBzdWIudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbDtcbiAgICAgICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBzdWIudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgICAgIGlmIChzdGFydCAhPT0gbnVsbCkge1xuICAgICAgICAgIHVwZGF0ZXNCeVN1YnBhcnRbc3ViLmlkXSA9IHtcbiAgICAgICAgICAgIHRpbWVwb2ludF9zZWNvbmRzOiBzdGFydCxcbiAgICAgICAgICAgIHRpbWVwb2ludF9lbmRfc2Vjb25kczogZW5kID8/IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRQYXJ0czogUGFydEl0ZW1bXSA9IFtdO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZXNCeVBhcnQpLm1hcChhc3luYyAoW3BhcnRJZCwgcGF5bG9hZF0pID0+IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9wYXJ0cy8ke3BhcnRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIHVwZGF0ZWRQYXJ0cy5wdXNoKHVwZGF0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBPYmplY3QuZW50cmllcyh1cGRhdGVzQnlTdWJwYXJ0KS5tYXAoYXN5bmMgKFtzdWJwYXJ0SWQsIHBheWxvYWRdKSA9PiB7XG4gICAgICAgICAgYXdhaXQgZmV0Y2goYC9hcGkvc3VicGFydHMvJHtzdWJwYXJ0SWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBpZiAodXBkYXRlZFBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb25QYXJ0c1VwZGF0ZWQoXG4gICAgICAgICAgcGFydHMubWFwKChwYXJ0KSA9PiB1cGRhdGVkUGFydHMuZmluZCgodSkgPT4gdS5pZCA9PT0gcGFydC5pZCkgfHwgcGFydClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSB4bDpncmlkLWNvbHMtWzMyMHB4XzFmcl0gZ2FwLTZcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPlBhcnRzICYgU3VicGFydHM8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWItNFwiPlxuICAgICAgICAgIERyb3AgdGltZSBjaGlwcyBvbnRvIFN0YXJ0L0VuZC4gT25seSBkcm9wcGVkIGNoaXBzIGNoYW5nZSB0aW1lcG9pbnRzIHdoZW4gc2F2ZWQuXG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIHtwYXJ0cy5tYXAoKHBhcnQpID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtwYXJ0LmlkfSBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC0zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj57cGFydC5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTIgbWItMlwiPlxuICAgICAgICAgICAgICAgIHtyZW5kZXJUaW1lVGFyZ2V0KFwicGFydFwiLCBwYXJ0LmlkLCBcInN0YXJ0XCIpfVxuICAgICAgICAgICAgICAgIHtyZW5kZXJUaW1lVGFyZ2V0KFwicGFydFwiLCBwYXJ0LmlkLCBcImVuZFwiKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsoc3VicGFydHNCeVBhcnRbcGFydC5pZF0gfHwgW10pLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgIHsoc3VicGFydHNCeVBhcnRbcGFydC5pZF0gfHwgW10pLm1hcCgoc3ViKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzdWIuaWR9IGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0xMDAgcm91bmRlZCBwLTIgYmctZ3JheS01MFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj57c3ViLnRpdGxlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiBtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyVGltZVRhcmdldChcInN1YnBhcnRcIiwgc3ViLmlkLCBcInN0YXJ0XCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclRpbWVUYXJnZXQoXCJzdWJwYXJ0XCIsIHN1Yi5pZCwgXCJlbmRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld1N1YnBhcnRUaXRsZVtwYXJ0LmlkXSB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PlxuICAgICAgICAgICAgICAgICAgICBzZXROZXdTdWJwYXJ0VGl0bGUoKHByZXYpID0+ICh7IC4uLnByZXYsIFtwYXJ0LmlkXTogZS50YXJnZXQudmFsdWUgfSkpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFkZCBzdWJwYXJ0XCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQteHNcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IChuZXdTdWJwYXJ0VGl0bGVbcGFydC5pZF0gfHwgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpdGxlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9zdWJwYXJ0c1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXJ0X2lkOiBwYXJ0LmlkLCB0aXRsZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRTdWJwYXJ0c0J5UGFydCgocHJldikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgICAgICAgICAgICBbcGFydC5pZF06IFsuLi4ocHJldltwYXJ0LmlkXSB8fCBbXSksIGNyZWF0ZWRdLFxuICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXROZXdTdWJwYXJ0VGl0bGUoKHByZXYpID0+ICh7IC4uLnByZXYsIFtwYXJ0LmlkXTogXCJcIiB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYmctZ3JheS05MDAgdGV4dC13aGl0ZSByb3VuZGVkIHRleHQteHNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEFkZFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwXCI+TWFya2luZyBTZXNzaW9uPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLWF1dG8gZmxleCBnYXAtMiBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdmFsdWU9e3Nlc3Npb25UaXRsZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFNlc3Npb25UaXRsZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBzZXRDdXN0b21UaXRsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZXNzaW9uIHRpdGxlXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNhdmVTZXNzaW9ufVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTYXZlIFNlc3Npb25cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBcHBseX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgdGV4dC1zbSBkaXNhYmxlZDpiZy1ncmF5LTQwMFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7c2F2aW5nID8gXCJTYXZpbmcuLi5cIiA6IFwiQXBwbHkgVGltZXBvaW50c1wifVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTJcIj5cbiAgICAgICAgICAgIEhvdGtleXM6IFNwYWNlID0gbWFyayB0aW1lLCBFID0gbmV3IHJvdy4gV29ya3Mgd2hpbGUgbXVzaWMgaXMgcGxheWluZyBvciBwYXVzZWQuXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxuICAgICAgICAgICAgTXVzaWMgbGVuZ3RoOiB7bXVzaWNEdXJhdGlvbiA/IGZvcm1hdFRpbWUobXVzaWNEdXJhdGlvbikgOiBcIsOvwr/CvVwifVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBiZy1ncmF5LTUwIGJvcmRlciBib3JkZXItZGFzaGVkIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHAtMyB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIFdhdmVmb3JtIHZpZXc6IG5vdCBhdmFpbGFibGUgeWV0LiBXZSBjYW4gYWRkIGEgd2F2ZWZvcm0gcHJldmlldyBpbiBhIGZvbGxvdy11cC5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZFNlc3Npb25JZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFNlc3Npb25JZChpZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL21hcmtpbmctc2Vzc2lvbnMvJHtpZH1gKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIHNldFNlc3Npb25UaXRsZShkYXRhLnRpdGxlIHx8IFwiTWFya2luZyBTZXNzaW9uXCIpO1xuICAgICAgICAgICAgICAgIHNldEN1c3RvbVRpdGxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRSb3dzID0gKGRhdGEucm93cyB8fCBbXSkubWFwKChyb3c6IE1hcmtSb3cpID0+ICh7XG4gICAgICAgICAgICAgICAgICAuLi5yb3csXG4gICAgICAgICAgICAgICAgICBub3RlOiByb3cubm90ZSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBzZXRSb3dzKG5leHRSb3dzKTtcbiAgICAgICAgICAgICAgICBzZXRBc3NpZ25tZW50cyhub3JtYWxpemVBc3NpZ25tZW50cyhuZXh0Um93cywgZGF0YS5hc3NpZ25tZW50cyB8fCB7fSkpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQtc21cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+TG9hZCBzYXZlZCBzZXNzaW9uLi4uPC9vcHRpb24+XG4gICAgICAgICAgICAgIHtzZXNzaW9uTGlzdC5tYXAoKHNlc3MpID0+IChcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17c2Vzcy5pZH0gdmFsdWU9e3Nlc3MuaWR9PlxuICAgICAgICAgICAgICAgICAge3Nlc3MudGl0bGUgfHwgXCJVbnRpdGxlZFwifSDDr8K/wr0ge3BlcmZvcm1hbmNlTmFtZU1hcFtzZXNzLnBlcmZvcm1hbmNlX2lkXSB8fCBcIlBlcmZvcm1hbmNlXCJ9IMOvwr/CvSB7bmV3IERhdGUoc2Vzcy5jcmVhdGVkX2F0KS50b0xvY2FsZVN0cmluZygpfVxuICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2FsbFNlc3Npb25zfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0QWxsU2Vzc2lvbnMoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC00IHctNFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIFNob3cgc2Vzc2lvbnMgZnJvbSBhbGwgcGVyZm9ybWFuY2VzXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3cgPSB7IGlkOiB1dWlkKCksIGxhYmVsOiBcIlJvdyAxXCIsIG5vdGU6IFwiXCIsIG1hcmtzOiBbXSB9O1xuICAgICAgICAgICAgICAgIHNldFJvd3MoW2ZpcnN0Um93XSk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlUm93SWQoZmlyc3RSb3cuaWQpO1xuICAgICAgICAgICAgICAgIHNldEFzc2lnbm1lbnRzKHt9KTtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFNlc3Npb25JZChcIlwiKTtcbiAgICAgICAgICAgICAgICBzZXRDdXN0b21UaXRsZShmYWxzZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIE5ldyBTZXNzaW9uXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBtYi0yXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+VGltZWxpbmU8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtYXV0byBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICB7IW11c2ljRHVyYXRpb24gJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj5UaW1lbGluZSBsZW5ndGggKHNlYyk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgIG1pbj17MTB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXttYW51YWxUaW1lbGluZUxlbmd0aH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRNYW51YWxUaW1lbGluZUxlbmd0aChwYXJzZUludChlLnRhcmdldC52YWx1ZSB8fCBcIjBcIiwgMTApIHx8IDApfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTIwIHB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC14c1wiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2F2ZVRpbWVsaW5lfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzYXZpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIGJnLWluZGlnby02MDAgdGV4dC13aGl0ZSByb3VuZGVkIHRleHQtc20gZGlzYWJsZWQ6YmctZ3JheS00MDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3NhdmluZyA/IFwiU2F2aW5nLi4uXCIgOiBcIlNhdmUgVGltZWxpbmVcIn1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgRHJhZyBwYXJ0cyB0byBtb3ZlIHRoZW0uIERyb3AgY2hpcHMgb3IgdHlwZSB0aW1lcyB0byBzZXQgU3RhcnQvRW5kLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIHt0aW1lbGluZURhdGEucm93cy5tYXAoKHJvdywgcm93SW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e3Jvdy5pZH0gY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTYwMFwiPlJvdyB7cm93SW5kZXggKyAxfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIHJlZj17cm93SW5kZXggPT09IDAgPyB0aW1lbGluZVJlZiA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlIGgtMjQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkIGJnLWdyYXktNTAgb3ZlcmZsb3ctaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9eyhlKSA9PiBlLnByZXZlbnREZWZhdWx0KCl9XG4gICAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRJZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJwYXJ0SWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFydElkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSAoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGltZWxpbmVMZW5ndGggLSB0aW1lbGluZURlZmF1bHREdXJhdGlvbiwgTWF0aC5yb3VuZChyYXRpbyAqIHRpbWVsaW5lTGVuZ3RoKSkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHMuZmluZCgocCkgPT4gcC5pZCA9PT0gcGFydElkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzdGFydDogZXhpc3RpbmdTdGFydCwgZW5kOiBleGlzdGluZ0VuZCB9ID0gcGFydCA/IGdldFBhcnRTdGFydEVuZChwYXJ0KSA6IHsgc3RhcnQ6IG51bGwsIGVuZDogbnVsbCB9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGV4aXN0aW5nU3RhcnQgIT09IG51bGwgJiYgZXhpc3RpbmdFbmQgIT09IG51bGwgPyBleGlzdGluZ0VuZCAtIGV4aXN0aW5nU3RhcnQgOiB0aW1lbGluZURlZmF1bHREdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgc2V0UGFydFN0YXJ0RW5kKHBhcnRJZCwgc3RhcnQsIHN0YXJ0ICsgTWF0aC5tYXgoMSwgZHVyYXRpb24pKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3Jvdy5pdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdCA9IChpdGVtLnN0YXJ0IC8gdGltZWxpbmVMZW5ndGgpICogMTAwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9ICgoaXRlbS5lbmQgLSBpdGVtLnN0YXJ0KSAvIHRpbWVsaW5lTGVuZ3RoKSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzLmZpbmQoKHApID0+IHAuaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJwYXJ0cyA9IHBhcnQgPyBzdWJwYXJ0c0J5UGFydFtwYXJ0LmlkXSB8fCBbXSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHBhcnQgPyBnZXRQYXJ0U3RhcnRFbmQocGFydCkgOiB7IHN0YXJ0OiBudWxsLCBlbmQ6IG51bGwgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2l0ZW0uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhYnNvbHV0ZSB0b3AtMiBoLVs4NHB4XSByb3VuZGVkIGJvcmRlciBweC0yIHB5LTEgYmctd2hpdGUgc2hhZG93LXNtIGN1cnNvci1tb3ZlICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubWlzc2luZ0VuZCA/IFwiYm9yZGVyLWJsdWUtNDAwXCIgOiBcImJvcmRlci1ncmF5LTMwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGxlZnQ6IGAke2xlZnR9JWAsIHdpZHRoOiBgJHtNYXRoLm1heCg0LCB3aWR0aCl9JWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJCVVRUT05cIl0uaW5jbHVkZXModGFyZ2V0LnRhZ05hbWUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGltZWxpbmVSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gdGltZWxpbmVSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSAoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldFNlYyA9IHJhdGlvICogdGltZWxpbmVMZW5ndGggLSBpdGVtLnN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnU3RhdGVSZWYuY3VycmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGl0ZW0uZW5kIC0gaXRlbS5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTZWMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldERyYWdnaW5nUGFydElkKGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIHRydW5jYXRlXCI+e2l0ZW0ubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBncmlkIGdyaWQtY29scy0yIGdhcC0xIHRleHQtWzEwcHhdXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bib3JkZXIgYm9yZGVyLWRhc2hlZCByb3VuZGVkIHB4LTEgcHktMC41ICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm1pc3NpbmdFbmQgPyBcImJvcmRlci1ibHVlLTQwMCBiZy1ibHVlLTUwXCIgOiBcImJvcmRlci1ncmF5LTMwMCBiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrSWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwibWFya0lkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrSWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtUaW1lID0gZ2V0TWFya1RpbWVCeUlkKG1hcmtJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya1RpbWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRFbmQgPSBlbmQgIT09IG51bGwgJiYgbWFya1RpbWUgPiBlbmQgPyBtYXJrVGltZSA6IGVuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBhcnRTdGFydEVuZChpdGVtLmlkLCBtYXJrVGltZSwgbmV4dEVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtMSB3LTEyIGJnLXRyYW5zcGFyZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzdGFydCAhPT0gbnVsbCA/IGZvcm1hdFRpbWUoc3RhcnQpIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlVGltZVN0cmluZyhlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kICE9PSBudWxsICYmIHZhbHVlID4gZW5kKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBhcnRTdGFydEVuZChpdGVtLmlkLCB2YWx1ZSwgZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bib3JkZXIgYm9yZGVyLWRhc2hlZCByb3VuZGVkIHB4LTEgcHktMC41ICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm1pc3NpbmdFbmQgPyBcImJvcmRlci1ibHVlLTQwMCBiZy1ibHVlLTUwXCIgOiBcImJvcmRlci1ncmF5LTMwMCBiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrSWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwibWFya0lkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrSWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtUaW1lID0gZ2V0TWFya1RpbWVCeUlkKG1hcmtJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya1RpbWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBtYXJrVGltZSA8IHN0YXJ0KSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQYXJ0U3RhcnRFbmQoaXRlbS5pZCwgc3RhcnQsIG1hcmtUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtMSB3LTEyIGJnLXRyYW5zcGFyZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtlbmQgIT09IG51bGwgPyBmb3JtYXRUaW1lKGVuZCkgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VUaW1lU3RyaW5nKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiB2YWx1ZSA8IHN0YXJ0KSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBhcnRTdGFydEVuZChpdGVtLmlkLCBzdGFydCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge3N1YnBhcnRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgc3BhY2UteS0xIHRleHQtWzEwcHhdXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1YnBhcnRzLm1hcCgoc3ViKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJUaW1lcyA9IGdldFN1YnBhcnRTdGFydEVuZChzdWIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3N1Yi5pZH0gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0cnVuY2F0ZVwiPntzdWIudGl0bGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xMCBiZy10cmFuc3BhcmVudCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQgcHgtMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3ViVGltZXMuc3RhcnQgIT09IG51bGwgPyBmb3JtYXRUaW1lKHN1YlRpbWVzLnN0YXJ0KSA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZVRpbWVTdHJpbmcoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlRpbWVzLmVuZCAhPT0gbnVsbCAmJiB2YWx1ZSA+IHN1YlRpbWVzLmVuZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTdWJwYXJ0U3RhcnRFbmQoc3ViLmlkLCB2YWx1ZSwgc3ViVGltZXMuZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAgYmctdHJhbnNwYXJlbnQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkIHB4LTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3N1YlRpbWVzLmVuZCAhPT0gbnVsbCA/IGZvcm1hdFRpbWUoc3ViVGltZXMuZW5kKSA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZVRpbWVTdHJpbmcoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlRpbWVzLnN0YXJ0ICE9PSBudWxsICYmIHZhbHVlIDwgc3ViVGltZXMuc3RhcnQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3VicGFydFN0YXJ0RW5kKHN1Yi5pZCwgc3ViVGltZXMuc3RhcnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtZ3JheS02MDBcIj5VbmFzc2lnbmVkPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICB7dGltZWxpbmVEYXRhLnVuYXNzaWduZWQubGVuZ3RoID09PSAwICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+QWxsIHBhcnRzIGFzc2lnbmVkPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7dGltZWxpbmVEYXRhLnVuYXNzaWduZWQubWFwKChwYXJ0KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17cGFydC5pZH1cbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlXG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInBhcnRJZFwiLCBwYXJ0LmlkKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIGJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgcm91bmRlZCB0ZXh0LXhzIGN1cnNvci1tb3ZlXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3BhcnQubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTNcIj5NYXJrIENoaXBzPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIHtyb3dzLm1hcCgocm93KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e3Jvdy5pZH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVSb3dJZChyb3cuaWQpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJvcmRlciByb3VuZGVkLWxnIHAtMyBjdXJzb3ItcG9pbnRlciAke1xuICAgICAgICAgICAgICAgICAgYWN0aXZlUm93SWQgPT09IHJvdy5pZCA/IFwiYm9yZGVyLWJsdWUtNDAwIGJnLWJsdWUtNTBcIiA6IFwiYm9yZGVyLWdyYXktMjAwXCJcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVSb3dJZChyb3cuaWQpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVSb3dJZCA9PT0gcm93LmlkID8gXCJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlXCIgOiBcImJnLWdyYXktMTAwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3Jvdy5sYWJlbH1cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+RHJvcCBjaGlwcyBpbnRvIHRoZSBlbXB0eSBzbG90IHRvIG9yZ2FuaXplLjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIHtyb3dzLmxlbmd0aCA+IDEgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSb3dzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigocikgPT4gci5pZCAhPT0gcm93LmlkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlUm93SWQgPT09IHJvdy5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWxsYmFjayA9IHJvd3MuZmluZCgocikgPT4gci5pZCAhPT0gcm93LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlUm93SWQoZmFsbGJhY2sgPyBmYWxsYmFjay5pZCA6IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtYXV0byB0ZXh0LXhzIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC04MDBcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgRGVsZXRlIFJvd1xuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17cm93Lm5vdGUgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgc2V0Um93cygocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICBwcmV2Lm1hcCgocikgPT4gKHIuaWQgPT09IHJvdy5pZCA/IHsgLi4uciwgbm90ZTogZS50YXJnZXQudmFsdWUgfSA6IHIpKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlJvdyBub3Rlcy4uLlwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCB0ZXh0LXhzIG1iLTJcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAge3Jvdy5tYXJrcy5tYXAoKG1hcmspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNhZ2UgPSBhc3NpZ25lZE1hcmtDb3VudHNbbWFyay5pZF0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JDbGFzcyA9XG4gICAgICAgICAgICAgICAgICAgICAgdXNhZ2UgPj0gMlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLWdyYXktMjAwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYmcteWVsbG93LTIwMCB0ZXh0LXllbGxvdy05MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctaW5kaWdvLTEwMCB0ZXh0LWluZGlnby04MDBcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGtleT17bWFyay5pZH1cbiAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGVcbiAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydD17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJtYXJrSWRcIiwgbWFyay5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzIGN1cnNvci1tb3ZlICR7Y29sb3JDbGFzc31gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2Zvcm1hdFRpbWUobWFyay50aW1lKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVJlbW92ZU1hcmsocm93LmlkLCBtYXJrLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1bMTBweF0gdGV4dC1ncmF5LTYwMCBob3Zlcjp0ZXh0LWdyYXktODAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgY2hpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIMOvwr/CvVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWRhc2hlZCBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIlxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0lkID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIm1hcmtJZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcmtJZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURyb3BUb1Jvdyhyb3cuaWQsIG1hcmtJZCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIEVtcHR5IHNsb3RcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LVsxMXB4XSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICBUaW1lczp7XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7cm93Lm1hcmtzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICA/IFwiw6/Cv8K9XCJcbiAgICAgICAgICAgICAgICAgICAgOiByb3cubWFya3MubWFwKChtKSA9PiBmb3JtYXRUaW1lKG0udGltZSkpLmpvaW4oXCIsIFwiKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPE11c2ljUGxheWVyXG4gICAgICAgICAgICBtdXNpY1VybD17bXVzaWNVcmwgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgb25UaW1lVXBkYXRlPXsodCkgPT4gc2V0Q3VycmVudFRpbWUodCl9XG4gICAgICAgICAgICBvbkF1ZGlvUmVhZHk9e2hhbmRsZUF1ZGlvUmVhZHl9XG4gICAgICAgICAgICBhdWRpb1JlZj17YXVkaW9SZWZ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIk11c2ljUGxheWVyIiwiZm9ybWF0VGltZSIsInNlY29uZHMiLCJ0b3RhbCIsIk1hdGgiLCJtYXgiLCJmbG9vciIsIm1pbnMiLCJzZWNzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsInBhcnNlVGltZVN0cmluZyIsInZhbHVlIiwidHJpbW1lZCIsInRyaW0iLCJ0ZXN0IiwicGFyc2VGbG9hdCIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJwYXJzZUludCIsIk51bWJlciIsImlzTmFOIiwidXVpZCIsInJhbmRvbSIsInNsaWNlIiwiRGF0ZSIsIm5vdyIsIk1hcmtpbmdQYW5lbCIsInBlcmZvcm1hbmNlSWQiLCJtdXNpY1VybCIsInBlcmZvcm1hbmNlVGl0bGUiLCJvblBhcnRzVXBkYXRlZCIsInJvd3MiLCJzZXRSb3dzIiwiYWN0aXZlUm93SWQiLCJzZXRBY3RpdmVSb3dJZCIsImN1cnJlbnRUaW1lIiwic2V0Q3VycmVudFRpbWUiLCJhc3NpZ25tZW50cyIsInNldEFzc2lnbm1lbnRzIiwic3VicGFydHNCeVBhcnQiLCJzZXRTdWJwYXJ0c0J5UGFydCIsIm5ld1N1YnBhcnRUaXRsZSIsInNldE5ld1N1YnBhcnRUaXRsZSIsInNhdmluZyIsInNldFNhdmluZyIsInNlc3Npb25UaXRsZSIsInNldFNlc3Npb25UaXRsZSIsImN1c3RvbVRpdGxlIiwic2V0Q3VzdG9tVGl0bGUiLCJzZXNzaW9uTGlzdCIsInNldFNlc3Npb25MaXN0Iiwic2VsZWN0ZWRTZXNzaW9uSWQiLCJzZXRTZWxlY3RlZFNlc3Npb25JZCIsImFsbFNlc3Npb25zIiwic2V0QWxsU2Vzc2lvbnMiLCJwZXJmb3JtYW5jZU5hbWVNYXAiLCJzZXRQZXJmb3JtYW5jZU5hbWVNYXAiLCJtdXNpY0R1cmF0aW9uIiwic2V0TXVzaWNEdXJhdGlvbiIsImF1ZGlvQ2xlYW51cFJlZiIsImF1ZGlvUmVmIiwidGltZWxpbmVSZWYiLCJtYW51YWxUaW1lbGluZUxlbmd0aCIsInNldE1hbnVhbFRpbWVsaW5lTGVuZ3RoIiwicGFydFRpbWVsaW5lT3ZlcnJpZGVzIiwic2V0UGFydFRpbWVsaW5lT3ZlcnJpZGVzIiwic3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzIiwic2V0U3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzIiwiZHJhZ2dpbmdQYXJ0SWQiLCJzZXREcmFnZ2luZ1BhcnRJZCIsImRyYWdTdGF0ZVJlZiIsImN1cnJlbnQiLCJoYW5kbGVNb3ZlIiwiZXZlbnQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmF0aW8iLCJjbGllbnRYIiwibGVmdCIsIndpZHRoIiwicmF3IiwidGltZWxpbmVMZW5ndGgiLCJvZmZzZXRTZWMiLCJkdXJhdGlvbiIsInN0YXJ0IiwibWluIiwic25hcHBlZCIsInJvdW5kIiwic2V0UGFydFN0YXJ0RW5kIiwicGFydElkIiwiaGFuZGxlVXAiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUF1ZGlvUmVhZHkiLCJhdWRpbyIsInVwZGF0ZSIsImlzRmluaXRlIiwiYXNzaWduZWRNYXJrQ291bnRzIiwiY291bnRzIiwiT2JqZWN0IiwidmFsdWVzIiwiZm9yRWFjaCIsIm1hcmtJZCIsImZpcnN0Um93IiwiaWQiLCJsYWJlbCIsIm5vdGUiLCJtYXJrcyIsInRpdGxlIiwidG9Mb2NhbGVTdHJpbmciLCJ0aW1lcyIsInBhcnQiLCJvdmVycmlkZSIsInRpbWVwb2ludF9zZWNvbmRzIiwiZW5kIiwidGltZXBvaW50X2VuZF9zZWNvbmRzIiwicHVzaCIsImZsYXQiLCJzdWIiLCJtYXhUaW1lIiwiZ2V0UGFydFN0YXJ0RW5kIiwicHJldiIsInNldFN1YnBhcnRTdGFydEVuZCIsInN1YnBhcnRJZCIsImdldFN1YnBhcnRTdGFydEVuZCIsImZldGNoU3VicGFydHMiLCJlbnRyaWVzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInJlcyIsImZldGNoIiwib2siLCJkYXRhIiwianNvbiIsImxpc3QiLCJmZXRjaFNlc3Npb25zIiwiZmV0Y2hQZXJmb3JtYW5jZU5hbWVzIiwicGVyZiIsImhhbmRsZUtleURvd24iLCJ0YXJnZXQiLCJ0YWciLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJjb2RlIiwicHJldmVudERlZmF1bHQiLCJyb3dJZCIsIm1hcmsiLCJ0aW1lIiwiY3JlYXRlZEF0IiwidG9JU09TdHJpbmciLCJyb3ciLCJrZXkiLCJuZXh0SW5kZXgiLCJuZXdSb3ciLCJpZHgiLCJmaW5kSW5kZXgiLCJyIiwibmV4dCIsInNwbGljZSIsImhhbmRsZURyb3BUb1JvdyIsIm1vdmVkIiwicmVtb3ZlZCIsIm5leHRNYXJrcyIsImZpbHRlciIsIm0iLCJoYW5kbGVSZW1vdmVNYXJrIiwiZ2V0TWFya1RpbWVCeUlkIiwiZmluZCIsInRpbWVsaW5lRGVmYXVsdER1cmF0aW9uIiwidGltZWxpbmVEYXRhIiwiYXNzaWduZWQiLCJ1bmFzc2lnbmVkIiwicmVzb2x2ZWRFbmQiLCJuYW1lIiwibWlzc2luZ0VuZCIsInNvcnQiLCJhIiwiYiIsIml0ZW0iLCJwbGFjZWQiLCJsYXN0IiwiaXRlbXMiLCJub3JtYWxpemVBc3NpZ25tZW50cyIsInJvd3NTbmFwc2hvdCIsIm5vcm1hbGl6ZWQiLCJmbGF0TWFwIiwiZ2V0QXNzaWduZWRUaW1lIiwidGFyZ2V0S2V5IiwiZ2V0RXhpc3RpbmdUaW1lIiwidHlwZSIsImZpZWxkIiwicCIsInMiLCJhc3NpZ25NYXJrVG9UYXJnZXQiLCJtYXJrVGltZSIsInVuZGVmaW5lZCIsIm9wcG9zaXRlRmllbGQiLCJhc3NpZ25lZE9wcG9zaXRlIiwiZXhpc3RpbmdPcHBvc2l0ZSIsIm9wcG9zaXRlVGltZSIsImFsZXJ0IiwiY2xlYXJBc3NpZ25tZW50IiwicmVuZGVyVGltZVRhcmdldCIsImFzc2lnbmVkVmFsdWUiLCJhc3NpZ25lZE1hcmtJZCIsImFzc2lnbmVkVGltZSIsImV4aXN0aW5nVGltZSIsInNob3dUaW1lIiwiZGl2IiwiY2xhc3NOYW1lIiwib25EcmFnT3ZlciIsImUiLCJvbkRyb3AiLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwic3BhbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJoYW5kbGVTYXZlU2Vzc2lvbiIsInBheWxvYWQiLCJwZXJmb3JtYW5jZV9pZCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZWQiLCJoYW5kbGVBcHBseSIsInVwZGF0ZXNCeVBhcnQiLCJ1cGRhdGVzQnlTdWJwYXJ0IiwidXBkYXRlZFBhcnRzIiwidXBkYXRlZFN1YnBhcnRzIiwidXBkYXRlZCIsInUiLCJwYXJ0X2lkIiwiaGFuZGxlU2F2ZVRpbWVsaW5lIiwiaW5wdXQiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJzZWxlY3QiLCJuZXh0Um93cyIsIm9wdGlvbiIsInNlc3MiLCJjcmVhdGVkX2F0IiwiY2hlY2tlZCIsInJvd0luZGV4IiwicmVmIiwiY3VycmVudFRhcmdldCIsImV4aXN0aW5nU3RhcnQiLCJleGlzdGluZ0VuZCIsInN1YnBhcnRzIiwic3R5bGUiLCJvbk1vdXNlRG93biIsImluY2x1ZGVzIiwibmV4dEVuZCIsInN1YlRpbWVzIiwiZHJhZ2dhYmxlIiwib25EcmFnU3RhcnQiLCJzZXREYXRhIiwic3RvcFByb3BhZ2F0aW9uIiwiZmFsbGJhY2siLCJ1c2FnZSIsImNvbG9yQ2xhc3MiLCJqb2luIiwib25UaW1lVXBkYXRlIiwidCIsIm9uQXVkaW9SZWFkeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MarkingPanel.tsx\n"));

/***/ })

});