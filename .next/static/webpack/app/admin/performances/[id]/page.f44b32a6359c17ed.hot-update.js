"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/performances/[id]/page",{

/***/ "(app-pages-browser)/./src/components/MarkingPanel.tsx":
/*!*****************************************!*\
  !*** ./src/components/MarkingPanel.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MarkingPanel: () => (/* binding */ MarkingPanel)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/MusicPlayer */ \"(app-pages-browser)/./src/components/MusicPlayer.tsx\");\n/* __next_internal_client_entry_do_not_use__ MarkingPanel auto */ \nvar _s = $RefreshSig$();\n\n\nfunction formatTime(seconds) {\n    const total = Math.max(0, Math.floor(seconds));\n    const mins = Math.floor(total / 60);\n    const secs = total % 60;\n    return \"\".concat(mins, \":\").concat(secs.toString().padStart(2, \"0\"));\n}\nfunction parseTimeString(value) {\n    if (!value) return null;\n    const trimmed = value.trim();\n    if (!trimmed) return null;\n    if (/^\\d+(\\.\\d+)?$/.test(trimmed)) return Math.max(0, parseFloat(trimmed));\n    const parts = trimmed.split(\":\");\n    if (parts.length === 2) {\n        const mins = parseInt(parts[0], 10);\n        const secs = parseFloat(parts[1]);\n        if (Number.isNaN(mins) || Number.isNaN(secs)) return null;\n        return Math.max(0, mins * 60 + secs);\n    }\n    return null;\n}\nfunction uuid() {\n    return Math.random().toString(36).slice(2, 10) + Date.now().toString(36);\n}\nfunction MarkingPanel(param) {\n    let { performanceId, parts, musicUrl, performanceTitle, onPartsUpdated } = param;\n    _s();\n    const [rows, setRows] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeRowId, setActiveRowId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [assignments, setAssignments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartsByPart, setSubpartsByPart] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [newSubpartTitle, setNewSubpartTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionTitle, setSessionTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"New Marking Session\");\n    const [customTitle, setCustomTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionList, setSessionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedSessionId, setSelectedSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [allSessions, setAllSessions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [performanceNameMap, setPerformanceNameMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [musicDuration, setMusicDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioCleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const timelineRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [manualTimelineLength, setManualTimelineLength] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(180);\n    const [partTimelineOverrides, setPartTimelineOverrides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartTimelineOverrides, setSubpartTimelineOverrides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [draggingPartId, setDraggingPartId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const dragStateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const timelineLength = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[timelineLength]\": ()=>{\n            const times = [];\n            parts.forEach({\n                \"MarkingPanel.useMemo[timelineLength]\": (part)=>{\n                    const override = partTimelineOverrides[part.id];\n                    var _override_start, _ref;\n                    const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : part.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                    var _override_end, _ref1;\n                    const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : part.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                    if (start !== null) times.push(start);\n                    if (end !== null) times.push(end);\n                    if (start !== null && end === null) times.push(start + 10);\n                }\n            }[\"MarkingPanel.useMemo[timelineLength]\"]);\n            Object.values(subpartsByPart).flat().forEach({\n                \"MarkingPanel.useMemo[timelineLength]\": (sub)=>{\n                    const override = subpartTimelineOverrides[sub.id];\n                    var _override_start, _ref;\n                    const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                    var _override_end, _ref1;\n                    const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                    if (start !== null) times.push(start);\n                    if (end !== null) times.push(end);\n                    if (start !== null && end === null) times.push(start + 10);\n                }\n            }[\"MarkingPanel.useMemo[timelineLength]\"]);\n            const maxTime = times.length ? Math.max(...times) : 0;\n            if (musicDuration && Number.isFinite(musicDuration)) return Math.max(musicDuration, maxTime, 10);\n            return Math.max(manualTimelineLength, maxTime, 10);\n        }\n    }[\"MarkingPanel.useMemo[timelineLength]\"], [\n        musicDuration,\n        manualTimelineLength,\n        parts,\n        subpartsByPart,\n        partTimelineOverrides,\n        subpartTimelineOverrides\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            return ({\n                \"MarkingPanel.useEffect\": ()=>{\n                    var _audioCleanupRef_current;\n                    (_audioCleanupRef_current = audioCleanupRef.current) === null || _audioCleanupRef_current === void 0 ? void 0 : _audioCleanupRef_current.call(audioCleanupRef);\n                }\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!draggingPartId) return;\n            const handleMove = {\n                \"MarkingPanel.useEffect.handleMove\": (event)=>{\n                    if (!timelineRef.current || !dragStateRef.current) return;\n                    const rect = timelineRef.current.getBoundingClientRect();\n                    const ratio = (event.clientX - rect.left) / rect.width;\n                    const raw = ratio * timelineLength - dragStateRef.current.offsetSec;\n                    const duration = dragStateRef.current.duration;\n                    const start = Math.max(0, Math.min(timelineLength - duration, raw));\n                    const snapped = Math.round(start);\n                    setPartStartEnd(dragStateRef.current.partId, snapped, snapped + duration);\n                }\n            }[\"MarkingPanel.useEffect.handleMove\"];\n            const handleUp = {\n                \"MarkingPanel.useEffect.handleUp\": ()=>{\n                    setDraggingPartId(null);\n                    dragStateRef.current = null;\n                }\n            }[\"MarkingPanel.useEffect.handleUp\"];\n            window.addEventListener(\"mousemove\", handleMove);\n            window.addEventListener(\"mouseup\", handleUp);\n            return ({\n                \"MarkingPanel.useEffect\": ()=>{\n                    window.removeEventListener(\"mousemove\", handleMove);\n                    window.removeEventListener(\"mouseup\", handleUp);\n                }\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        draggingPartId,\n        timelineLength\n    ]);\n    const handleAudioReady = (audio)=>{\n        if (audioCleanupRef.current) audioCleanupRef.current();\n        if (!audio) {\n            setMusicDuration(null);\n            audioCleanupRef.current = null;\n            return;\n        }\n        const update = ()=>{\n            const duration = Number.isFinite(audio.duration) ? audio.duration : null;\n            setMusicDuration(duration);\n        };\n        audio.addEventListener(\"loadedmetadata\", update);\n        audio.addEventListener(\"durationchange\", update);\n        update();\n        audioCleanupRef.current = ()=>{\n            audio.removeEventListener(\"loadedmetadata\", update);\n            audio.removeEventListener(\"durationchange\", update);\n        };\n    };\n    const assignedMarkCounts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[assignedMarkCounts]\": ()=>{\n            const counts = {};\n            Object.values(assignments).forEach({\n                \"MarkingPanel.useMemo[assignedMarkCounts]\": (value)=>{\n                    if (typeof value === \"string\") {\n                        counts[value] = (counts[value] || 0) + 1;\n                    } else if (value === null || value === void 0 ? void 0 : value.markId) {\n                        counts[value.markId] = (counts[value.markId] || 0) + 1;\n                    }\n                }\n            }[\"MarkingPanel.useMemo[assignedMarkCounts]\"]);\n            return counts;\n        }\n    }[\"MarkingPanel.useMemo[assignedMarkCounts]\"], [\n        assignments\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (rows.length === 0) {\n                const firstRow = {\n                    id: uuid(),\n                    label: \"Row 1\",\n                    note: \"\",\n                    marks: []\n                };\n                setRows([\n                    firstRow\n                ]);\n                setActiveRowId(firstRow.id);\n            }\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        rows.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (customTitle) return;\n            const title = \"\".concat(new Date().toLocaleString(), \" \\xb7 \").concat(performanceTitle || \"Performance\");\n            setSessionTitle(title);\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceTitle,\n        customTitle\n    ]);\n    const getPartStartEnd = (part)=>{\n        const override = partTimelineOverrides[part.id];\n        var _override_start, _ref;\n        const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : part.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n        var _override_end, _ref1;\n        const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : part.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n        return {\n            start,\n            end\n        };\n    };\n    const setPartStartEnd = (partId, start, end)=>{\n        setPartTimelineOverrides((prev)=>({\n                ...prev,\n                [partId]: {\n                    start,\n                    end\n                }\n            }));\n    };\n    const setSubpartStartEnd = (subpartId, start, end)=>{\n        setSubpartTimelineOverrides((prev)=>({\n                ...prev,\n                [subpartId]: {\n                    start,\n                    end\n                }\n            }));\n    };\n    const getSubpartStartEnd = (sub)=>{\n        const override = subpartTimelineOverrides[sub.id];\n        var _override_start, _ref;\n        const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n        var _override_end, _ref1;\n        const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n        return {\n            start,\n            end\n        };\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSubparts = {\n                \"MarkingPanel.useEffect.fetchSubparts\": async ()=>{\n                    const entries = await Promise.all(parts.map({\n                        \"MarkingPanel.useEffect.fetchSubparts\": async (part)=>{\n                            const res = await fetch(\"/api/subparts?partId=\".concat(part.id));\n                            if (!res.ok) return [\n                                part.id,\n                                []\n                            ];\n                            const data = await res.json();\n                            return [\n                                part.id,\n                                data || []\n                            ];\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]));\n                    const map = {};\n                    entries.forEach({\n                        \"MarkingPanel.useEffect.fetchSubparts\": (param)=>{\n                            let [partId, list] = param;\n                            map[partId] = list;\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]);\n                    setSubpartsByPart(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchSubparts\"];\n            fetchSubparts();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        parts\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSessions = {\n                \"MarkingPanel.useEffect.fetchSessions\": async ()=>{\n                    const res = await fetch(allSessions ? \"/api/marking-sessions?all=1\" : \"/api/marking-sessions?performanceId=\".concat(performanceId));\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    setSessionList(data || []);\n                }\n            }[\"MarkingPanel.useEffect.fetchSessions\"];\n            fetchSessions();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        allSessions\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const fetchPerformanceNames = {\n                \"MarkingPanel.useEffect.fetchPerformanceNames\": async ()=>{\n                    const res = await fetch(\"/api/performances\");\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    const map = {};\n                    (data || []).forEach({\n                        \"MarkingPanel.useEffect.fetchPerformanceNames\": (perf)=>{\n                            map[perf.id] = perf.title || \"Performance\";\n                        }\n                    }[\"MarkingPanel.useEffect.fetchPerformanceNames\"]);\n                    setPerformanceNameMap(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchPerformanceNames\"];\n            fetchPerformanceNames();\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"MarkingPanel.useEffect.handleKeyDown\": (event)=>{\n                    var _target_tagName;\n                    const target = event.target;\n                    const tag = target === null || target === void 0 ? void 0 : (_target_tagName = target.tagName) === null || _target_tagName === void 0 ? void 0 : _target_tagName.toLowerCase();\n                    if (tag === \"input\" || tag === \"textarea\" || tag === \"select\") return;\n                    if (event.code === \"Space\") {\n                        var _rows_;\n                        event.preventDefault();\n                        const rowId = activeRowId || ((_rows_ = rows[0]) === null || _rows_ === void 0 ? void 0 : _rows_.id);\n                        if (!rowId) return;\n                        const mark = {\n                            id: uuid(),\n                            time: currentTime,\n                            createdAt: new Date().toISOString()\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>prev.map({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (row)=>row.id === rowId ? {\n                                            ...row,\n                                            marks: [\n                                                ...row.marks,\n                                                mark\n                                            ]\n                                        } : row\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"])\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                    }\n                    if (event.key === \"e\" || event.key === \"E\") {\n                        event.preventDefault();\n                        const nextIndex = rows.length + 1;\n                        const newRow = {\n                            id: uuid(),\n                            label: \"Row \".concat(nextIndex),\n                            note: \"\",\n                            marks: []\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>{\n                                const idx = activeRowId ? prev.findIndex({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (r)=>r.id === activeRowId\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"]) : prev.length - 1;\n                                if (idx === -1) return [\n                                    ...prev,\n                                    newRow\n                                ];\n                                const next = [\n                                    ...prev\n                                ];\n                                next.splice(idx + 1, 0, newRow);\n                                return next;\n                            }\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                        setActiveRowId(newRow.id);\n                    }\n                }\n            }[\"MarkingPanel.useEffect.handleKeyDown\"];\n            window.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"MarkingPanel.useEffect\": ()=>window.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        activeRowId,\n        currentTime,\n        rows\n    ]);\n    const handleDropToRow = (rowId, markId)=>{\n        setRows((prev)=>{\n            let moved = null;\n            const removed = prev.map((row)=>{\n                const nextMarks = row.marks.filter((m)=>{\n                    if (m.id === markId) {\n                        moved = m;\n                        return false;\n                    }\n                    return true;\n                });\n                return {\n                    ...row,\n                    marks: nextMarks\n                };\n            });\n            if (!moved) return prev;\n            return removed.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: [\n                        ...row.marks,\n                        moved\n                    ]\n                } : row);\n        });\n    };\n    const handleRemoveMark = (rowId, markId)=>{\n        setRows((prev)=>prev.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: row.marks.filter((m)=>m.id !== markId)\n                } : row));\n    };\n    const getMarkTimeById = (markId)=>{\n        for (const row of rows){\n            const mark = row.marks.find((m)=>m.id === markId);\n            if (mark) return mark.time;\n        }\n        return null;\n    };\n    const timelineDefaultDuration = 10;\n    const timelineData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[timelineData]\": ()=>{\n            const assigned = [];\n            const unassigned = [];\n            parts.forEach({\n                \"MarkingPanel.useMemo[timelineData]\": (part)=>{\n                    const { start, end } = getPartStartEnd(part);\n                    if (start === null) {\n                        unassigned.push(part);\n                        return;\n                    }\n                    const resolvedEnd = end !== null && end !== void 0 ? end : start + timelineDefaultDuration;\n                    assigned.push({\n                        id: part.id,\n                        name: part.name,\n                        start,\n                        end: resolvedEnd,\n                        missingEnd: end === null\n                    });\n                }\n            }[\"MarkingPanel.useMemo[timelineData]\"]);\n            assigned.sort({\n                \"MarkingPanel.useMemo[timelineData]\": (a, b)=>a.start - b.start\n            }[\"MarkingPanel.useMemo[timelineData]\"]);\n            const rows = [];\n            assigned.forEach({\n                \"MarkingPanel.useMemo[timelineData]\": (item)=>{\n                    let placed = false;\n                    for (const row of rows){\n                        const last = row.items[row.items.length - 1];\n                        if (!last || item.start >= last.end) {\n                            row.items.push(item);\n                            placed = true;\n                            break;\n                        }\n                    }\n                    if (!placed) {\n                        rows.push({\n                            id: uuid(),\n                            items: [\n                                item\n                            ]\n                        });\n                    }\n                }\n            }[\"MarkingPanel.useMemo[timelineData]\"]);\n            return {\n                rows,\n                unassigned\n            };\n        }\n    }[\"MarkingPanel.useMemo[timelineData]\"], [\n        parts,\n        partTimelineOverrides\n    ]);\n    const normalizeAssignments = (rowsSnapshot, raw)=>{\n        const normalized = {};\n        Object.entries(raw || {}).forEach((param)=>{\n            let [key, value] = param;\n            if (typeof value === \"string\") {\n                const mark = rowsSnapshot.flatMap((r)=>r.marks).find((m)=>m.id === value);\n                if (mark) {\n                    normalized[key] = {\n                        markId: value,\n                        time: mark.time\n                    };\n                }\n            } else if (value && typeof value === \"object\") {\n                normalized[key] = value;\n            }\n        });\n        return normalized;\n    };\n    const getAssignedTime = (targetKey)=>{\n        const value = assignments[targetKey];\n        if (!value) return null;\n        if (typeof value === \"string\") {\n            for (const row of rows){\n                const mark = row.marks.find((m)=>m.id === value);\n                if (mark) return mark.time;\n            }\n            return null;\n        }\n        var _value_time;\n        return (_value_time = value.time) !== null && _value_time !== void 0 ? _value_time : null;\n    };\n    const getExistingTime = (type, id, field)=>{\n        if (type === \"part\") {\n            const part = parts.find((p)=>p.id === id);\n            if (!part) return null;\n            var _part_timepoint_seconds, _part_timepoint_end_seconds;\n            return field === \"start\" ? (_part_timepoint_seconds = part.timepoint_seconds) !== null && _part_timepoint_seconds !== void 0 ? _part_timepoint_seconds : null : (_part_timepoint_end_seconds = part.timepoint_end_seconds) !== null && _part_timepoint_end_seconds !== void 0 ? _part_timepoint_end_seconds : null;\n        }\n        const sub = Object.values(subpartsByPart).flat().find((s)=>s.id === id);\n        if (!sub) return null;\n        var _sub_timepoint_seconds, _sub_timepoint_end_seconds;\n        return field === \"start\" ? (_sub_timepoint_seconds = sub.timepoint_seconds) !== null && _sub_timepoint_seconds !== void 0 ? _sub_timepoint_seconds : null : (_sub_timepoint_end_seconds = sub.timepoint_end_seconds) !== null && _sub_timepoint_end_seconds !== void 0 ? _sub_timepoint_end_seconds : null;\n    };\n    const assignMarkToTarget = (targetKey, markId)=>{\n        var _rows_flatMap_find;\n        const [type, id, field] = targetKey.split(\":\");\n        const markTime = (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === markId)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time;\n        if (markTime === undefined) return;\n        const oppositeField = field === \"start\" ? \"end\" : \"start\";\n        const assignedOpposite = getAssignedTime(\"\".concat(type, \":\").concat(id, \":\").concat(oppositeField));\n        const existingOpposite = getExistingTime(type, id, oppositeField);\n        const oppositeTime = assignedOpposite !== null && assignedOpposite !== void 0 ? assignedOpposite : existingOpposite;\n        if (field === \"end\" && oppositeTime !== null && markTime < oppositeTime) {\n            alert(\"End time cannot be before start time.\");\n            return;\n        }\n        if (field === \"start\" && oppositeTime !== null && markTime > oppositeTime) {\n            alert(\"Start time cannot be after end time.\");\n            return;\n        }\n        setAssignments((prev)=>({\n                ...prev,\n                [targetKey]: {\n                    markId,\n                    time: markTime\n                }\n            }));\n    };\n    const clearAssignment = (targetKey)=>{\n        setAssignments((prev)=>{\n            const next = {\n                ...prev\n            };\n            delete next[targetKey];\n            return next;\n        });\n    };\n    const renderTimeTarget = (type, id, field)=>{\n        const targetKey = \"\".concat(type, \":\").concat(id, \":\").concat(field);\n        const assignedValue = assignments[targetKey];\n        const assignedMarkId = typeof assignedValue === \"string\" ? assignedValue : assignedValue === null || assignedValue === void 0 ? void 0 : assignedValue.markId;\n        const assignedTime = getAssignedTime(targetKey);\n        const existingTime = getExistingTime(type, id, field);\n        const showTime = assignedTime !== null ? assignedTime : existingTime;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"border border-dashed rounded px-2 py-1 text-xs flex items-center gap-2 \".concat(assignedMarkId ? \"border-emerald-400 bg-emerald-50\" : \"border-gray-300 bg-white\"),\n            onDragOver: (e)=>e.preventDefault(),\n            onDrop: (e)=>{\n                const markId = e.dataTransfer.getData(\"markId\");\n                if (!markId) return;\n                assignMarkToTarget(targetKey, markId);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-gray-500 uppercase\",\n                    children: field\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 493,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: showTime !== null ? formatTime(showTime) : \"--:--\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 494,\n                    columnNumber: 9\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"ml-1 px-2 py-0.5 rounded-full text-[10px] bg-emerald-600 text-white\",\n                    children: \"Chip\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 498,\n                    columnNumber: 11\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>clearAssignment(targetKey),\n                    className: \"ml-auto text-red-600 hover:text-red-800\",\n                    title: \"Remove\",\n                    children: \"\\xc3â€”\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 503,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n            lineNumber: 482,\n            columnNumber: 7\n        }, this);\n    };\n    const handleSaveSession = async ()=>{\n        const payload = {\n            performance_id: performanceId,\n            title: sessionTitle || \"Marking Session\",\n            rows,\n            assignments\n        };\n        const res = await fetch(\"/api/marking-sessions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n        if (res.ok) {\n            const created = await res.json();\n            setSessionList((prev)=>[\n                    created,\n                    ...prev\n                ]);\n        }\n    };\n    const handleApply = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            Object.entries(assignments).forEach((param)=>{\n                let [key, value] = param;\n                var _rows_flatMap_find;\n                const [type, id, field] = key.split(\":\");\n                const markId = typeof value === \"string\" ? value : value === null || value === void 0 ? void 0 : value.markId;\n                const markTime = typeof value === \"string\" ? (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === value)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time : value === null || value === void 0 ? void 0 : value.time;\n                if (markTime === undefined || markTime === null) return;\n                if (type === \"part\") {\n                    updatesByPart[id] = updatesByPart[id] || {};\n                    updatesByPart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = markTime;\n                } else {\n                    updatesBySubpart[id] = updatesBySubpart[id] || {};\n                    updatesBySubpart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = markTime;\n                }\n            });\n            const updatedParts = [];\n            const updatedSubparts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                const res = await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    if (updated) updatedSubparts.push(updated);\n                }\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n            if (updatedSubparts.length > 0) {\n                setSubpartsByPart((prev)=>{\n                    const next = {\n                        ...prev\n                    };\n                    updatedSubparts.forEach((sub)=>{\n                        next[sub.part_id] = (next[sub.part_id] || []).map((s)=>s.id === sub.id ? {\n                                ...s,\n                                ...sub\n                            } : s);\n                    });\n                    return next;\n                });\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    const handleSaveTimeline = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            parts.forEach((part)=>{\n                const { start, end } = getPartStartEnd(part);\n                if (start !== null) {\n                    updatesByPart[part.id] = {\n                        timepoint_seconds: start,\n                        timepoint_end_seconds: end !== null && end !== void 0 ? end : null\n                    };\n                }\n            });\n            Object.values(subpartsByPart).flat().forEach((sub)=>{\n                const override = subpartTimelineOverrides[sub.id];\n                var _override_start, _ref;\n                const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                var _override_end, _ref1;\n                const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                if (start !== null) {\n                    updatesBySubpart[sub.id] = {\n                        timepoint_seconds: start,\n                        timepoint_end_seconds: end !== null && end !== void 0 ? end : null\n                    };\n                }\n            });\n            const updatedParts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"grid grid-cols-1 xl:grid-cols-[320px_1fr] gap-6\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xl font-bold text-gray-900 mb-2\",\n                        children: \"Parts & Subparts\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 672,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 mb-4\",\n                        children: \"Drop time chips onto Start/End. Only dropped chips change timepoints when saved.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 673,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: parts.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"border border-gray-200 rounded-lg p-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-semibold text-gray-900 mb-2\",\n                                        children: part.name\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 679,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid grid-cols-2 gap-2 mb-2\",\n                                        children: [\n                                            renderTimeTarget(\"part\", part.id, \"start\"),\n                                            renderTimeTarget(\"part\", part.id, \"end\")\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 680,\n                                        columnNumber: 15\n                                    }, this),\n                                    (subpartsByPart[part.id] || []).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 space-y-2\",\n                                        children: (subpartsByPart[part.id] || []).map((sub)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border border-gray-100 rounded p-2 bg-gray-50\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-sm font-semibold text-gray-800\",\n                                                        children: sub.title\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 688,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"grid grid-cols-2 gap-2 mt-2\",\n                                                        children: [\n                                                            renderTimeTarget(\"subpart\", sub.id, \"start\"),\n                                                            renderTimeTarget(\"subpart\", sub.id, \"end\")\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 689,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, sub.id, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 687,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 685,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-3 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: newSubpartTitle[part.id] || \"\",\n                                                onChange: (e)=>setNewSubpartTitle((prev)=>({\n                                                            ...prev,\n                                                            [part.id]: e.target.value\n                                                        })),\n                                                placeholder: \"Add subpart\",\n                                                className: \"flex-1 px-2 py-1 border border-gray-300 rounded text-xs\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 698,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: async ()=>{\n                                                    const title = (newSubpartTitle[part.id] || \"\").trim();\n                                                    if (!title) return;\n                                                    const res = await fetch(\"/api/subparts\", {\n                                                        method: \"POST\",\n                                                        headers: {\n                                                            \"Content-Type\": \"application/json\"\n                                                        },\n                                                        body: JSON.stringify({\n                                                            part_id: part.id,\n                                                            title\n                                                        })\n                                                    });\n                                                    if (res.ok) {\n                                                        const created = await res.json();\n                                                        setSubpartsByPart((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: [\n                                                                    ...prev[part.id] || [],\n                                                                    created\n                                                                ]\n                                                            }));\n                                                        setNewSubpartTitle((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: \"\"\n                                                            }));\n                                                    }\n                                                },\n                                                className: \"px-2 py-1 bg-gray-900 text-white rounded text-xs\",\n                                                children: \"Add\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 707,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 697,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, part.id, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 678,\n                                columnNumber: 13\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 676,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 671,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-wrap items-center gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xl font-bold text-gray-900\",\n                                        children: \"Marking Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 738,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"ml-auto flex gap-2 items-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: sessionTitle,\n                                                onChange: (e)=>{\n                                                    setSessionTitle(e.target.value);\n                                                    setCustomTitle(true);\n                                                },\n                                                className: \"px-3 py-1 border border-gray-300 rounded text-sm\",\n                                                placeholder: \"Session title\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 740,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleSaveSession,\n                                                className: \"px-3 py-1 bg-gray-900 text-white rounded text-sm\",\n                                                children: \"Save Session\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 749,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleApply,\n                                                disabled: saving,\n                                                className: \"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:bg-gray-400\",\n                                                children: saving ? \"Saving...\" : \"Apply Timepoints\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 755,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 739,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 737,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-2\",\n                                children: \"Hotkeys: Space = mark time, E = new row. Works while music is playing or paused.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 764,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-1\",\n                                children: [\n                                    \"Music length: \",\n                                    musicDuration ? formatTime(musicDuration) : \"Ã¯Â¿Â½\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 767,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 bg-gray-50 border border-dashed border-gray-300 rounded p-3 text-xs text-gray-500\",\n                                children: \"Waveform view: not available yet. We can add a waveform preview in a follow-up.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 770,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 flex flex-wrap items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                        value: selectedSessionId,\n                                        onChange: async (e)=>{\n                                            const id = e.target.value;\n                                            setSelectedSessionId(id);\n                                            if (!id) return;\n                                            const res = await fetch(\"/api/marking-sessions/\".concat(id));\n                                            if (!res.ok) return;\n                                            const data = await res.json();\n                                            setSessionTitle(data.title || \"Marking Session\");\n                                            setCustomTitle(true);\n                                            const nextRows = (data.rows || []).map((row)=>({\n                                                    ...row,\n                                                    note: row.note || \"\"\n                                                }));\n                                            setRows(nextRows);\n                                            setAssignments(normalizeAssignments(nextRows, data.assignments || {}));\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                value: \"\",\n                                                children: \"Load saved session...\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 794,\n                                                columnNumber: 15\n                                            }, this),\n                                            sessionList.map((sess)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: sess.id,\n                                                    children: [\n                                                        sess.title || \"Untitled\",\n                                                        \" \\xef\\xbf\\xbd \",\n                                                        performanceNameMap[sess.performance_id] || \"Performance\",\n                                                        \" \\xef\\xbf\\xbd \",\n                                                        new Date(sess.created_at).toLocaleString()\n                                                    ]\n                                                }, sess.id, true, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 796,\n                                                    columnNumber: 17\n                                                }, this))\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 774,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-xs text-gray-600 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: allSessions,\n                                                onChange: (e)=>setAllSessions(e.target.checked),\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 802,\n                                                columnNumber: 15\n                                            }, this),\n                                            \"Show sessions from all performances\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 801,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            const firstRow = {\n                                                id: uuid(),\n                                                label: \"Row 1\",\n                                                note: \"\",\n                                                marks: []\n                                            };\n                                            setRows([\n                                                firstRow\n                                            ]);\n                                            setActiveRowId(firstRow.id);\n                                            setAssignments({});\n                                            setSelectedSessionId(\"\");\n                                            setCustomTitle(false);\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: \"New Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 810,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 773,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 736,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-3 mb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-lg font-semibold text-gray-900\",\n                                        children: \"Timeline\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 828,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"ml-auto flex items-center gap-2\",\n                                        children: [\n                                            !musicDuration && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 text-xs text-gray-600\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        children: \"Timeline length (sec)\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 832,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"number\",\n                                                        min: 10,\n                                                        value: manualTimelineLength,\n                                                        onChange: (e)=>setManualTimelineLength(parseInt(e.target.value || \"0\", 10) || 0),\n                                                        className: \"w-20 px-2 py-1 border border-gray-300 rounded text-xs\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 833,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 831,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleSaveTimeline,\n                                                disabled: saving,\n                                                className: \"px-3 py-1 bg-indigo-600 text-white rounded text-sm disabled:bg-gray-400\",\n                                                children: saving ? \"Saving...\" : \"Save Timeline\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 842,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 829,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 827,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500\",\n                                children: \"Drag parts to move them. Drop chips or type times to set Start/End.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 851,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 space-y-4\",\n                                children: [\n                                    timelineData.rows.map((row, rowIndex)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"space-y-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs font-semibold text-gray-600\",\n                                                    children: [\n                                                        \"Row \",\n                                                        rowIndex + 1\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 857,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    ref: rowIndex === 0 ? timelineRef : undefined,\n                                                    className: \"relative h-24 border border-gray-200 rounded bg-gray-50 overflow-hidden\",\n                                                    onDragOver: (e)=>e.preventDefault(),\n                                                    onDrop: (e)=>{\n                                                        const partId = e.dataTransfer.getData(\"partId\");\n                                                        if (!partId) return;\n                                                        const rect = e.currentTarget.getBoundingClientRect();\n                                                        const ratio = (e.clientX - rect.left) / rect.width;\n                                                        const start = Math.max(0, Math.min(timelineLength - timelineDefaultDuration, Math.round(ratio * timelineLength)));\n                                                        const part = parts.find((p)=>p.id === partId);\n                                                        const { start: existingStart, end: existingEnd } = part ? getPartStartEnd(part) : {\n                                                            start: null,\n                                                            end: null\n                                                        };\n                                                        const duration = existingStart !== null && existingEnd !== null ? existingEnd - existingStart : timelineDefaultDuration;\n                                                        setPartStartEnd(partId, start, start + Math.max(1, duration));\n                                                    },\n                                                    children: row.items.map((item)=>{\n                                                        const left = item.start / timelineLength * 100;\n                                                        const width = (item.end - item.start) / timelineLength * 100;\n                                                        const part = parts.find((p)=>p.id === item.id);\n                                                        const subparts = part ? subpartsByPart[part.id] || [] : [];\n                                                        const { start, end } = part ? getPartStartEnd(part) : {\n                                                            start: null,\n                                                            end: null\n                                                        };\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"absolute top-2 h-[84px] rounded border px-2 py-1 bg-white shadow-sm cursor-move \".concat(item.missingEnd ? \"border-blue-400\" : \"border-gray-300\"),\n                                                            style: {\n                                                                left: \"\".concat(left, \"%\"),\n                                                                width: \"\".concat(Math.max(4, width), \"%\")\n                                                            },\n                                                            onMouseDown: (e)=>{\n                                                                const target = e.target;\n                                                                if ([\n                                                                    \"INPUT\",\n                                                                    \"TEXTAREA\",\n                                                                    \"BUTTON\"\n                                                                ].includes(target.tagName)) return;\n                                                                if (!timelineRef.current) return;\n                                                                const rect = timelineRef.current.getBoundingClientRect();\n                                                                const ratio = (e.clientX - rect.left) / rect.width;\n                                                                const offsetSec = ratio * timelineLength - item.start;\n                                                                dragStateRef.current = {\n                                                                    partId: item.id,\n                                                                    duration: item.end - item.start,\n                                                                    offsetSec\n                                                                };\n                                                                setDraggingPartId(item.id);\n                                                            },\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"text-xs font-semibold text-gray-900 truncate\",\n                                                                    children: item.name\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                    lineNumber: 902,\n                                                                    columnNumber: 25\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"mt-1 grid grid-cols-2 gap-1 text-[10px]\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"border border-dashed rounded px-1 py-0.5 \".concat(item.missingEnd ? \"border-blue-400 bg-blue-50\" : \"border-gray-300 bg-white\"),\n                                                                            onDragOver: (e)=>e.preventDefault(),\n                                                                            onDrop: (e)=>{\n                                                                                const markId = e.dataTransfer.getData(\"markId\");\n                                                                                if (!markId) return;\n                                                                                const markTime = getMarkTimeById(markId);\n                                                                                if (markTime === null) return;\n                                                                                const nextEnd = end !== null && markTime > end ? markTime : end;\n                                                                                setPartStartEnd(item.id, markTime, nextEnd);\n                                                                            },\n                                                                            children: [\n                                                                                \"Start:\",\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"ml-1 w-12 bg-transparent\",\n                                                                                    value: start !== null ? formatTime(start) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (end !== null && value > end) return;\n                                                                                        setPartStartEnd(item.id, value, end);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 919,\n                                                                                    columnNumber: 29\n                                                                                }, this)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                            lineNumber: 904,\n                                                                            columnNumber: 27\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"border border-dashed rounded px-1 py-0.5 \".concat(item.missingEnd ? \"border-blue-400 bg-blue-50\" : \"border-gray-300 bg-white\"),\n                                                                            onDragOver: (e)=>e.preventDefault(),\n                                                                            onDrop: (e)=>{\n                                                                                const markId = e.dataTransfer.getData(\"markId\");\n                                                                                if (!markId) return;\n                                                                                const markTime = getMarkTimeById(markId);\n                                                                                if (markTime === null) return;\n                                                                                if (start !== null && markTime < start) return;\n                                                                                setPartStartEnd(item.id, start, markTime);\n                                                                            },\n                                                                            children: [\n                                                                                \"End:\",\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"ml-1 w-12 bg-transparent\",\n                                                                                    value: end !== null ? formatTime(end) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (start !== null && value < start) return;\n                                                                                        setPartStartEnd(item.id, start, value);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 945,\n                                                                                    columnNumber: 29\n                                                                                }, this)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                            lineNumber: 930,\n                                                                            columnNumber: 27\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                    lineNumber: 903,\n                                                                    columnNumber: 25\n                                                                }, this),\n                                                                subparts.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"mt-1 space-y-1 text-[10px]\",\n                                                                    children: subparts.map((sub)=>{\n                                                                        const subTimes = getSubpartStartEnd(sub);\n                                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"flex items-center gap-1\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: \"truncate\",\n                                                                                    children: sub.title\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 963,\n                                                                                    columnNumber: 35\n                                                                                }, this),\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"w-10 bg-transparent border border-gray-200 rounded px-1\",\n                                                                                    value: subTimes.start !== null ? formatTime(subTimes.start) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (subTimes.end !== null && value > subTimes.end) return;\n                                                                                        setSubpartStartEnd(sub.id, value, subTimes.end);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 964,\n                                                                                    columnNumber: 35\n                                                                                }, this),\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                                    className: \"w-10 bg-transparent border border-gray-200 rounded px-1\",\n                                                                                    value: subTimes.end !== null ? formatTime(subTimes.end) : \"\",\n                                                                                    onChange: (e)=>{\n                                                                                        const value = parseTimeString(e.target.value);\n                                                                                        if (value === null) return;\n                                                                                        if (subTimes.start !== null && value < subTimes.start) return;\n                                                                                        setSubpartStartEnd(sub.id, subTimes.start, value);\n                                                                                    }\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                                    lineNumber: 974,\n                                                                                    columnNumber: 35\n                                                                                }, this)\n                                                                            ]\n                                                                        }, sub.id, true, {\n                                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                            lineNumber: 962,\n                                                                            columnNumber: 33\n                                                                        }, this);\n                                                                    })\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                    lineNumber: 958,\n                                                                    columnNumber: 27\n                                                                }, this)\n                                                            ]\n                                                        }, item.id, true, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 881,\n                                                            columnNumber: 23\n                                                        }, this);\n                                                    })\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 858,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, row.id, true, {\n                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                            lineNumber: 856,\n                                            columnNumber: 15\n                                        }, this)),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs font-semibold text-gray-600\",\n                                                children: \"Unassigned\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 996,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-2\",\n                                                children: [\n                                                    timelineData.unassigned.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: \"All parts assigned\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 999,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    timelineData.unassigned.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            draggable: true,\n                                                            onDragStart: (e)=>e.dataTransfer.setData(\"partId\", part.id),\n                                                            className: \"px-2 py-1 bg-gray-200 text-gray-800 rounded text-xs cursor-move\",\n                                                            children: part.name\n                                                        }, part.id, false, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 1002,\n                                                            columnNumber: 19\n                                                        }, this))\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 997,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 995,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 854,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 826,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-lg font-semibold text-gray-900 mb-3\",\n                                children: \"Mark Chips\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 1017,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-4\",\n                                children: rows.map((row)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        onClick: ()=>setActiveRowId(row.id),\n                                        className: \"border rounded-lg p-3 cursor-pointer \".concat(activeRowId === row.id ? \"border-blue-400 bg-blue-50\" : \"border-gray-200\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3 mb-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>setActiveRowId(row.id),\n                                                        className: \"px-2 py-1 rounded text-xs font-semibold \".concat(activeRowId === row.id ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700\"),\n                                                        children: row.label\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1028,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: \"Drop chips into the empty slot to organize.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1036,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    rows.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: (e)=>{\n                                                            e.stopPropagation();\n                                                            setRows((prev)=>prev.filter((r)=>r.id !== row.id));\n                                                            if (activeRowId === row.id) {\n                                                                const fallback = rows.find((r)=>r.id !== row.id);\n                                                                setActiveRowId(fallback ? fallback.id : null);\n                                                            }\n                                                        },\n                                                        className: \"ml-auto text-xs text-red-600 hover:text-red-800\",\n                                                        children: \"Delete Row\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1038,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1027,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: row.note || \"\",\n                                                onChange: (e)=>setRows((prev)=>prev.map((r)=>r.id === row.id ? {\n                                                                ...r,\n                                                                note: e.target.value\n                                                            } : r)),\n                                                placeholder: \"Row notes...\",\n                                                className: \"w-full px-2 py-1 border border-gray-200 rounded text-xs mb-2\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1053,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-2\",\n                                                children: [\n                                                    row.marks.map((mark)=>{\n                                                        const usage = assignedMarkCounts[mark.id] || 0;\n                                                        const colorClass = usage >= 2 ? \"bg-gray-200 text-gray-700\" : usage === 1 ? \"bg-yellow-200 text-yellow-900\" : \"bg-indigo-100 text-indigo-800\";\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            draggable: true,\n                                                            onDragStart: (e)=>{\n                                                                e.dataTransfer.setData(\"markId\", mark.id);\n                                                            },\n                                                            className: \"px-2 py-1 rounded text-xs cursor-move \".concat(colorClass),\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"flex items-center gap-2\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                        children: formatTime(mark.time)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                        lineNumber: 1082,\n                                                                        columnNumber: 25\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                        onClick: ()=>handleRemoveMark(row.id, mark.id),\n                                                                        className: \"text-[10px] text-gray-600 hover:text-gray-800\",\n                                                                        title: \"Remove chip\",\n                                                                        children: \"\\xef\\xbf\\xbd\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                        lineNumber: 1083,\n                                                                        columnNumber: 25\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                lineNumber: 1081,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, mark.id, false, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 1073,\n                                                            columnNumber: 21\n                                                        }, this);\n                                                    }),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"px-2 py-1 border border-dashed border-gray-300 rounded text-xs text-gray-500\",\n                                                        onDragOver: (e)=>e.preventDefault(),\n                                                        onDrop: (e)=>{\n                                                            const markId = e.dataTransfer.getData(\"markId\");\n                                                            if (!markId) return;\n                                                            handleDropToRow(row.id, markId);\n                                                        },\n                                                        children: \"Empty slot\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 1094,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1063,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-2 text-[11px] text-gray-500\",\n                                                children: [\n                                                    \"Times:\",\n                                                    \" \",\n                                                    row.marks.length === 0 ? \"Ã¯Â¿Â½\" : row.marks.map((m)=>formatTime(m.time)).join(\", \")\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 1106,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, row.id, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 1020,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 1018,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 1016,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__.MusicPlayer, {\n                            musicUrl: musicUrl || undefined,\n                            onTimeUpdate: (t)=>setCurrentTime(t),\n                            onAudioReady: handleAudioReady,\n                            audioRef: audioRef\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                            lineNumber: 1118,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 1117,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 735,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n        lineNumber: 670,\n        columnNumber: 5\n    }, this);\n}\n_s(MarkingPanel, \"rL7WU08xQkrs32uNzVDPvY/pVlU=\");\n_c = MarkingPanel;\nvar _c;\n$RefreshReg$(_c, \"MarkingPanel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hcmtpbmdQYW5lbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU2RDtBQUNOO0FBNkN2RCxTQUFTSyxXQUFXQyxPQUFlO0lBQ2pDLE1BQU1DLFFBQVFDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxLQUFLLENBQUNKO0lBQ3JDLE1BQU1LLE9BQU9ILEtBQUtFLEtBQUssQ0FBQ0gsUUFBUTtJQUNoQyxNQUFNSyxPQUFPTCxRQUFRO0lBQ3JCLE9BQU8sR0FBV0ssT0FBUkQsTUFBSyxLQUFvQyxPQUFqQ0MsS0FBS0MsUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRztBQUNoRDtBQUVBLFNBQVNDLGdCQUFnQkMsS0FBYTtJQUNwQyxJQUFJLENBQUNBLE9BQU8sT0FBTztJQUNuQixNQUFNQyxVQUFVRCxNQUFNRSxJQUFJO0lBQzFCLElBQUksQ0FBQ0QsU0FBUyxPQUFPO0lBQ3JCLElBQUksZ0JBQWdCRSxJQUFJLENBQUNGLFVBQVUsT0FBT1QsS0FBS0MsR0FBRyxDQUFDLEdBQUdXLFdBQVdIO0lBQ2pFLE1BQU1JLFFBQVFKLFFBQVFLLEtBQUssQ0FBQztJQUM1QixJQUFJRCxNQUFNRSxNQUFNLEtBQUssR0FBRztRQUN0QixNQUFNWixPQUFPYSxTQUFTSCxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQ2hDLE1BQU1ULE9BQU9RLFdBQVdDLEtBQUssQ0FBQyxFQUFFO1FBQ2hDLElBQUlJLE9BQU9DLEtBQUssQ0FBQ2YsU0FBU2MsT0FBT0MsS0FBSyxDQUFDZCxPQUFPLE9BQU87UUFDckQsT0FBT0osS0FBS0MsR0FBRyxDQUFDLEdBQUdFLE9BQU8sS0FBS0M7SUFDakM7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTZTtJQUNQLE9BQU9uQixLQUFLb0IsTUFBTSxHQUFHZixRQUFRLENBQUMsSUFBSWdCLEtBQUssQ0FBQyxHQUFHLE1BQU1DLEtBQUtDLEdBQUcsR0FBR2xCLFFBQVEsQ0FBQztBQUN2RTtB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RUFDVjVGLE9BQU07a0ZBQ1A7Ozs7Ozs7Ozs7OzsyREFiRTZCLEtBQUt4RSxFQUFFOzs7OztvREFtQmhCO2tFQUNBLDhEQUFDc0k7d0RBQ0NDLFdBQVU7d0RBQ1ZDLFlBQVksQ0FBQ0MsSUFBTUEsRUFBRW5FLGNBQWM7d0RBQ25Db0UsUUFBUSxDQUFDRDs0REFDUCxNQUFNbkcsU0FBU21HLEVBQUVFLFlBQVksQ0FBQ0MsT0FBTyxDQUFDOzREQUN0QyxJQUFJLENBQUN0RyxRQUFROzREQUNiK0MsZ0JBQWdCVCxJQUFJNUUsRUFBRSxFQUFFc0M7d0RBQzFCO2tFQUNEOzs7Ozs7Ozs7Ozs7MERBSUgsOERBQUNnRztnREFBSUMsV0FBVTs7b0RBQWlDO29EQUN2QztvREFDTjNELElBQUlsQyxLQUFLLENBQUNyRyxNQUFNLEtBQUssSUFDbEIsUUFDQXVJLElBQUlsQyxLQUFLLENBQUNZLEdBQUcsQ0FBQyxDQUFDb0MsSUFBTXZLLFdBQVd1SyxFQUFFakIsSUFBSSxHQUFHcUgsSUFBSSxDQUFDOzs7Ozs7Ozt1Q0F6Ri9DbEgsSUFBSTVFLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBZ0duQiw4REFBQ3NJO3dCQUFJQyxXQUFVO2tDQUNiLDRFQUFDck4sZ0VBQVdBOzRCQUNWOEIsVUFBVUEsWUFBWXlLOzRCQUN0QnNFLGNBQWMsQ0FBQ0MsSUFBTXhPLGVBQWV3Tzs0QkFDcENDLGNBQWNoSzs0QkFDZGpELFVBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU10QjtHQTdoQ2dCbEM7S0FBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY2FsdmlcXERlc2t0b3BcXFBlcmZUb29sXFxzcmNcXGNvbXBvbmVudHNcXE1hcmtpbmdQYW5lbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTXVzaWNQbGF5ZXIgfSBmcm9tIFwiQC9jb21wb25lbnRzL011c2ljUGxheWVyXCI7XG5cbmludGVyZmFjZSBQYXJ0SXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdGltZXBvaW50X3NlY29uZHM/OiBudW1iZXIgfCBudWxsO1xuICB0aW1lcG9pbnRfZW5kX3NlY29uZHM/OiBudW1iZXIgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgU3VicGFydEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBwYXJ0X2lkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHRpbWVwb2ludF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbiAgdGltZXBvaW50X2VuZF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIE1hcmsge1xuICBpZDogc3RyaW5nO1xuICB0aW1lOiBudW1iZXI7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTWFya1JvdyB7XG4gIGlkOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIG5vdGU/OiBzdHJpbmc7XG4gIG1hcmtzOiBNYXJrW107XG59XG5cbnR5cGUgQXNzaWdubWVudFZhbHVlID1cbiAgfCBzdHJpbmdcbiAgfCB7XG4gICAgICBtYXJrSWQ/OiBzdHJpbmc7XG4gICAgICB0aW1lOiBudW1iZXI7XG4gICAgfTtcblxuaW50ZXJmYWNlIE1hcmtpbmdQYW5lbFByb3BzIHtcbiAgcGVyZm9ybWFuY2VJZDogc3RyaW5nO1xuICBwYXJ0czogUGFydEl0ZW1bXTtcbiAgbXVzaWNVcmw/OiBzdHJpbmcgfCBudWxsO1xuICBwZXJmb3JtYW5jZVRpdGxlPzogc3RyaW5nO1xuICBvblBhcnRzVXBkYXRlZDogKHBhcnRzOiBQYXJ0SXRlbVtdKSA9PiB2b2lkO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lKHNlY29uZHM6IG51bWJlcikge1xuICBjb25zdCB0b3RhbCA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3Ioc2Vjb25kcykpO1xuICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcih0b3RhbCAvIDYwKTtcbiAgY29uc3Qgc2VjcyA9IHRvdGFsICUgNjA7XG4gIHJldHVybiBgJHttaW5zfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lU3RyaW5nKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKCk7XG4gIGlmICghdHJpbW1lZCkgcmV0dXJuIG51bGw7XG4gIGlmICgvXlxcZCsoXFwuXFxkKyk/JC8udGVzdCh0cmltbWVkKSkgcmV0dXJuIE1hdGgubWF4KDAsIHBhcnNlRmxvYXQodHJpbW1lZCkpO1xuICBjb25zdCBwYXJ0cyA9IHRyaW1tZWQuc3BsaXQoXCI6XCIpO1xuICBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7XG4gICAgY29uc3QgbWlucyA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMCk7XG4gICAgY29uc3Qgc2VjcyA9IHBhcnNlRmxvYXQocGFydHNbMV0pO1xuICAgIGlmIChOdW1iZXIuaXNOYU4obWlucykgfHwgTnVtYmVyLmlzTmFOKHNlY3MpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgbWlucyAqIDYwICsgc2Vjcyk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHV1aWQoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCAxMCkgKyBEYXRlLm5vdygpLnRvU3RyaW5nKDM2KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE1hcmtpbmdQYW5lbCh7IHBlcmZvcm1hbmNlSWQsIHBhcnRzLCBtdXNpY1VybCwgcGVyZm9ybWFuY2VUaXRsZSwgb25QYXJ0c1VwZGF0ZWQgfTogTWFya2luZ1BhbmVsUHJvcHMpIHtcbiAgY29uc3QgW3Jvd3MsIHNldFJvd3NdID0gdXNlU3RhdGU8TWFya1Jvd1tdPihbXSk7XG4gIGNvbnN0IFthY3RpdmVSb3dJZCwgc2V0QWN0aXZlUm93SWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtjdXJyZW50VGltZSwgc2V0Q3VycmVudFRpbWVdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFthc3NpZ25tZW50cywgc2V0QXNzaWdubWVudHNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgQXNzaWdubWVudFZhbHVlPj4oe30pO1xuICBjb25zdCBbc3VicGFydHNCeVBhcnQsIHNldFN1YnBhcnRzQnlQYXJ0XSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIFN1YnBhcnRJdGVtW10+Pih7fSk7XG4gIGNvbnN0IFtuZXdTdWJwYXJ0VGl0bGUsIHNldE5ld1N1YnBhcnRUaXRsZV0gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pih7fSk7XG4gIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZXNzaW9uVGl0bGUsIHNldFNlc3Npb25UaXRsZV0gPSB1c2VTdGF0ZShcIk5ldyBNYXJraW5nIFNlc3Npb25cIik7XG4gIGNvbnN0IFtjdXN0b21UaXRsZSwgc2V0Q3VzdG9tVGl0bGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2Vzc2lvbkxpc3QsIHNldFNlc3Npb25MaXN0XSA9IHVzZVN0YXRlPGFueVtdPihbXSk7XG4gIGNvbnN0IFtzZWxlY3RlZFNlc3Npb25JZCwgc2V0U2VsZWN0ZWRTZXNzaW9uSWRdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW2FsbFNlc3Npb25zLCBzZXRBbGxTZXNzaW9uc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwZXJmb3JtYW5jZU5hbWVNYXAsIHNldFBlcmZvcm1hbmNlTmFtZU1hcF0gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pih7fSk7XG4gIGNvbnN0IFttdXNpY0R1cmF0aW9uLCBzZXRNdXNpY0R1cmF0aW9uXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBhdWRpb0NsZWFudXBSZWYgPSB1c2VSZWY8KCgpID0+IHZvaWQpIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvUmVmID0gdXNlUmVmPEhUTUxBdWRpb0VsZW1lbnQ+KG51bGwpO1xuICBjb25zdCB0aW1lbGluZVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IFttYW51YWxUaW1lbGluZUxlbmd0aCwgc2V0TWFudWFsVGltZWxpbmVMZW5ndGhdID0gdXNlU3RhdGU8bnVtYmVyPigxODApO1xuICBjb25zdCBbcGFydFRpbWVsaW5lT3ZlcnJpZGVzLCBzZXRQYXJ0VGltZWxpbmVPdmVycmlkZXNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgeyBzdGFydDogbnVtYmVyIHwgbnVsbDsgZW5kOiBudW1iZXIgfCBudWxsIH0+Pih7fSk7XG4gIGNvbnN0IFtzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXMsIHNldFN1YnBhcnRUaW1lbGluZU92ZXJyaWRlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCB7IHN0YXJ0OiBudW1iZXIgfCBudWxsOyBlbmQ6IG51bWJlciB8IG51bGwgfT4+KHt9KTtcbiAgY29uc3QgW2RyYWdnaW5nUGFydElkLCBzZXREcmFnZ2luZ1BhcnRJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgZHJhZ1N0YXRlUmVmID0gdXNlUmVmPHsgcGFydElkOiBzdHJpbmc7IGR1cmF0aW9uOiBudW1iZXI7IG9mZnNldFNlYzogbnVtYmVyIH0gfCBudWxsPihudWxsKTtcblxuICBcbiAgY29uc3QgdGltZWxpbmVMZW5ndGggPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB0aW1lczogbnVtYmVyW10gPSBbXTtcbiAgICBwYXJ0cy5mb3JFYWNoKChwYXJ0KSA9PiB7XG4gICAgICBjb25zdCBvdmVycmlkZSA9IHBhcnRUaW1lbGluZU92ZXJyaWRlc1twYXJ0LmlkXTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gb3ZlcnJpZGU/LnN0YXJ0ID8/IHBhcnQudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbDtcbiAgICAgIGNvbnN0IGVuZCA9IG92ZXJyaWRlPy5lbmQgPz8gcGFydC50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgICAgIGlmIChzdGFydCAhPT0gbnVsbCkgdGltZXMucHVzaChzdGFydCk7XG4gICAgICBpZiAoZW5kICE9PSBudWxsKSB0aW1lcy5wdXNoKGVuZCk7XG4gICAgICBpZiAoc3RhcnQgIT09IG51bGwgJiYgZW5kID09PSBudWxsKSB0aW1lcy5wdXNoKHN0YXJ0ICsgMTApO1xuICAgIH0pO1xuICAgIE9iamVjdC52YWx1ZXMoc3VicGFydHNCeVBhcnQpLmZsYXQoKS5mb3JFYWNoKChzdWIpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJyaWRlID0gc3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzW3N1Yi5pZF07XG4gICAgICBjb25zdCBzdGFydCA9IG92ZXJyaWRlPy5zdGFydCA/PyBzdWIudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbDtcbiAgICAgIGNvbnN0IGVuZCA9IG92ZXJyaWRlPy5lbmQgPz8gc3ViLnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsKSB0aW1lcy5wdXNoKHN0YXJ0KTtcbiAgICAgIGlmIChlbmQgIT09IG51bGwpIHRpbWVzLnB1c2goZW5kKTtcbiAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBlbmQgPT09IG51bGwpIHRpbWVzLnB1c2goc3RhcnQgKyAxMCk7XG4gICAgfSk7XG4gICAgY29uc3QgbWF4VGltZSA9IHRpbWVzLmxlbmd0aCA/IE1hdGgubWF4KC4uLnRpbWVzKSA6IDA7XG4gICAgaWYgKG11c2ljRHVyYXRpb24gJiYgTnVtYmVyLmlzRmluaXRlKG11c2ljRHVyYXRpb24pKSByZXR1cm4gTWF0aC5tYXgobXVzaWNEdXJhdGlvbiwgbWF4VGltZSwgMTApO1xuICAgIHJldHVybiBNYXRoLm1heChtYW51YWxUaW1lbGluZUxlbmd0aCwgbWF4VGltZSwgMTApO1xuICB9LCBbbXVzaWNEdXJhdGlvbiwgbWFudWFsVGltZWxpbmVMZW5ndGgsIHBhcnRzLCBzdWJwYXJ0c0J5UGFydCwgcGFydFRpbWVsaW5lT3ZlcnJpZGVzLCBzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNdKTtcbnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGF1ZGlvQ2xlYW51cFJlZi5jdXJyZW50Py4oKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWRyYWdnaW5nUGFydElkKSByZXR1cm47XG4gICAgY29uc3QgaGFuZGxlTW92ZSA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKCF0aW1lbGluZVJlZi5jdXJyZW50IHx8ICFkcmFnU3RhdGVSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgcmVjdCA9IHRpbWVsaW5lUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCByYXRpbyA9IChldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGg7XG4gICAgICBjb25zdCByYXcgPSByYXRpbyAqIHRpbWVsaW5lTGVuZ3RoIC0gZHJhZ1N0YXRlUmVmLmN1cnJlbnQub2Zmc2V0U2VjO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBkcmFnU3RhdGVSZWYuY3VycmVudC5kdXJhdGlvbjtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGltZWxpbmVMZW5ndGggLSBkdXJhdGlvbiwgcmF3KSk7XG4gICAgICBjb25zdCBzbmFwcGVkID0gTWF0aC5yb3VuZChzdGFydCk7XG4gICAgICBzZXRQYXJ0U3RhcnRFbmQoZHJhZ1N0YXRlUmVmLmN1cnJlbnQucGFydElkLCBzbmFwcGVkLCBzbmFwcGVkICsgZHVyYXRpb24pO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlVXAgPSAoKSA9PiB7XG4gICAgICBzZXREcmFnZ2luZ1BhcnRJZChudWxsKTtcbiAgICAgIGRyYWdTdGF0ZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZU1vdmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBoYW5kbGVVcCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZU1vdmUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZVVwKTtcbiAgICB9O1xuICB9LCBbZHJhZ2dpbmdQYXJ0SWQsIHRpbWVsaW5lTGVuZ3RoXSk7XG5cbiAgY29uc3QgaGFuZGxlQXVkaW9SZWFkeSA9IChhdWRpbzogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwpID0+IHtcbiAgICBpZiAoYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQpIGF1ZGlvQ2xlYW51cFJlZi5jdXJyZW50KCk7XG4gICAgaWYgKCFhdWRpbykge1xuICAgICAgc2V0TXVzaWNEdXJhdGlvbihudWxsKTtcbiAgICAgIGF1ZGlvQ2xlYW51cFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBOdW1iZXIuaXNGaW5pdGUoYXVkaW8uZHVyYXRpb24pID8gYXVkaW8uZHVyYXRpb24gOiBudWxsO1xuICAgICAgc2V0TXVzaWNEdXJhdGlvbihkdXJhdGlvbik7XG4gICAgfTtcbiAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkbWV0YWRhdGFcIiwgdXBkYXRlKTtcbiAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKFwiZHVyYXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB1cGRhdGUoKTtcbiAgICBhdWRpb0NsZWFudXBSZWYuY3VycmVudCA9ICgpID0+IHtcbiAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCB1cGRhdGUpO1xuICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImR1cmF0aW9uY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBhc3NpZ25lZE1hcmtDb3VudHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBjb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBPYmplY3QudmFsdWVzKGFzc2lnbm1lbnRzKS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb3VudHNbdmFsdWVdID0gKGNvdW50c1t2YWx1ZV0gfHwgMCkgKyAxO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZT8ubWFya0lkKSB7XG4gICAgICAgIGNvdW50c1t2YWx1ZS5tYXJrSWRdID0gKGNvdW50c1t2YWx1ZS5tYXJrSWRdIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY291bnRzO1xuICB9LCBbYXNzaWdubWVudHNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZmlyc3RSb3cgPSB7IGlkOiB1dWlkKCksIGxhYmVsOiBcIlJvdyAxXCIsIG5vdGU6IFwiXCIsIG1hcmtzOiBbXSB9O1xuICAgICAgc2V0Um93cyhbZmlyc3RSb3ddKTtcbiAgICAgIHNldEFjdGl2ZVJvd0lkKGZpcnN0Um93LmlkKTtcbiAgICB9XG4gIH0sIFtyb3dzLmxlbmd0aF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGN1c3RvbVRpdGxlKSByZXR1cm47XG4gICAgY29uc3QgdGl0bGUgPSBgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9IMK3ICR7cGVyZm9ybWFuY2VUaXRsZSB8fCBcIlBlcmZvcm1hbmNlXCJ9YDtcbiAgICBzZXRTZXNzaW9uVGl0bGUodGl0bGUpO1xuICB9LCBbcGVyZm9ybWFuY2VUaXRsZSwgY3VzdG9tVGl0bGVdKTtcblxuICBjb25zdCBnZXRQYXJ0U3RhcnRFbmQgPSAocGFydDogUGFydEl0ZW0pID0+IHtcbiAgICBjb25zdCBvdmVycmlkZSA9IHBhcnRUaW1lbGluZU92ZXJyaWRlc1twYXJ0LmlkXTtcbiAgICBjb25zdCBzdGFydCA9IG92ZXJyaWRlPy5zdGFydCA/PyBwYXJ0LnRpbWVwb2ludF9zZWNvbmRzID8/IG51bGw7XG4gICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBwYXJ0LnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICAgIHJldHVybiB7IHN0YXJ0LCBlbmQgfTtcbiAgfTtcblxuICBjb25zdCBzZXRQYXJ0U3RhcnRFbmQgPSAocGFydElkOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIgfCBudWxsLCBlbmQ6IG51bWJlciB8IG51bGwpID0+IHtcbiAgICBzZXRQYXJ0VGltZWxpbmVPdmVycmlkZXMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW3BhcnRJZF06IHsgc3RhcnQsIGVuZCB9LFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBzZXRTdWJwYXJ0U3RhcnRFbmQgPSAoc3VicGFydElkOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIgfCBudWxsLCBlbmQ6IG51bWJlciB8IG51bGwpID0+IHtcbiAgICBzZXRTdWJwYXJ0VGltZWxpbmVPdmVycmlkZXMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW3N1YnBhcnRJZF06IHsgc3RhcnQsIGVuZCB9LFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBnZXRTdWJwYXJ0U3RhcnRFbmQgPSAoc3ViOiBTdWJwYXJ0SXRlbSkgPT4ge1xuICAgIGNvbnN0IG92ZXJyaWRlID0gc3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzW3N1Yi5pZF07XG4gICAgY29uc3Qgc3RhcnQgPSBvdmVycmlkZT8uc3RhcnQgPz8gc3ViLnRpbWVwb2ludF9zZWNvbmRzID8/IG51bGw7XG4gICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBzdWIudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgcmV0dXJuIHsgc3RhcnQsIGVuZCB9O1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwZXJmb3JtYW5jZUlkKSByZXR1cm47XG4gICAgY29uc3QgZmV0Y2hTdWJwYXJ0cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcGFydHMubWFwKGFzeW5jIChwYXJ0KSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvc3VicGFydHM/cGFydElkPSR7cGFydC5pZH1gKTtcbiAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIFtwYXJ0LmlkLCBbXV0gYXMgY29uc3Q7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgcmV0dXJuIFtwYXJ0LmlkLCBkYXRhIHx8IFtdXSBhcyBjb25zdDtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIFN1YnBhcnRJdGVtW10+ID0ge307XG4gICAgICBlbnRyaWVzLmZvckVhY2goKFtwYXJ0SWQsIGxpc3RdKSA9PiB7XG4gICAgICAgIG1hcFtwYXJ0SWRdID0gbGlzdDtcbiAgICAgIH0pO1xuICAgICAgc2V0U3VicGFydHNCeVBhcnQobWFwKTtcbiAgICB9O1xuICAgIGZldGNoU3VicGFydHMoKTtcbiAgfSwgW3BlcmZvcm1hbmNlSWQsIHBhcnRzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXBlcmZvcm1hbmNlSWQpIHJldHVybjtcbiAgICBjb25zdCBmZXRjaFNlc3Npb25zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGFsbFNlc3Npb25zID8gXCIvYXBpL21hcmtpbmctc2Vzc2lvbnM/YWxsPTFcIiA6IGAvYXBpL21hcmtpbmctc2Vzc2lvbnM/cGVyZm9ybWFuY2VJZD0ke3BlcmZvcm1hbmNlSWR9YFxuICAgICAgKTtcbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHNldFNlc3Npb25MaXN0KGRhdGEgfHwgW10pO1xuICAgIH07XG4gICAgZmV0Y2hTZXNzaW9ucygpO1xuICB9LCBbcGVyZm9ybWFuY2VJZCwgYWxsU2Vzc2lvbnNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZldGNoUGVyZm9ybWFuY2VOYW1lcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9wZXJmb3JtYW5jZXNcIik7XG4gICAgICBpZiAoIXJlcy5vaykgcmV0dXJuO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgIChkYXRhIHx8IFtdKS5mb3JFYWNoKChwZXJmOiBhbnkpID0+IHtcbiAgICAgICAgbWFwW3BlcmYuaWRdID0gcGVyZi50aXRsZSB8fCBcIlBlcmZvcm1hbmNlXCI7XG4gICAgICB9KTtcbiAgICAgIHNldFBlcmZvcm1hbmNlTmFtZU1hcChtYXApO1xuICAgIH07XG4gICAgZmV0Y2hQZXJmb3JtYW5jZU5hbWVzKCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNvbnN0IHRhZyA9IHRhcmdldD8udGFnTmFtZT8udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICh0YWcgPT09IFwiaW5wdXRcIiB8fCB0YWcgPT09IFwidGV4dGFyZWFcIiB8fCB0YWcgPT09IFwic2VsZWN0XCIpIHJldHVybjtcblxuICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiU3BhY2VcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCByb3dJZCA9IGFjdGl2ZVJvd0lkIHx8IHJvd3NbMF0/LmlkO1xuICAgICAgICBpZiAoIXJvd0lkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG1hcms6IE1hcmsgPSB7XG4gICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICB0aW1lOiBjdXJyZW50VGltZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0Um93cygocHJldikgPT5cbiAgICAgICAgICBwcmV2Lm1hcCgocm93KSA9PlxuICAgICAgICAgICAgcm93LmlkID09PSByb3dJZCA/IHsgLi4ucm93LCBtYXJrczogWy4uLnJvdy5tYXJrcywgbWFya10gfSA6IHJvd1xuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJlXCIgfHwgZXZlbnQua2V5ID09PSBcIkVcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBuZXh0SW5kZXggPSByb3dzLmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnN0IG5ld1JvdzogTWFya1JvdyA9IHtcbiAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgIGxhYmVsOiBgUm93ICR7bmV4dEluZGV4fWAsXG4gICAgICAgICAgbm90ZTogXCJcIixcbiAgICAgICAgICBtYXJrczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldFJvd3MoKHByZXYpID0+IHtcbiAgICAgICAgICBjb25zdCBpZHggPSBhY3RpdmVSb3dJZCA/IHByZXYuZmluZEluZGV4KChyKSA9PiByLmlkID09PSBhY3RpdmVSb3dJZCkgOiBwcmV2Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBbLi4ucHJldiwgbmV3Um93XTtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICAgIG5leHQuc3BsaWNlKGlkeCArIDEsIDAsIG5ld1Jvdyk7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRBY3RpdmVSb3dJZChuZXdSb3cuaWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgfSwgW2FjdGl2ZVJvd0lkLCBjdXJyZW50VGltZSwgcm93c10pO1xuXG4gIGNvbnN0IGhhbmRsZURyb3BUb1JvdyA9IChyb3dJZDogc3RyaW5nLCBtYXJrSWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFJvd3MoKHByZXYpID0+IHtcbiAgICAgIGxldCBtb3ZlZDogTWFyayB8IG51bGwgPSBudWxsO1xuICAgICAgY29uc3QgcmVtb3ZlZCA9IHByZXYubWFwKChyb3cpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dE1hcmtzID0gcm93Lm1hcmtzLmZpbHRlcigobSkgPT4ge1xuICAgICAgICAgIGlmIChtLmlkID09PSBtYXJrSWQpIHtcbiAgICAgICAgICAgIG1vdmVkID0gbTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyAuLi5yb3csIG1hcmtzOiBuZXh0TWFya3MgfTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFtb3ZlZCkgcmV0dXJuIHByZXY7XG4gICAgICByZXR1cm4gcmVtb3ZlZC5tYXAoKHJvdykgPT5cbiAgICAgICAgcm93LmlkID09PSByb3dJZCA/IHsgLi4ucm93LCBtYXJrczogWy4uLnJvdy5tYXJrcywgbW92ZWQhXSB9IDogcm93XG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVJlbW92ZU1hcmsgPSAocm93SWQ6IHN0cmluZywgbWFya0lkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRSb3dzKChwcmV2KSA9PlxuICAgICAgcHJldi5tYXAoKHJvdykgPT5cbiAgICAgICAgcm93LmlkID09PSByb3dJZCA/IHsgLi4ucm93LCBtYXJrczogcm93Lm1hcmtzLmZpbHRlcigobSkgPT4gbS5pZCAhPT0gbWFya0lkKSB9IDogcm93XG4gICAgICApXG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBnZXRNYXJrVGltZUJ5SWQgPSAobWFya0lkOiBzdHJpbmcpID0+IHtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICBjb25zdCBtYXJrID0gcm93Lm1hcmtzLmZpbmQoKG0pID0+IG0uaWQgPT09IG1hcmtJZCk7XG4gICAgICBpZiAobWFyaykgcmV0dXJuIG1hcmsudGltZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgY29uc3QgdGltZWxpbmVEZWZhdWx0RHVyYXRpb24gPSAxMDtcblxuICBjb25zdCB0aW1lbGluZURhdGEgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBhc3NpZ25lZDogQXJyYXk8e1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgICBlbmQ6IG51bWJlcjtcbiAgICAgIG1pc3NpbmdFbmQ6IGJvb2xlYW47XG4gICAgfT4gPSBbXTtcbiAgICBjb25zdCB1bmFzc2lnbmVkOiBQYXJ0SXRlbVtdID0gW107XG5cbiAgICBwYXJ0cy5mb3JFYWNoKChwYXJ0KSA9PiB7XG4gICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGdldFBhcnRTdGFydEVuZChwYXJ0KTtcbiAgICAgIGlmIChzdGFydCA9PT0gbnVsbCkge1xuICAgICAgICB1bmFzc2lnbmVkLnB1c2gocGFydCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVkRW5kID0gZW5kID8/IHN0YXJ0ICsgdGltZWxpbmVEZWZhdWx0RHVyYXRpb247XG4gICAgICBhc3NpZ25lZC5wdXNoKHtcbiAgICAgICAgaWQ6IHBhcnQuaWQsXG4gICAgICAgIG5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGVuZDogcmVzb2x2ZWRFbmQsXG4gICAgICAgIG1pc3NpbmdFbmQ6IGVuZCA9PT0gbnVsbCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgYXNzaWduZWQuc29ydCgoYSwgYikgPT4gYS5zdGFydCAtIGIuc3RhcnQpO1xuXG4gICAgY29uc3Qgcm93czogQXJyYXk8eyBpZDogc3RyaW5nOyBpdGVtczogdHlwZW9mIGFzc2lnbmVkIH0+ID0gW107XG4gICAgYXNzaWduZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgbGV0IHBsYWNlZCA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBsYXN0ID0gcm93Lml0ZW1zW3Jvdy5pdGVtcy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCFsYXN0IHx8IGl0ZW0uc3RhcnQgPj0gbGFzdC5lbmQpIHtcbiAgICAgICAgICByb3cuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICBwbGFjZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXBsYWNlZCkge1xuICAgICAgICByb3dzLnB1c2goeyBpZDogdXVpZCgpLCBpdGVtczogW2l0ZW1dIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgcm93cywgdW5hc3NpZ25lZCB9O1xuICB9LCBbcGFydHMsIHBhcnRUaW1lbGluZU92ZXJyaWRlc10pO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZUFzc2lnbm1lbnRzID0gKHJvd3NTbmFwc2hvdDogTWFya1Jvd1tdLCByYXc6IFJlY29yZDxzdHJpbmcsIEFzc2lnbm1lbnRWYWx1ZT4pID0+IHtcbiAgICBjb25zdCBub3JtYWxpemVkOiBSZWNvcmQ8c3RyaW5nLCBBc3NpZ25tZW50VmFsdWU+ID0ge307XG4gICAgT2JqZWN0LmVudHJpZXMocmF3IHx8IHt9KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgbWFyayA9IHJvd3NTbmFwc2hvdC5mbGF0TWFwKChyKSA9PiByLm1hcmtzKS5maW5kKChtKSA9PiBtLmlkID09PSB2YWx1ZSk7XG4gICAgICAgIGlmIChtYXJrKSB7XG4gICAgICAgICAgbm9ybWFsaXplZFtrZXldID0geyBtYXJrSWQ6IHZhbHVlLCB0aW1lOiBtYXJrLnRpbWUgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgbm9ybWFsaXplZFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG4gIH07XG5cbiAgY29uc3QgZ2V0QXNzaWduZWRUaW1lID0gKHRhcmdldEtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBhc3NpZ25tZW50c1t0YXJnZXRLZXldO1xuICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgY29uc3QgbWFyayA9IHJvdy5tYXJrcy5maW5kKChtKSA9PiBtLmlkID09PSB2YWx1ZSk7XG4gICAgICAgIGlmIChtYXJrKSByZXR1cm4gbWFyay50aW1lO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZS50aW1lID8/IG51bGw7XG4gIH07XG5cbiAgY29uc3QgZ2V0RXhpc3RpbmdUaW1lID0gKHR5cGU6IFwicGFydFwiIHwgXCJzdWJwYXJ0XCIsIGlkOiBzdHJpbmcsIGZpZWxkOiBcInN0YXJ0XCIgfCBcImVuZFwiKSA9PiB7XG4gICAgaWYgKHR5cGUgPT09IFwicGFydFwiKSB7XG4gICAgICBjb25zdCBwYXJ0ID0gcGFydHMuZmluZCgocCkgPT4gcC5pZCA9PT0gaWQpO1xuICAgICAgaWYgKCFwYXJ0KSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiBmaWVsZCA9PT0gXCJzdGFydFwiID8gcGFydC50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsIDogcGFydC50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgc3ViID0gT2JqZWN0LnZhbHVlcyhzdWJwYXJ0c0J5UGFydCkuZmxhdCgpLmZpbmQoKHMpID0+IHMuaWQgPT09IGlkKTtcbiAgICBpZiAoIXN1YikgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGZpZWxkID09PSBcInN0YXJ0XCIgPyBzdWIudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbCA6IHN1Yi50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgfTtcblxuICBjb25zdCBhc3NpZ25NYXJrVG9UYXJnZXQgPSAodGFyZ2V0S2V5OiBzdHJpbmcsIG1hcmtJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgW3R5cGUsIGlkLCBmaWVsZF0gPSB0YXJnZXRLZXkuc3BsaXQoXCI6XCIpIGFzIFtcInBhcnRcIiB8IFwic3VicGFydFwiLCBzdHJpbmcsIFwic3RhcnRcIiB8IFwiZW5kXCJdO1xuICAgIGNvbnN0IG1hcmtUaW1lID0gcm93cy5mbGF0TWFwKChyKSA9PiByLm1hcmtzKS5maW5kKChtKSA9PiBtLmlkID09PSBtYXJrSWQpPy50aW1lO1xuICAgIGlmIChtYXJrVGltZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICBjb25zdCBvcHBvc2l0ZUZpZWxkOiBcInN0YXJ0XCIgfCBcImVuZFwiID0gZmllbGQgPT09IFwic3RhcnRcIiA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XG4gICAgY29uc3QgYXNzaWduZWRPcHBvc2l0ZSA9IGdldEFzc2lnbmVkVGltZShgJHt0eXBlfToke2lkfToke29wcG9zaXRlRmllbGR9YCk7XG4gICAgY29uc3QgZXhpc3RpbmdPcHBvc2l0ZSA9IGdldEV4aXN0aW5nVGltZSh0eXBlLCBpZCwgb3Bwb3NpdGVGaWVsZCk7XG4gICAgY29uc3Qgb3Bwb3NpdGVUaW1lID0gYXNzaWduZWRPcHBvc2l0ZSA/PyBleGlzdGluZ09wcG9zaXRlO1xuXG4gICAgaWYgKGZpZWxkID09PSBcImVuZFwiICYmIG9wcG9zaXRlVGltZSAhPT0gbnVsbCAmJiBtYXJrVGltZSA8IG9wcG9zaXRlVGltZSkge1xuICAgICAgYWxlcnQoXCJFbmQgdGltZSBjYW5ub3QgYmUgYmVmb3JlIHN0YXJ0IHRpbWUuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZmllbGQgPT09IFwic3RhcnRcIiAmJiBvcHBvc2l0ZVRpbWUgIT09IG51bGwgJiYgbWFya1RpbWUgPiBvcHBvc2l0ZVRpbWUpIHtcbiAgICAgIGFsZXJ0KFwiU3RhcnQgdGltZSBjYW5ub3QgYmUgYWZ0ZXIgZW5kIHRpbWUuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldEFzc2lnbm1lbnRzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbdGFyZ2V0S2V5XTogeyBtYXJrSWQsIHRpbWU6IG1hcmtUaW1lIH0gfSkpO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyQXNzaWdubWVudCA9ICh0YXJnZXRLZXk6IHN0cmluZykgPT4ge1xuICAgIHNldEFzc2lnbm1lbnRzKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCBuZXh0ID0geyAuLi5wcmV2IH07XG4gICAgICBkZWxldGUgbmV4dFt0YXJnZXRLZXldO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyVGltZVRhcmdldCA9ICh0eXBlOiBcInBhcnRcIiB8IFwic3VicGFydFwiLCBpZDogc3RyaW5nLCBmaWVsZDogXCJzdGFydFwiIHwgXCJlbmRcIikgPT4ge1xuICAgIGNvbnN0IHRhcmdldEtleSA9IGAke3R5cGV9OiR7aWR9OiR7ZmllbGR9YDtcbiAgICBjb25zdCBhc3NpZ25lZFZhbHVlID0gYXNzaWdubWVudHNbdGFyZ2V0S2V5XTtcbiAgICBjb25zdCBhc3NpZ25lZE1hcmtJZCA9IHR5cGVvZiBhc3NpZ25lZFZhbHVlID09PSBcInN0cmluZ1wiID8gYXNzaWduZWRWYWx1ZSA6IGFzc2lnbmVkVmFsdWU/Lm1hcmtJZDtcbiAgICBjb25zdCBhc3NpZ25lZFRpbWUgPSBnZXRBc3NpZ25lZFRpbWUodGFyZ2V0S2V5KTtcbiAgICBjb25zdCBleGlzdGluZ1RpbWUgPSBnZXRFeGlzdGluZ1RpbWUodHlwZSwgaWQsIGZpZWxkKTtcbiAgICBjb25zdCBzaG93VGltZSA9IGFzc2lnbmVkVGltZSAhPT0gbnVsbCA/IGFzc2lnbmVkVGltZSA6IGV4aXN0aW5nVGltZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17YGJvcmRlciBib3JkZXItZGFzaGVkIHJvdW5kZWQgcHgtMiBweS0xIHRleHQteHMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgJHtcbiAgICAgICAgICBhc3NpZ25lZE1hcmtJZCA/IFwiYm9yZGVyLWVtZXJhbGQtNDAwIGJnLWVtZXJhbGQtNTBcIiA6IFwiYm9yZGVyLWdyYXktMzAwIGJnLXdoaXRlXCJcbiAgICAgICAgfWB9XG4gICAgICAgIG9uRHJhZ092ZXI9eyhlKSA9PiBlLnByZXZlbnREZWZhdWx0KCl9XG4gICAgICAgIG9uRHJvcD17KGUpID0+IHtcbiAgICAgICAgICBjb25zdCBtYXJrSWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwibWFya0lkXCIpO1xuICAgICAgICAgIGlmICghbWFya0lkKSByZXR1cm47XG4gICAgICAgICAgYXNzaWduTWFya1RvVGFyZ2V0KHRhcmdldEtleSwgbWFya0lkKTtcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCB1cHBlcmNhc2VcIj57ZmllbGR9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj5cbiAgICAgICAgICB7c2hvd1RpbWUgIT09IG51bGwgPyBmb3JtYXRUaW1lKHNob3dUaW1lKSA6IFwiLS06LS1cIn1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICB7YXNzaWduZWRNYXJrSWQgJiYgKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTEgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIHRleHQtWzEwcHhdIGJnLWVtZXJhbGQtNjAwIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgIENoaXBcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICl9XG4gICAgICAgIHthc3NpZ25lZE1hcmtJZCAmJiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gY2xlYXJBc3NpZ25tZW50KHRhcmdldEtleSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtbC1hdXRvIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC04MDBcIlxuICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIMOD4oCUXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNhdmVTZXNzaW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBwZXJmb3JtYW5jZV9pZDogcGVyZm9ybWFuY2VJZCxcbiAgICAgIHRpdGxlOiBzZXNzaW9uVGl0bGUgfHwgXCJNYXJraW5nIFNlc3Npb25cIixcbiAgICAgIHJvd3MsXG4gICAgICBhc3NpZ25tZW50cyxcbiAgICB9O1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9tYXJraW5nLXNlc3Npb25zXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KTtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHNldFNlc3Npb25MaXN0KChwcmV2KSA9PiBbY3JlYXRlZCwgLi4ucHJldl0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVBcHBseSA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRTYXZpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZXNCeVBhcnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgIGNvbnN0IHVwZGF0ZXNCeVN1YnBhcnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgICAgT2JqZWN0LmVudHJpZXMoYXNzaWdubWVudHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjb25zdCBbdHlwZSwgaWQsIGZpZWxkXSA9IGtleS5zcGxpdChcIjpcIikgYXMgW1wicGFydFwiIHwgXCJzdWJwYXJ0XCIsIHN0cmluZywgXCJzdGFydFwiIHwgXCJlbmRcIl07XG4gICAgICAgIGNvbnN0IG1hcmtJZCA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlIDogdmFsdWU/Lm1hcmtJZDtcbiAgICAgICAgY29uc3QgbWFya1RpbWUgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICA/IHJvd3MuZmxhdE1hcCgocikgPT4gci5tYXJrcykuZmluZCgobSkgPT4gbS5pZCA9PT0gdmFsdWUpPy50aW1lXG4gICAgICAgICAgOiB2YWx1ZT8udGltZTtcbiAgICAgICAgaWYgKG1hcmtUaW1lID09PSB1bmRlZmluZWQgfHwgbWFya1RpbWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicGFydFwiKSB7XG4gICAgICAgICAgdXBkYXRlc0J5UGFydFtpZF0gPSB1cGRhdGVzQnlQYXJ0W2lkXSB8fCB7fTtcbiAgICAgICAgICB1cGRhdGVzQnlQYXJ0W2lkXVtmaWVsZCA9PT0gXCJzdGFydFwiID8gXCJ0aW1lcG9pbnRfc2Vjb25kc1wiIDogXCJ0aW1lcG9pbnRfZW5kX3NlY29uZHNcIl0gPSBtYXJrVGltZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVzQnlTdWJwYXJ0W2lkXSA9IHVwZGF0ZXNCeVN1YnBhcnRbaWRdIHx8IHt9O1xuICAgICAgICAgIHVwZGF0ZXNCeVN1YnBhcnRbaWRdW2ZpZWxkID09PSBcInN0YXJ0XCIgPyBcInRpbWVwb2ludF9zZWNvbmRzXCIgOiBcInRpbWVwb2ludF9lbmRfc2Vjb25kc1wiXSA9IG1hcmtUaW1lO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdXBkYXRlZFBhcnRzOiBQYXJ0SXRlbVtdID0gW107XG4gICAgICBjb25zdCB1cGRhdGVkU3VicGFydHM6IFN1YnBhcnRJdGVtW10gPSBbXTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBPYmplY3QuZW50cmllcyh1cGRhdGVzQnlQYXJ0KS5tYXAoYXN5bmMgKFtwYXJ0SWQsIHBheWxvYWRdKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvcGFydHMvJHtwYXJ0SWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICB1cGRhdGVkUGFydHMucHVzaCh1cGRhdGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgT2JqZWN0LmVudHJpZXModXBkYXRlc0J5U3VicGFydCkubWFwKGFzeW5jIChbc3VicGFydElkLCBwYXlsb2FkXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL3N1YnBhcnRzLyR7c3VicGFydElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZWQpIHVwZGF0ZWRTdWJwYXJ0cy5wdXNoKHVwZGF0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGlmICh1cGRhdGVkUGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICBvblBhcnRzVXBkYXRlZChcbiAgICAgICAgICBwYXJ0cy5tYXAoKHBhcnQpID0+IHVwZGF0ZWRQYXJ0cy5maW5kKCh1KSA9PiB1LmlkID09PSBwYXJ0LmlkKSB8fCBwYXJ0KVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHVwZGF0ZWRTdWJwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNldFN1YnBhcnRzQnlQYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9O1xuICAgICAgICAgIHVwZGF0ZWRTdWJwYXJ0cy5mb3JFYWNoKChzdWIpID0+IHtcbiAgICAgICAgICAgIG5leHRbc3ViLnBhcnRfaWRdID0gKG5leHRbc3ViLnBhcnRfaWRdIHx8IFtdKS5tYXAoKHMpID0+XG4gICAgICAgICAgICAgIHMuaWQgPT09IHN1Yi5pZCA/IHsgLi4ucywgLi4uc3ViIH0gOiBzXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVNhdmVUaW1lbGluZSA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRTYXZpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZXNCeVBhcnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgIGNvbnN0IHVwZGF0ZXNCeVN1YnBhcnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgICAgcGFydHMuZm9yRWFjaCgocGFydCkgPT4ge1xuICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGdldFBhcnRTdGFydEVuZChwYXJ0KTtcbiAgICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsKSB7XG4gICAgICAgICAgdXBkYXRlc0J5UGFydFtwYXJ0LmlkXSA9IHtcbiAgICAgICAgICAgIHRpbWVwb2ludF9zZWNvbmRzOiBzdGFydCxcbiAgICAgICAgICAgIHRpbWVwb2ludF9lbmRfc2Vjb25kczogZW5kID8/IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIE9iamVjdC52YWx1ZXMoc3VicGFydHNCeVBhcnQpLmZsYXQoKS5mb3JFYWNoKChzdWIpID0+IHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGUgPSBzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNbc3ViLmlkXTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBvdmVycmlkZT8uc3RhcnQgPz8gc3ViLnRpbWVwb2ludF9zZWNvbmRzID8/IG51bGw7XG4gICAgICAgIGNvbnN0IGVuZCA9IG92ZXJyaWRlPy5lbmQgPz8gc3ViLnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgICBpZiAoc3RhcnQgIT09IG51bGwpIHtcbiAgICAgICAgICB1cGRhdGVzQnlTdWJwYXJ0W3N1Yi5pZF0gPSB7XG4gICAgICAgICAgICB0aW1lcG9pbnRfc2Vjb25kczogc3RhcnQsXG4gICAgICAgICAgICB0aW1lcG9pbnRfZW5kX3NlY29uZHM6IGVuZCA/PyBudWxsLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVkUGFydHM6IFBhcnRJdGVtW10gPSBbXTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBPYmplY3QuZW50cmllcyh1cGRhdGVzQnlQYXJ0KS5tYXAoYXN5bmMgKFtwYXJ0SWQsIHBheWxvYWRdKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvcGFydHMvJHtwYXJ0SWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICB1cGRhdGVkUGFydHMucHVzaCh1cGRhdGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgT2JqZWN0LmVudHJpZXModXBkYXRlc0J5U3VicGFydCkubWFwKGFzeW5jIChbc3VicGFydElkLCBwYXlsb2FkXSkgPT4ge1xuICAgICAgICAgIGF3YWl0IGZldGNoKGAvYXBpL3N1YnBhcnRzLyR7c3VicGFydElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgaWYgKHVwZGF0ZWRQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9uUGFydHNVcGRhdGVkKFxuICAgICAgICAgIHBhcnRzLm1hcCgocGFydCkgPT4gdXBkYXRlZFBhcnRzLmZpbmQoKHUpID0+IHUuaWQgPT09IHBhcnQuaWQpIHx8IHBhcnQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFNhdmluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgeGw6Z3JpZC1jb2xzLVszMjBweF8xZnJdIGdhcC02XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj5QYXJ0cyAmIFN1YnBhcnRzPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG1iLTRcIj5cbiAgICAgICAgICBEcm9wIHRpbWUgY2hpcHMgb250byBTdGFydC9FbmQuIE9ubHkgZHJvcHBlZCBjaGlwcyBjaGFuZ2UgdGltZXBvaW50cyB3aGVuIHNhdmVkLlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICB7cGFydHMubWFwKChwYXJ0KSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17cGFydC5pZH0gY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+e3BhcnQubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC0yIG1iLTJcIj5cbiAgICAgICAgICAgICAgICB7cmVuZGVyVGltZVRhcmdldChcInBhcnRcIiwgcGFydC5pZCwgXCJzdGFydFwiKX1cbiAgICAgICAgICAgICAgICB7cmVuZGVyVGltZVRhcmdldChcInBhcnRcIiwgcGFydC5pZCwgXCJlbmRcIil9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7KHN1YnBhcnRzQnlQYXJ0W3BhcnQuaWRdIHx8IFtdKS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgc3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICB7KHN1YnBhcnRzQnlQYXJ0W3BhcnQuaWRdIHx8IFtdKS5tYXAoKHN1YikgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17c3ViLmlkfSBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWdyYXktMTAwIHJvdW5kZWQgcC0yIGJnLWdyYXktNTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwXCI+e3N1Yi50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTIgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclRpbWVUYXJnZXQoXCJzdWJwYXJ0XCIsIHN1Yi5pZCwgXCJzdGFydFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJUaW1lVGFyZ2V0KFwic3VicGFydFwiLCBzdWIuaWQsIFwiZW5kXCIpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtuZXdTdWJwYXJ0VGl0bGVbcGFydC5pZF0gfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgc2V0TmV3U3VicGFydFRpdGxlKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbcGFydC5pZF06IGUudGFyZ2V0LnZhbHVlIH0pKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBZGQgc3VicGFydFwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXhzXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSAobmV3U3VicGFydFRpdGxlW3BhcnQuaWRdIHx8IFwiXCIpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aXRsZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcIi9hcGkvc3VicGFydHNcIiwge1xuICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGFydF9pZDogcGFydC5pZCwgdGl0bGUgfSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U3VicGFydHNCeVBhcnQoKHByZXYpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgW3BhcnQuaWRdOiBbLi4uKHByZXZbcGFydC5pZF0gfHwgW10pLCBjcmVhdGVkXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0TmV3U3VicGFydFRpdGxlKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbcGFydC5pZF06IFwiXCIgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcm91bmRlZCB0ZXh0LXhzXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBBZGRcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMFwiPk1hcmtpbmcgU2Vzc2lvbjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC1hdXRvIGZsZXggZ2FwLTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHZhbHVlPXtzZXNzaW9uVGl0bGV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRTZXNzaW9uVGl0bGUoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgc2V0Q3VzdG9tVGl0bGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQtc21cIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2Vzc2lvbiB0aXRsZVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTYXZlU2Vzc2lvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEgYmctZ3JheS05MDAgdGV4dC13aGl0ZSByb3VuZGVkIHRleHQtc21cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2F2ZSBTZXNzaW9uXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQXBwbHl9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIHRleHQtc20gZGlzYWJsZWQ6YmctZ3JheS00MDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3NhdmluZyA/IFwiU2F2aW5nLi4uXCIgOiBcIkFwcGx5IFRpbWVwb2ludHNcIn1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0yXCI+XG4gICAgICAgICAgICBIb3RrZXlzOiBTcGFjZSA9IG1hcmsgdGltZSwgRSA9IG5ldyByb3cuIFdvcmtzIHdoaWxlIG11c2ljIGlzIHBsYXlpbmcgb3IgcGF1c2VkLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTFcIj5cbiAgICAgICAgICAgIE11c2ljIGxlbmd0aDoge211c2ljRHVyYXRpb24gPyBmb3JtYXRUaW1lKG11c2ljRHVyYXRpb24pIDogXCLDr8K/wr1cIn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgYmctZ3JheS01MCBib3JkZXIgYm9yZGVyLWRhc2hlZCBib3JkZXItZ3JheS0zMDAgcm91bmRlZCBwLTMgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICBXYXZlZm9ybSB2aWV3OiBub3QgYXZhaWxhYmxlIHlldC4gV2UgY2FuIGFkZCBhIHdhdmVmb3JtIHByZXZpZXcgaW4gYSBmb2xsb3ctdXAuXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRTZXNzaW9uSWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRTZXNzaW9uSWQoaWQpO1xuICAgICAgICAgICAgICAgIGlmICghaWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9tYXJraW5nLXNlc3Npb25zLyR7aWR9YCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICBzZXRTZXNzaW9uVGl0bGUoZGF0YS50aXRsZSB8fCBcIk1hcmtpbmcgU2Vzc2lvblwiKTtcbiAgICAgICAgICAgICAgICBzZXRDdXN0b21UaXRsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Um93cyA9IChkYXRhLnJvd3MgfHwgW10pLm1hcCgocm93OiBNYXJrUm93KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgLi4ucm93LFxuICAgICAgICAgICAgICAgICAgbm90ZTogcm93Lm5vdGUgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgc2V0Um93cyhuZXh0Um93cyk7XG4gICAgICAgICAgICAgICAgc2V0QXNzaWdubWVudHMobm9ybWFsaXplQXNzaWdubWVudHMobmV4dFJvd3MsIGRhdGEuYXNzaWdubWVudHMgfHwge30pKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPkxvYWQgc2F2ZWQgc2Vzc2lvbi4uLjwvb3B0aW9uPlxuICAgICAgICAgICAgICB7c2Vzc2lvbkxpc3QubWFwKChzZXNzKSA9PiAoXG4gICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3Nlc3MuaWR9IHZhbHVlPXtzZXNzLmlkfT5cbiAgICAgICAgICAgICAgICAgIHtzZXNzLnRpdGxlIHx8IFwiVW50aXRsZWRcIn0gw6/Cv8K9IHtwZXJmb3JtYW5jZU5hbWVNYXBbc2Vzcy5wZXJmb3JtYW5jZV9pZF0gfHwgXCJQZXJmb3JtYW5jZVwifSDDr8K/wr0ge25ldyBEYXRlKHNlc3MuY3JlYXRlZF9hdCkudG9Mb2NhbGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICBjaGVja2VkPXthbGxTZXNzaW9uc31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFsbFNlc3Npb25zKGUudGFyZ2V0LmNoZWNrZWQpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNCB3LTRcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICBTaG93IHNlc3Npb25zIGZyb20gYWxsIHBlcmZvcm1hbmNlc1xuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0geyBpZDogdXVpZCgpLCBsYWJlbDogXCJSb3cgMVwiLCBub3RlOiBcIlwiLCBtYXJrczogW10gfTtcbiAgICAgICAgICAgICAgICBzZXRSb3dzKFtmaXJzdFJvd10pO1xuICAgICAgICAgICAgICAgIHNldEFjdGl2ZVJvd0lkKGZpcnN0Um93LmlkKTtcbiAgICAgICAgICAgICAgICBzZXRBc3NpZ25tZW50cyh7fSk7XG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRTZXNzaW9uSWQoXCJcIik7XG4gICAgICAgICAgICAgICAgc2V0Q3VzdG9tVGl0bGUoZmFsc2UpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQtc21cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBOZXcgU2Vzc2lvblxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgbWItMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMFwiPlRpbWVsaW5lPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLWF1dG8gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgeyFtdXNpY0R1cmF0aW9uICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+VGltZWxpbmUgbGVuZ3RoIChzZWMpPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICBtaW49ezEwfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bWFudWFsVGltZWxpbmVMZW5ndGh9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TWFudWFsVGltZWxpbmVMZW5ndGgocGFyc2VJbnQoZS50YXJnZXQudmFsdWUgfHwgXCIwXCIsIDEwKSB8fCAwKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0yMCBweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQteHNcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNhdmVUaW1lbGluZX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcm91bmRlZCB0ZXh0LXNtIGRpc2FibGVkOmJnLWdyYXktNDAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzYXZpbmcgPyBcIlNhdmluZy4uLlwiIDogXCJTYXZlIFRpbWVsaW5lXCJ9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIERyYWcgcGFydHMgdG8gbW92ZSB0aGVtLiBEcm9wIGNoaXBzIG9yIHR5cGUgdGltZXMgdG8gc2V0IFN0YXJ0L0VuZC5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgc3BhY2UteS00XCI+XG4gICAgICAgICAgICB7dGltZWxpbmVEYXRhLnJvd3MubWFwKChyb3csIHJvd0luZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtyb3cuaWR9IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtZ3JheS02MDBcIj5Sb3cge3Jvd0luZGV4ICsgMX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICByZWY9e3Jvd0luZGV4ID09PSAwID8gdGltZWxpbmVSZWYgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZSBoLTI0IGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCBiZy1ncmF5LTUwIG92ZXJmbG93LWhpZGRlblwiXG4gICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICAgICAgICAgICAgb25Ecm9wPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0SWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwicGFydElkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnRJZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRGl2RWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyByZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRpbWVsaW5lTGVuZ3RoIC0gdGltZWxpbmVEZWZhdWx0RHVyYXRpb24sIE1hdGgucm91bmQocmF0aW8gKiB0aW1lbGluZUxlbmd0aCkpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzLmZpbmQoKHApID0+IHAuaWQgPT09IHBhcnRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3RhcnQ6IGV4aXN0aW5nU3RhcnQsIGVuZDogZXhpc3RpbmdFbmQgfSA9IHBhcnQgPyBnZXRQYXJ0U3RhcnRFbmQocGFydCkgOiB7IHN0YXJ0OiBudWxsLCBlbmQ6IG51bGwgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBleGlzdGluZ1N0YXJ0ICE9PSBudWxsICYmIGV4aXN0aW5nRW5kICE9PSBudWxsID8gZXhpc3RpbmdFbmQgLSBleGlzdGluZ1N0YXJ0IDogdGltZWxpbmVEZWZhdWx0RHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHNldFBhcnRTdGFydEVuZChwYXJ0SWQsIHN0YXJ0LCBzdGFydCArIE1hdGgubWF4KDEsIGR1cmF0aW9uKSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtyb3cuaXRlbXMubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSAoaXRlbS5zdGFydCAvIHRpbWVsaW5lTGVuZ3RoKSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSAoKGl0ZW0uZW5kIC0gaXRlbS5zdGFydCkgLyB0aW1lbGluZUxlbmd0aCkgKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0cy5maW5kKChwKSA9PiBwLmlkID09PSBpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGFydHMgPSBwYXJ0ID8gc3VicGFydHNCeVBhcnRbcGFydC5pZF0gfHwgW10gOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSBwYXJ0ID8gZ2V0UGFydFN0YXJ0RW5kKHBhcnQpIDogeyBzdGFydDogbnVsbCwgZW5kOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYWJzb2x1dGUgdG9wLTIgaC1bODRweF0gcm91bmRlZCBib3JkZXIgcHgtMiBweS0xIGJnLXdoaXRlIHNoYWRvdy1zbSBjdXJzb3ItbW92ZSAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm1pc3NpbmdFbmQgPyBcImJvcmRlci1ibHVlLTQwMFwiIDogXCJib3JkZXItZ3JheS0zMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBsZWZ0OiBgJHtsZWZ0fSVgLCB3aWR0aDogYCR7TWF0aC5tYXgoNCwgd2lkdGgpfSVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbXCJJTlBVVFwiLCBcIlRFWFRBUkVBXCIsIFwiQlVUVE9OXCJdLmluY2x1ZGVzKHRhcmdldC50YWdOYW1lKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRpbWVsaW5lUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRpbWVsaW5lUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyByZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRTZWMgPSByYXRpbyAqIHRpbWVsaW5lTGVuZ3RoIC0gaXRlbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXRlUmVmLmN1cnJlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydElkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBpdGVtLmVuZCAtIGl0ZW0uc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0U2VjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXREcmFnZ2luZ1BhcnRJZChpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCB0cnVuY2F0ZVwiPntpdGVtLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgZ3JpZCBncmlkLWNvbHMtMiBnYXAtMSB0ZXh0LVsxMHB4XVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYm9yZGVyIGJvcmRlci1kYXNoZWQgcm91bmRlZCBweC0xIHB5LTAuNSAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5taXNzaW5nRW5kID8gXCJib3JkZXItYmx1ZS00MDAgYmctYmx1ZS01MFwiIDogXCJib3JkZXItZ3JheS0zMDAgYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9eyhlKSA9PiBlLnByZXZlbnREZWZhdWx0KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0lkID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIm1hcmtJZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWFya0lkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrVGltZSA9IGdldE1hcmtUaW1lQnlJZChtYXJrSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtUaW1lID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0RW5kID0gZW5kICE9PSBudWxsICYmIG1hcmtUaW1lID4gZW5kID8gbWFya1RpbWUgOiBlbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQYXJ0U3RhcnRFbmQoaXRlbS5pZCwgbWFya1RpbWUsIG5leHRFbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFydDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLTEgdy0xMiBiZy10cmFuc3BhcmVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3RhcnQgIT09IG51bGwgPyBmb3JtYXRUaW1lKHN0YXJ0KSA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZVRpbWVTdHJpbmcoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCAhPT0gbnVsbCAmJiB2YWx1ZSA+IGVuZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQYXJ0U3RhcnRFbmQoaXRlbS5pZCwgdmFsdWUsIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYm9yZGVyIGJvcmRlci1kYXNoZWQgcm91bmRlZCBweC0xIHB5LTAuNSAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5taXNzaW5nRW5kID8gXCJib3JkZXItYmx1ZS00MDAgYmctYmx1ZS01MFwiIDogXCJib3JkZXItZ3JheS0zMDAgYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9eyhlKSA9PiBlLnByZXZlbnREZWZhdWx0KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0lkID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIm1hcmtJZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWFya0lkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrVGltZSA9IGdldE1hcmtUaW1lQnlJZChtYXJrSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtUaW1lID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgIT09IG51bGwgJiYgbWFya1RpbWUgPCBzdGFydCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGFydFN0YXJ0RW5kKGl0ZW0uaWQsIHN0YXJ0LCBtYXJrVGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLTEgdy0xMiBiZy10cmFuc3BhcmVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZW5kICE9PSBudWxsID8gZm9ybWF0VGltZShlbmQpIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlVGltZVN0cmluZyhlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgIT09IG51bGwgJiYgdmFsdWUgPCBzdGFydCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQYXJ0U3RhcnRFbmQoaXRlbS5pZCwgc3RhcnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzdWJwYXJ0cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xIHNwYWNlLXktMSB0ZXh0LVsxMHB4XVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdWJwYXJ0cy5tYXAoKHN1YikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViVGltZXMgPSBnZXRTdWJwYXJ0U3RhcnRFbmQoc3ViKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzdWIuaWR9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidHJ1bmNhdGVcIj57c3ViLnRpdGxlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAgYmctdHJhbnNwYXJlbnQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkIHB4LTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3N1YlRpbWVzLnN0YXJ0ICE9PSBudWxsID8gZm9ybWF0VGltZShzdWJUaW1lcy5zdGFydCkgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VUaW1lU3RyaW5nKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJUaW1lcy5lbmQgIT09IG51bGwgJiYgdmFsdWUgPiBzdWJUaW1lcy5lbmQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3VicGFydFN0YXJ0RW5kKHN1Yi5pZCwgdmFsdWUsIHN1YlRpbWVzLmVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEwIGJnLXRyYW5zcGFyZW50IGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCBweC0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzdWJUaW1lcy5lbmQgIT09IG51bGwgPyBmb3JtYXRUaW1lKHN1YlRpbWVzLmVuZCkgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VUaW1lU3RyaW5nKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJUaW1lcy5zdGFydCAhPT0gbnVsbCAmJiB2YWx1ZSA8IHN1YlRpbWVzLnN0YXJ0KSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN1YnBhcnRTdGFydEVuZChzdWIuaWQsIHN1YlRpbWVzLnN0YXJ0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNjAwXCI+VW5hc3NpZ25lZDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAge3RpbWVsaW5lRGF0YS51bmFzc2lnbmVkLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPkFsbCBwYXJ0cyBhc3NpZ25lZDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAge3RpbWVsaW5lRGF0YS51bmFzc2lnbmVkLm1hcCgocGFydCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e3BhcnQuaWR9XG4gICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydD17KGUpID0+IGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJwYXJ0SWRcIiwgcGFydC5pZCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIHJvdW5kZWQgdGV4dC14cyBjdXJzb3ItbW92ZVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtwYXJ0Lm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0zXCI+TWFyayBDaGlwczwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICB7cm93cy5tYXAoKHJvdykgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtyb3cuaWR9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlUm93SWQocm93LmlkKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bib3JkZXIgcm91bmRlZC1sZyBwLTMgY3Vyc29yLXBvaW50ZXIgJHtcbiAgICAgICAgICAgICAgICAgIGFjdGl2ZVJvd0lkID09PSByb3cuaWQgPyBcImJvcmRlci1ibHVlLTQwMCBiZy1ibHVlLTUwXCIgOiBcImJvcmRlci1ncmF5LTIwMFwiXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlUm93SWQocm93LmlkKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMiBweS0xIHJvdW5kZWQgdGV4dC14cyBmb250LXNlbWlib2xkICR7XG4gICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUm93SWQgPT09IHJvdy5pZCA/IFwiYmctYmx1ZS02MDAgdGV4dC13aGl0ZVwiIDogXCJiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNzAwXCJcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtyb3cubGFiZWx9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPkRyb3AgY2hpcHMgaW50byB0aGUgZW1wdHkgc2xvdCB0byBvcmdhbml6ZS48L3NwYW4+XG4gICAgICAgICAgICAgICAgICB7cm93cy5sZW5ndGggPiAxICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Um93cygocHJldikgPT4gcHJldi5maWx0ZXIoKHIpID0+IHIuaWQgIT09IHJvdy5pZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVJvd0lkID09PSByb3cuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2sgPSByb3dzLmZpbmQoKHIpID0+IHIuaWQgIT09IHJvdy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVJvd0lkKGZhbGxiYWNrID8gZmFsbGJhY2suaWQgOiBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLWF1dG8gdGV4dC14cyB0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIERlbGV0ZSBSb3dcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3Jvdy5ub3RlIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgIHNldFJvd3MoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgcHJldi5tYXAoKHIpID0+IChyLmlkID09PSByb3cuaWQgPyB7IC4uLnIsIG5vdGU6IGUudGFyZ2V0LnZhbHVlIH0gOiByKSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJSb3cgbm90ZXMuLi5cIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQgdGV4dC14cyBtYi0yXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIHtyb3cubWFya3MubWFwKChtYXJrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gYXNzaWduZWRNYXJrQ291bnRzW21hcmsuaWRdIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yQ2xhc3MgPVxuICAgICAgICAgICAgICAgICAgICAgIHVzYWdlID49IDJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdXNhZ2UgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLXllbGxvdy0yMDAgdGV4dC15ZWxsb3ctOTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJnLWluZGlnby0xMDAgdGV4dC1pbmRpZ28tODAwXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e21hcmsuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwibWFya0lkXCIsIG1hcmsuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMiBweS0xIHJvdW5kZWQgdGV4dC14cyBjdXJzb3ItbW92ZSAke2NvbG9yQ2xhc3N9YH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntmb3JtYXRUaW1lKG1hcmsudGltZSl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVSZW1vdmVNYXJrKHJvdy5pZCwgbWFyay5pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1ncmF5LTgwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiUmVtb3ZlIGNoaXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICDDr8K/wr1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1kYXNoZWQgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtJZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJtYXJrSWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrSWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEcm9wVG9Sb3cocm93LmlkLCBtYXJrSWQpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBFbXB0eSBzbG90XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC1bMTFweF0gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgVGltZXM6e1wiIFwifVxuICAgICAgICAgICAgICAgICAge3Jvdy5tYXJrcy5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgPyBcIsOvwr/CvVwiXG4gICAgICAgICAgICAgICAgICAgIDogcm93Lm1hcmtzLm1hcCgobSkgPT4gZm9ybWF0VGltZShtLnRpbWUpKS5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICAgIDxNdXNpY1BsYXllclxuICAgICAgICAgICAgbXVzaWNVcmw9e211c2ljVXJsIHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uVGltZVVwZGF0ZT17KHQpID0+IHNldEN1cnJlbnRUaW1lKHQpfVxuICAgICAgICAgICAgb25BdWRpb1JlYWR5PXtoYW5kbGVBdWRpb1JlYWR5fVxuICAgICAgICAgICAgYXVkaW9SZWY9e2F1ZGlvUmVmfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJNdXNpY1BsYXllciIsImZvcm1hdFRpbWUiLCJzZWNvbmRzIiwidG90YWwiLCJNYXRoIiwibWF4IiwiZmxvb3IiLCJtaW5zIiwic2VjcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJwYXJzZVRpbWVTdHJpbmciLCJ2YWx1ZSIsInRyaW1tZWQiLCJ0cmltIiwidGVzdCIsInBhcnNlRmxvYXQiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsInV1aWQiLCJyYW5kb20iLCJzbGljZSIsIkRhdGUiLCJub3ciLCJNYXJraW5nUGFuZWwiLCJwZXJmb3JtYW5jZUlkIiwibXVzaWNVcmwiLCJwZXJmb3JtYW5jZVRpdGxlIiwib25QYXJ0c1VwZGF0ZWQiLCJyb3dzIiwic2V0Um93cyIsImFjdGl2ZVJvd0lkIiwic2V0QWN0aXZlUm93SWQiLCJjdXJyZW50VGltZSIsInNldEN1cnJlbnRUaW1lIiwiYXNzaWdubWVudHMiLCJzZXRBc3NpZ25tZW50cyIsInN1YnBhcnRzQnlQYXJ0Iiwic2V0U3VicGFydHNCeVBhcnQiLCJuZXdTdWJwYXJ0VGl0bGUiLCJzZXROZXdTdWJwYXJ0VGl0bGUiLCJzYXZpbmciLCJzZXRTYXZpbmciLCJzZXNzaW9uVGl0bGUiLCJzZXRTZXNzaW9uVGl0bGUiLCJjdXN0b21UaXRsZSIsInNldEN1c3RvbVRpdGxlIiwic2Vzc2lvbkxpc3QiLCJzZXRTZXNzaW9uTGlzdCIsInNlbGVjdGVkU2Vzc2lvbklkIiwic2V0U2VsZWN0ZWRTZXNzaW9uSWQiLCJhbGxTZXNzaW9ucyIsInNldEFsbFNlc3Npb25zIiwicGVyZm9ybWFuY2VOYW1lTWFwIiwic2V0UGVyZm9ybWFuY2VOYW1lTWFwIiwibXVzaWNEdXJhdGlvbiIsInNldE11c2ljRHVyYXRpb24iLCJhdWRpb0NsZWFudXBSZWYiLCJhdWRpb1JlZiIsInRpbWVsaW5lUmVmIiwibWFudWFsVGltZWxpbmVMZW5ndGgiLCJzZXRNYW51YWxUaW1lbGluZUxlbmd0aCIsInBhcnRUaW1lbGluZU92ZXJyaWRlcyIsInNldFBhcnRUaW1lbGluZU92ZXJyaWRlcyIsInN1YnBhcnRUaW1lbGluZU92ZXJyaWRlcyIsInNldFN1YnBhcnRUaW1lbGluZU92ZXJyaWRlcyIsImRyYWdnaW5nUGFydElkIiwic2V0RHJhZ2dpbmdQYXJ0SWQiLCJkcmFnU3RhdGVSZWYiLCJ0aW1lbGluZUxlbmd0aCIsInRpbWVzIiwiZm9yRWFjaCIsInBhcnQiLCJvdmVycmlkZSIsImlkIiwic3RhcnQiLCJ0aW1lcG9pbnRfc2Vjb25kcyIsImVuZCIsInRpbWVwb2ludF9lbmRfc2Vjb25kcyIsInB1c2giLCJPYmplY3QiLCJ2YWx1ZXMiLCJmbGF0Iiwic3ViIiwibWF4VGltZSIsImlzRmluaXRlIiwiY3VycmVudCIsImhhbmRsZU1vdmUiLCJldmVudCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyYXRpbyIsImNsaWVudFgiLCJsZWZ0Iiwid2lkdGgiLCJyYXciLCJvZmZzZXRTZWMiLCJkdXJhdGlvbiIsIm1pbiIsInNuYXBwZWQiLCJyb3VuZCIsInNldFBhcnRTdGFydEVuZCIsInBhcnRJZCIsImhhbmRsZVVwIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVBdWRpb1JlYWR5IiwiYXVkaW8iLCJ1cGRhdGUiLCJhc3NpZ25lZE1hcmtDb3VudHMiLCJjb3VudHMiLCJtYXJrSWQiLCJmaXJzdFJvdyIsImxhYmVsIiwibm90ZSIsIm1hcmtzIiwidGl0bGUiLCJ0b0xvY2FsZVN0cmluZyIsImdldFBhcnRTdGFydEVuZCIsInByZXYiLCJzZXRTdWJwYXJ0U3RhcnRFbmQiLCJzdWJwYXJ0SWQiLCJnZXRTdWJwYXJ0U3RhcnRFbmQiLCJmZXRjaFN1YnBhcnRzIiwiZW50cmllcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJyZXMiLCJmZXRjaCIsIm9rIiwiZGF0YSIsImpzb24iLCJsaXN0IiwiZmV0Y2hTZXNzaW9ucyIsImZldGNoUGVyZm9ybWFuY2VOYW1lcyIsInBlcmYiLCJoYW5kbGVLZXlEb3duIiwidGFyZ2V0IiwidGFnIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiY29kZSIsInByZXZlbnREZWZhdWx0Iiwicm93SWQiLCJtYXJrIiwidGltZSIsImNyZWF0ZWRBdCIsInRvSVNPU3RyaW5nIiwicm93Iiwia2V5IiwibmV4dEluZGV4IiwibmV3Um93IiwiaWR4IiwiZmluZEluZGV4IiwiciIsIm5leHQiLCJzcGxpY2UiLCJoYW5kbGVEcm9wVG9Sb3ciLCJtb3ZlZCIsInJlbW92ZWQiLCJuZXh0TWFya3MiLCJmaWx0ZXIiLCJtIiwiaGFuZGxlUmVtb3ZlTWFyayIsImdldE1hcmtUaW1lQnlJZCIsImZpbmQiLCJ0aW1lbGluZURlZmF1bHREdXJhdGlvbiIsInRpbWVsaW5lRGF0YSIsImFzc2lnbmVkIiwidW5hc3NpZ25lZCIsInJlc29sdmVkRW5kIiwibmFtZSIsIm1pc3NpbmdFbmQiLCJzb3J0IiwiYSIsImIiLCJpdGVtIiwicGxhY2VkIiwibGFzdCIsIml0ZW1zIiwibm9ybWFsaXplQXNzaWdubWVudHMiLCJyb3dzU25hcHNob3QiLCJub3JtYWxpemVkIiwiZmxhdE1hcCIsImdldEFzc2lnbmVkVGltZSIsInRhcmdldEtleSIsImdldEV4aXN0aW5nVGltZSIsInR5cGUiLCJmaWVsZCIsInAiLCJzIiwiYXNzaWduTWFya1RvVGFyZ2V0IiwibWFya1RpbWUiLCJ1bmRlZmluZWQiLCJvcHBvc2l0ZUZpZWxkIiwiYXNzaWduZWRPcHBvc2l0ZSIsImV4aXN0aW5nT3Bwb3NpdGUiLCJvcHBvc2l0ZVRpbWUiLCJhbGVydCIsImNsZWFyQXNzaWdubWVudCIsInJlbmRlclRpbWVUYXJnZXQiLCJhc3NpZ25lZFZhbHVlIiwiYXNzaWduZWRNYXJrSWQiLCJhc3NpZ25lZFRpbWUiLCJleGlzdGluZ1RpbWUiLCJzaG93VGltZSIsImRpdiIsImNsYXNzTmFtZSIsIm9uRHJhZ092ZXIiLCJlIiwib25Ecm9wIiwiZGF0YVRyYW5zZmVyIiwiZ2V0RGF0YSIsInNwYW4iLCJidXR0b24iLCJvbkNsaWNrIiwiaGFuZGxlU2F2ZVNlc3Npb24iLCJwYXlsb2FkIiwicGVyZm9ybWFuY2VfaWQiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVkIiwiaGFuZGxlQXBwbHkiLCJ1cGRhdGVzQnlQYXJ0IiwidXBkYXRlc0J5U3VicGFydCIsInVwZGF0ZWRQYXJ0cyIsInVwZGF0ZWRTdWJwYXJ0cyIsInVwZGF0ZWQiLCJ1IiwicGFydF9pZCIsImhhbmRsZVNhdmVUaW1lbGluZSIsImlucHV0Iiwib25DaGFuZ2UiLCJwbGFjZWhvbGRlciIsImRpc2FibGVkIiwic2VsZWN0IiwibmV4dFJvd3MiLCJvcHRpb24iLCJzZXNzIiwiY3JlYXRlZF9hdCIsImNoZWNrZWQiLCJyb3dJbmRleCIsInJlZiIsImN1cnJlbnRUYXJnZXQiLCJleGlzdGluZ1N0YXJ0IiwiZXhpc3RpbmdFbmQiLCJzdWJwYXJ0cyIsInN0eWxlIiwib25Nb3VzZURvd24iLCJpbmNsdWRlcyIsIm5leHRFbmQiLCJzdWJUaW1lcyIsImRyYWdnYWJsZSIsIm9uRHJhZ1N0YXJ0Iiwic2V0RGF0YSIsInN0b3BQcm9wYWdhdGlvbiIsImZhbGxiYWNrIiwidXNhZ2UiLCJjb2xvckNsYXNzIiwiam9pbiIsIm9uVGltZVVwZGF0ZSIsInQiLCJvbkF1ZGlvUmVhZHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MarkingPanel.tsx\n"));

/***/ })

});