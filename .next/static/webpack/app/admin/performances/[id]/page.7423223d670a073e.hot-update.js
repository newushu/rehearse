"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/performances/[id]/page",{

/***/ "(app-pages-browser)/./src/components/MarkingPanel.tsx":
/*!*****************************************!*\
  !*** ./src/components/MarkingPanel.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MarkingPanel: () => (/* binding */ MarkingPanel)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/MusicPlayer */ \"(app-pages-browser)/./src/components/MusicPlayer.tsx\");\n/* __next_internal_client_entry_do_not_use__ MarkingPanel auto */ \nvar _s = $RefreshSig$();\n\n\nfunction formatTime(seconds) {\n    const total = Math.max(0, Math.floor(seconds));\n    const mins = Math.floor(total / 60);\n    const secs = total % 60;\n    return \"\".concat(mins, \":\").concat(secs.toString().padStart(2, \"0\"));\n}\nfunction parseTimeString(value) {\n    if (!value) return null;\n    const trimmed = value.trim();\n    if (!trimmed) return null;\n    if (/^\\d+(\\.\\d+)?$/.test(trimmed)) return Math.max(0, parseFloat(trimmed));\n    const parts = trimmed.split(\":\");\n    if (parts.length === 2) {\n        const mins = parseInt(parts[0], 10);\n        const secs = parseFloat(parts[1]);\n        if (Number.isNaN(mins) || Number.isNaN(secs)) return null;\n        return Math.max(0, mins * 60 + secs);\n    }\n    return null;\n}\nfunction uuid() {\n    return Math.random().toString(36).slice(2, 10) + Date.now().toString(36);\n}\nfunction MarkingPanel(param) {\n    let { performanceId, parts, musicUrl, performanceTitle, onPartsUpdated } = param;\n    _s();\n    const [rows, setRows] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeRowId, setActiveRowId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [assignments, setAssignments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartsByPart, setSubpartsByPart] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [newSubpartTitle, setNewSubpartTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionTitle, setSessionTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"New Marking Session\");\n    const [customTitle, setCustomTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionList, setSessionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedSessionId, setSelectedSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [allSessions, setAllSessions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [performanceNameMap, setPerformanceNameMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [musicDuration, setMusicDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioCleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const timelineRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [manualTimelineLength, setManualTimelineLength] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(180);\n    const [partTimelineOverrides, setPartTimelineOverrides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartTimelineOverrides, setSubpartTimelineOverrides] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [draggingPartId, setDraggingPartId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            return ({\n                \"MarkingPanel.useEffect\": ()=>{\n                    var _audioCleanupRef_current;\n                    (_audioCleanupRef_current = audioCleanupRef.current) === null || _audioCleanupRef_current === void 0 ? void 0 : _audioCleanupRef_current.call(audioCleanupRef);\n                }\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    const handleAudioReady = (audio)=>{\n        if (audioCleanupRef.current) audioCleanupRef.current();\n        if (!audio) {\n            setMusicDuration(null);\n            audioCleanupRef.current = null;\n            return;\n        }\n        const update = ()=>{\n            const duration = Number.isFinite(audio.duration) ? audio.duration : null;\n            setMusicDuration(duration);\n        };\n        audio.addEventListener(\"loadedmetadata\", update);\n        audio.addEventListener(\"durationchange\", update);\n        update();\n        audioCleanupRef.current = ()=>{\n            audio.removeEventListener(\"loadedmetadata\", update);\n            audio.removeEventListener(\"durationchange\", update);\n        };\n    };\n    const assignedMarkCounts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[assignedMarkCounts]\": ()=>{\n            const counts = {};\n            Object.values(assignments).forEach({\n                \"MarkingPanel.useMemo[assignedMarkCounts]\": (value)=>{\n                    if (typeof value === \"string\") {\n                        counts[value] = (counts[value] || 0) + 1;\n                    } else if (value === null || value === void 0 ? void 0 : value.markId) {\n                        counts[value.markId] = (counts[value.markId] || 0) + 1;\n                    }\n                }\n            }[\"MarkingPanel.useMemo[assignedMarkCounts]\"]);\n            return counts;\n        }\n    }[\"MarkingPanel.useMemo[assignedMarkCounts]\"], [\n        assignments\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (rows.length === 0) {\n                const firstRow = {\n                    id: uuid(),\n                    label: \"Row 1\",\n                    note: \"\",\n                    marks: []\n                };\n                setRows([\n                    firstRow\n                ]);\n                setActiveRowId(firstRow.id);\n            }\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        rows.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (customTitle) return;\n            const title = \"\".concat(new Date().toLocaleString(), \" \\xb7 \").concat(performanceTitle || \"Performance\");\n            setSessionTitle(title);\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceTitle,\n        customTitle\n    ]);\n    const timelineLength = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[timelineLength]\": ()=>{\n            const times = [];\n            parts.forEach({\n                \"MarkingPanel.useMemo[timelineLength]\": (part)=>{\n                    const override = partTimelineOverrides[part.id];\n                    var _override_start, _ref;\n                    const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : part.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                    var _override_end, _ref1;\n                    const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : part.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                    if (start !== null) times.push(start);\n                    if (end !== null) times.push(end);\n                    if (start !== null && end === null) times.push(start + 10);\n                }\n            }[\"MarkingPanel.useMemo[timelineLength]\"]);\n            Object.values(subpartsByPart).flat().forEach({\n                \"MarkingPanel.useMemo[timelineLength]\": (sub)=>{\n                    const override = subpartTimelineOverrides[sub.id];\n                    var _override_start, _ref;\n                    const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                    var _override_end, _ref1;\n                    const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                    if (start !== null) times.push(start);\n                    if (end !== null) times.push(end);\n                    if (start !== null && end === null) times.push(start + 10);\n                }\n            }[\"MarkingPanel.useMemo[timelineLength]\"]);\n            const maxTime = times.length ? Math.max(...times) : 0;\n            if (musicDuration && Number.isFinite(musicDuration)) return Math.max(musicDuration, maxTime, 10);\n            return Math.max(manualTimelineLength, maxTime, 10);\n        }\n    }[\"MarkingPanel.useMemo[timelineLength]\"], [\n        musicDuration,\n        manualTimelineLength,\n        parts,\n        subpartsByPart,\n        partTimelineOverrides,\n        subpartTimelineOverrides\n    ]);\n    const getPartStartEnd = (part)=>{\n        const override = partTimelineOverrides[part.id];\n        var _override_start, _ref;\n        const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : part.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n        var _override_end, _ref1;\n        const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : part.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n        return {\n            start,\n            end\n        };\n    };\n    const setPartStartEnd = (partId, start, end)=>{\n        setPartTimelineOverrides((prev)=>({\n                ...prev,\n                [partId]: {\n                    start,\n                    end\n                }\n            }));\n    };\n    const setSubpartStartEnd = (subpartId, start, end)=>{\n        setSubpartTimelineOverrides((prev)=>({\n                ...prev,\n                [subpartId]: {\n                    start,\n                    end\n                }\n            }));\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSubparts = {\n                \"MarkingPanel.useEffect.fetchSubparts\": async ()=>{\n                    const entries = await Promise.all(parts.map({\n                        \"MarkingPanel.useEffect.fetchSubparts\": async (part)=>{\n                            const res = await fetch(\"/api/subparts?partId=\".concat(part.id));\n                            if (!res.ok) return [\n                                part.id,\n                                []\n                            ];\n                            const data = await res.json();\n                            return [\n                                part.id,\n                                data || []\n                            ];\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]));\n                    const map = {};\n                    entries.forEach({\n                        \"MarkingPanel.useEffect.fetchSubparts\": (param)=>{\n                            let [partId, list] = param;\n                            map[partId] = list;\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]);\n                    setSubpartsByPart(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchSubparts\"];\n            fetchSubparts();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        parts\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSessions = {\n                \"MarkingPanel.useEffect.fetchSessions\": async ()=>{\n                    const res = await fetch(allSessions ? \"/api/marking-sessions?all=1\" : \"/api/marking-sessions?performanceId=\".concat(performanceId));\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    setSessionList(data || []);\n                }\n            }[\"MarkingPanel.useEffect.fetchSessions\"];\n            fetchSessions();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        allSessions\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const fetchPerformanceNames = {\n                \"MarkingPanel.useEffect.fetchPerformanceNames\": async ()=>{\n                    const res = await fetch(\"/api/performances\");\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    const map = {};\n                    (data || []).forEach({\n                        \"MarkingPanel.useEffect.fetchPerformanceNames\": (perf)=>{\n                            map[perf.id] = perf.title || \"Performance\";\n                        }\n                    }[\"MarkingPanel.useEffect.fetchPerformanceNames\"]);\n                    setPerformanceNameMap(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchPerformanceNames\"];\n            fetchPerformanceNames();\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"MarkingPanel.useEffect.handleKeyDown\": (event)=>{\n                    var _target_tagName;\n                    const target = event.target;\n                    const tag = target === null || target === void 0 ? void 0 : (_target_tagName = target.tagName) === null || _target_tagName === void 0 ? void 0 : _target_tagName.toLowerCase();\n                    if (tag === \"input\" || tag === \"textarea\" || tag === \"select\") return;\n                    if (event.code === \"Space\") {\n                        var _rows_;\n                        event.preventDefault();\n                        const rowId = activeRowId || ((_rows_ = rows[0]) === null || _rows_ === void 0 ? void 0 : _rows_.id);\n                        if (!rowId) return;\n                        const mark = {\n                            id: uuid(),\n                            time: currentTime,\n                            createdAt: new Date().toISOString()\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>prev.map({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (row)=>row.id === rowId ? {\n                                            ...row,\n                                            marks: [\n                                                ...row.marks,\n                                                mark\n                                            ]\n                                        } : row\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"])\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                    }\n                    if (event.key === \"e\" || event.key === \"E\") {\n                        event.preventDefault();\n                        const nextIndex = rows.length + 1;\n                        const newRow = {\n                            id: uuid(),\n                            label: \"Row \".concat(nextIndex),\n                            note: \"\",\n                            marks: []\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>{\n                                const idx = activeRowId ? prev.findIndex({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (r)=>r.id === activeRowId\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"]) : prev.length - 1;\n                                if (idx === -1) return [\n                                    ...prev,\n                                    newRow\n                                ];\n                                const next = [\n                                    ...prev\n                                ];\n                                next.splice(idx + 1, 0, newRow);\n                                return next;\n                            }\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                        setActiveRowId(newRow.id);\n                    }\n                }\n            }[\"MarkingPanel.useEffect.handleKeyDown\"];\n            window.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"MarkingPanel.useEffect\": ()=>window.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        activeRowId,\n        currentTime,\n        rows\n    ]);\n    const handleDropToRow = (rowId, markId)=>{\n        setRows((prev)=>{\n            let moved = null;\n            const removed = prev.map((row)=>{\n                const nextMarks = row.marks.filter((m)=>{\n                    if (m.id === markId) {\n                        moved = m;\n                        return false;\n                    }\n                    return true;\n                });\n                return {\n                    ...row,\n                    marks: nextMarks\n                };\n            });\n            if (!moved) return prev;\n            return removed.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: [\n                        ...row.marks,\n                        moved\n                    ]\n                } : row);\n        });\n    };\n    const handleRemoveMark = (rowId, markId)=>{\n        setRows((prev)=>prev.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: row.marks.filter((m)=>m.id !== markId)\n                } : row));\n    };\n    const normalizeAssignments = (rowsSnapshot, raw)=>{\n        const normalized = {};\n        Object.entries(raw || {}).forEach((param)=>{\n            let [key, value] = param;\n            if (typeof value === \"string\") {\n                const mark = rowsSnapshot.flatMap((r)=>r.marks).find((m)=>m.id === value);\n                if (mark) {\n                    normalized[key] = {\n                        markId: value,\n                        time: mark.time\n                    };\n                }\n            } else if (value && typeof value === \"object\") {\n                normalized[key] = value;\n            }\n        });\n        return normalized;\n    };\n    const getAssignedTime = (targetKey)=>{\n        const value = assignments[targetKey];\n        if (!value) return null;\n        if (typeof value === \"string\") {\n            for (const row of rows){\n                const mark = row.marks.find((m)=>m.id === value);\n                if (mark) return mark.time;\n            }\n            return null;\n        }\n        var _value_time;\n        return (_value_time = value.time) !== null && _value_time !== void 0 ? _value_time : null;\n    };\n    const getExistingTime = (type, id, field)=>{\n        if (type === \"part\") {\n            const part = parts.find((p)=>p.id === id);\n            if (!part) return null;\n            var _part_timepoint_seconds, _part_timepoint_end_seconds;\n            return field === \"start\" ? (_part_timepoint_seconds = part.timepoint_seconds) !== null && _part_timepoint_seconds !== void 0 ? _part_timepoint_seconds : null : (_part_timepoint_end_seconds = part.timepoint_end_seconds) !== null && _part_timepoint_end_seconds !== void 0 ? _part_timepoint_end_seconds : null;\n        }\n        const sub = Object.values(subpartsByPart).flat().find((s)=>s.id === id);\n        if (!sub) return null;\n        var _sub_timepoint_seconds, _sub_timepoint_end_seconds;\n        return field === \"start\" ? (_sub_timepoint_seconds = sub.timepoint_seconds) !== null && _sub_timepoint_seconds !== void 0 ? _sub_timepoint_seconds : null : (_sub_timepoint_end_seconds = sub.timepoint_end_seconds) !== null && _sub_timepoint_end_seconds !== void 0 ? _sub_timepoint_end_seconds : null;\n    };\n    const assignMarkToTarget = (targetKey, markId)=>{\n        var _rows_flatMap_find;\n        const [type, id, field] = targetKey.split(\":\");\n        const markTime = (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === markId)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time;\n        if (markTime === undefined) return;\n        const oppositeField = field === \"start\" ? \"end\" : \"start\";\n        const assignedOpposite = getAssignedTime(\"\".concat(type, \":\").concat(id, \":\").concat(oppositeField));\n        const existingOpposite = getExistingTime(type, id, oppositeField);\n        const oppositeTime = assignedOpposite !== null && assignedOpposite !== void 0 ? assignedOpposite : existingOpposite;\n        if (field === \"end\" && oppositeTime !== null && markTime < oppositeTime) {\n            alert(\"End time cannot be before start time.\");\n            return;\n        }\n        if (field === \"start\" && oppositeTime !== null && markTime > oppositeTime) {\n            alert(\"Start time cannot be after end time.\");\n            return;\n        }\n        setAssignments((prev)=>({\n                ...prev,\n                [targetKey]: {\n                    markId,\n                    time: markTime\n                }\n            }));\n    };\n    const clearAssignment = (targetKey)=>{\n        setAssignments((prev)=>{\n            const next = {\n                ...prev\n            };\n            delete next[targetKey];\n            return next;\n        });\n    };\n    const renderTimeTarget = (type, id, field)=>{\n        const targetKey = \"\".concat(type, \":\").concat(id, \":\").concat(field);\n        const assignedValue = assignments[targetKey];\n        const assignedMarkId = typeof assignedValue === \"string\" ? assignedValue : assignedValue === null || assignedValue === void 0 ? void 0 : assignedValue.markId;\n        const assignedTime = getAssignedTime(targetKey);\n        const existingTime = getExistingTime(type, id, field);\n        const showTime = assignedTime !== null ? assignedTime : existingTime;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"border border-dashed rounded px-2 py-1 text-xs flex items-center gap-2 \".concat(assignedMarkId ? \"border-emerald-400 bg-emerald-50\" : \"border-gray-300 bg-white\"),\n            onDragOver: (e)=>e.preventDefault(),\n            onDrop: (e)=>{\n                const markId = e.dataTransfer.getData(\"markId\");\n                if (!markId) return;\n                assignMarkToTarget(targetKey, markId);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-gray-500 uppercase\",\n                    children: field\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 403,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: showTime !== null ? formatTime(showTime) : \"--:--\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 404,\n                    columnNumber: 9\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"ml-1 px-2 py-0.5 rounded-full text-[10px] bg-emerald-600 text-white\",\n                    children: \"Chip\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 408,\n                    columnNumber: 11\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>clearAssignment(targetKey),\n                    className: \"ml-auto text-red-600 hover:text-red-800\",\n                    title: \"Remove\",\n                    children: \"\\xc3â€”\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 413,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n            lineNumber: 392,\n            columnNumber: 7\n        }, this);\n    };\n    const handleSaveSession = async ()=>{\n        const payload = {\n            performance_id: performanceId,\n            title: sessionTitle || \"Marking Session\",\n            rows,\n            assignments\n        };\n        const res = await fetch(\"/api/marking-sessions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n        if (res.ok) {\n            const created = await res.json();\n            setSessionList((prev)=>[\n                    created,\n                    ...prev\n                ]);\n        }\n    };\n    const handleApply = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            Object.entries(assignments).forEach((param)=>{\n                let [key, value] = param;\n                var _rows_flatMap_find;\n                const [type, id, field] = key.split(\":\");\n                const markId = typeof value === \"string\" ? value : value === null || value === void 0 ? void 0 : value.markId;\n                const markTime = typeof value === \"string\" ? (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === value)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time : value === null || value === void 0 ? void 0 : value.time;\n                if (markTime === undefined || markTime === null) return;\n                if (type === \"part\") {\n                    updatesByPart[id] = updatesByPart[id] || {};\n                    updatesByPart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = markTime;\n                } else {\n                    updatesBySubpart[id] = updatesBySubpart[id] || {};\n                    updatesBySubpart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = markTime;\n                }\n            });\n            const updatedParts = [];\n            const updatedSubparts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                const res = await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    if (updated) updatedSubparts.push(updated);\n                }\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n            if (updatedSubparts.length > 0) {\n                setSubpartsByPart((prev)=>{\n                    const next = {\n                        ...prev\n                    };\n                    updatedSubparts.forEach((sub)=>{\n                        next[sub.part_id] = (next[sub.part_id] || []).map((s)=>s.id === sub.id ? {\n                                ...s,\n                                ...sub\n                            } : s);\n                    });\n                    return next;\n                });\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    const handleSaveTimeline = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            parts.forEach((part)=>{\n                const { start, end } = getPartStartEnd(part);\n                if (start !== null) {\n                    updatesByPart[part.id] = {\n                        timepoint_seconds: start,\n                        timepoint_end_seconds: end !== null && end !== void 0 ? end : null\n                    };\n                }\n            });\n            Object.values(subpartsByPart).flat().forEach((sub)=>{\n                const override = subpartTimelineOverrides[sub.id];\n                var _override_start, _ref;\n                const start = (_ref = (_override_start = override === null || override === void 0 ? void 0 : override.start) !== null && _override_start !== void 0 ? _override_start : sub.timepoint_seconds) !== null && _ref !== void 0 ? _ref : null;\n                var _override_end, _ref1;\n                const end = (_ref1 = (_override_end = override === null || override === void 0 ? void 0 : override.end) !== null && _override_end !== void 0 ? _override_end : sub.timepoint_end_seconds) !== null && _ref1 !== void 0 ? _ref1 : null;\n                if (start !== null) {\n                    updatesBySubpart[sub.id] = {\n                        timepoint_seconds: start,\n                        timepoint_end_seconds: end !== null && end !== void 0 ? end : null\n                    };\n                }\n            });\n            const updatedParts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"grid grid-cols-1 xl:grid-cols-[320px_1fr] gap-6\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xl font-bold text-gray-900 mb-2\",\n                        children: \"Parts & Subparts\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 582,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 mb-4\",\n                        children: \"Drop time chips onto Start/End. Only dropped chips change timepoints when saved.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 583,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: parts.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"border border-gray-200 rounded-lg p-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-semibold text-gray-900 mb-2\",\n                                        children: part.name\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 589,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid grid-cols-2 gap-2 mb-2\",\n                                        children: [\n                                            renderTimeTarget(\"part\", part.id, \"start\"),\n                                            renderTimeTarget(\"part\", part.id, \"end\")\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 590,\n                                        columnNumber: 15\n                                    }, this),\n                                    (subpartsByPart[part.id] || []).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 space-y-2\",\n                                        children: (subpartsByPart[part.id] || []).map((sub)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border border-gray-100 rounded p-2 bg-gray-50\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-sm font-semibold text-gray-800\",\n                                                        children: sub.title\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 598,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"grid grid-cols-2 gap-2 mt-2\",\n                                                        children: [\n                                                            renderTimeTarget(\"subpart\", sub.id, \"start\"),\n                                                            renderTimeTarget(\"subpart\", sub.id, \"end\")\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 599,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, sub.id, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 597,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 595,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-3 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: newSubpartTitle[part.id] || \"\",\n                                                onChange: (e)=>setNewSubpartTitle((prev)=>({\n                                                            ...prev,\n                                                            [part.id]: e.target.value\n                                                        })),\n                                                placeholder: \"Add subpart\",\n                                                className: \"flex-1 px-2 py-1 border border-gray-300 rounded text-xs\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 608,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: async ()=>{\n                                                    const title = (newSubpartTitle[part.id] || \"\").trim();\n                                                    if (!title) return;\n                                                    const res = await fetch(\"/api/subparts\", {\n                                                        method: \"POST\",\n                                                        headers: {\n                                                            \"Content-Type\": \"application/json\"\n                                                        },\n                                                        body: JSON.stringify({\n                                                            part_id: part.id,\n                                                            title\n                                                        })\n                                                    });\n                                                    if (res.ok) {\n                                                        const created = await res.json();\n                                                        setSubpartsByPart((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: [\n                                                                    ...prev[part.id] || [],\n                                                                    created\n                                                                ]\n                                                            }));\n                                                        setNewSubpartTitle((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: \"\"\n                                                            }));\n                                                    }\n                                                },\n                                                className: \"px-2 py-1 bg-gray-900 text-white rounded text-xs\",\n                                                children: \"Add\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 617,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 607,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, part.id, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 588,\n                                columnNumber: 13\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 586,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 581,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-wrap items-center gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xl font-bold text-gray-900\",\n                                        children: \"Marking Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 648,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"ml-auto flex gap-2 items-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: sessionTitle,\n                                                onChange: (e)=>{\n                                                    setSessionTitle(e.target.value);\n                                                    setCustomTitle(true);\n                                                },\n                                                className: \"px-3 py-1 border border-gray-300 rounded text-sm\",\n                                                placeholder: \"Session title\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 650,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleSaveSession,\n                                                className: \"px-3 py-1 bg-gray-900 text-white rounded text-sm\",\n                                                children: \"Save Session\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 659,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleApply,\n                                                disabled: saving,\n                                                className: \"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:bg-gray-400\",\n                                                children: saving ? \"Saving...\" : \"Apply Timepoints\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 665,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 649,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 647,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-2\",\n                                children: \"Hotkeys: Space = mark time, E = new row. Works while music is playing or paused.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 674,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-1\",\n                                children: [\n                                    \"Music length: \",\n                                    musicDuration ? formatTime(musicDuration) : \"Ã¯Â¿Â½\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 677,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 bg-gray-50 border border-dashed border-gray-300 rounded p-3 text-xs text-gray-500\",\n                                children: \"Waveform view: not available yet. We can add a waveform preview in a follow-up.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 680,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 flex flex-wrap items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                        value: selectedSessionId,\n                                        onChange: async (e)=>{\n                                            const id = e.target.value;\n                                            setSelectedSessionId(id);\n                                            if (!id) return;\n                                            const res = await fetch(\"/api/marking-sessions/\".concat(id));\n                                            if (!res.ok) return;\n                                            const data = await res.json();\n                                            setSessionTitle(data.title || \"Marking Session\");\n                                            setCustomTitle(true);\n                                            const nextRows = (data.rows || []).map((row)=>({\n                                                    ...row,\n                                                    note: row.note || \"\"\n                                                }));\n                                            setRows(nextRows);\n                                            setAssignments(normalizeAssignments(nextRows, data.assignments || {}));\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                value: \"\",\n                                                children: \"Load saved session...\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 704,\n                                                columnNumber: 15\n                                            }, this),\n                                            sessionList.map((sess)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: sess.id,\n                                                    children: [\n                                                        sess.title || \"Untitled\",\n                                                        \" \\xef\\xbf\\xbd \",\n                                                        performanceNameMap[sess.performance_id] || \"Performance\",\n                                                        \" \\xef\\xbf\\xbd \",\n                                                        new Date(sess.created_at).toLocaleString()\n                                                    ]\n                                                }, sess.id, true, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 706,\n                                                    columnNumber: 17\n                                                }, this))\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 684,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-xs text-gray-600 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: allSessions,\n                                                onChange: (e)=>setAllSessions(e.target.checked),\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 712,\n                                                columnNumber: 15\n                                            }, this),\n                                            \"Show sessions from all performances\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 711,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            const firstRow = {\n                                                id: uuid(),\n                                                label: \"Row 1\",\n                                                note: \"\",\n                                                marks: []\n                                            };\n                                            setRows([\n                                                firstRow\n                                            ]);\n                                            setActiveRowId(firstRow.id);\n                                            setAssignments({});\n                                            setSelectedSessionId(\"\");\n                                            setCustomTitle(false);\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: \"New Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 720,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 683,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 646,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-lg font-semibold text-gray-900 mb-3\",\n                                children: \"Mark Chips\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 737,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-4\",\n                                children: rows.map((row)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        onClick: ()=>setActiveRowId(row.id),\n                                        className: \"border rounded-lg p-3 cursor-pointer \".concat(activeRowId === row.id ? \"border-blue-400 bg-blue-50\" : \"border-gray-200\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3 mb-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>setActiveRowId(row.id),\n                                                        className: \"px-2 py-1 rounded text-xs font-semibold \".concat(activeRowId === row.id ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700\"),\n                                                        children: row.label\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 748,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: \"Drop chips into the empty slot to organize.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 756,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    rows.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: (e)=>{\n                                                            e.stopPropagation();\n                                                            setRows((prev)=>prev.filter((r)=>r.id !== row.id));\n                                                            if (activeRowId === row.id) {\n                                                                const fallback = rows.find((r)=>r.id !== row.id);\n                                                                setActiveRowId(fallback ? fallback.id : null);\n                                                            }\n                                                        },\n                                                        className: \"ml-auto text-xs text-red-600 hover:text-red-800\",\n                                                        children: \"Delete Row\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 758,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 747,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: row.note || \"\",\n                                                onChange: (e)=>setRows((prev)=>prev.map((r)=>r.id === row.id ? {\n                                                                ...r,\n                                                                note: e.target.value\n                                                            } : r)),\n                                                placeholder: \"Row notes...\",\n                                                className: \"w-full px-2 py-1 border border-gray-200 rounded text-xs mb-2\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 773,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-2\",\n                                                children: [\n                                                    row.marks.map((mark)=>{\n                                                        const usage = assignedMarkCounts[mark.id] || 0;\n                                                        const colorClass = usage >= 2 ? \"bg-gray-200 text-gray-700\" : usage === 1 ? \"bg-yellow-200 text-yellow-900\" : \"bg-indigo-100 text-indigo-800\";\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            draggable: true,\n                                                            onDragStart: (e)=>{\n                                                                e.dataTransfer.setData(\"markId\", mark.id);\n                                                            },\n                                                            className: \"px-2 py-1 rounded text-xs cursor-move \".concat(colorClass),\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"flex items-center gap-2\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                        children: formatTime(mark.time)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                        lineNumber: 802,\n                                                                        columnNumber: 25\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                        onClick: ()=>handleRemoveMark(row.id, mark.id),\n                                                                        className: \"text-[10px] text-gray-600 hover:text-gray-800\",\n                                                                        title: \"Remove chip\",\n                                                                        children: \"\\xef\\xbf\\xbd\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                        lineNumber: 803,\n                                                                        columnNumber: 25\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                                lineNumber: 801,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, mark.id, false, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 793,\n                                                            columnNumber: 21\n                                                        }, this);\n                                                    }),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"px-2 py-1 border border-dashed border-gray-300 rounded text-xs text-gray-500\",\n                                                        onDragOver: (e)=>e.preventDefault(),\n                                                        onDrop: (e)=>{\n                                                            const markId = e.dataTransfer.getData(\"markId\");\n                                                            if (!markId) return;\n                                                            handleDropToRow(row.id, markId);\n                                                        },\n                                                        children: \"Empty slot\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 814,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 783,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-2 text-[11px] text-gray-500\",\n                                                children: [\n                                                    \"Times:\",\n                                                    \" \",\n                                                    row.marks.length === 0 ? \"Ã¯Â¿Â½\" : row.marks.map((m)=>formatTime(m.time)).join(\", \")\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 826,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, row.id, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 740,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 738,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 736,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__.MusicPlayer, {\n                            musicUrl: musicUrl || undefined,\n                            onTimeUpdate: (t)=>setCurrentTime(t),\n                            onAudioReady: handleAudioReady,\n                            audioRef: audioRef\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                            lineNumber: 838,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 837,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 645,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n        lineNumber: 580,\n        columnNumber: 5\n    }, this);\n}\n_s(MarkingPanel, \"lQxvMBeieC4NrI9gOzsA8EJuK7k=\");\n_c = MarkingPanel;\nvar _c;\n$RefreshReg$(_c, \"MarkingPanel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hcmtpbmdQYW5lbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU2RDtBQUNOO0FBNkN2RCxTQUFTSyxXQUFXQyxPQUFlO0lBQ2pDLE1BQU1DLFFBQVFDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxLQUFLLENBQUNKO0lBQ3JDLE1BQU1LLE9BQU9ILEtBQUtFLEtBQUssQ0FBQ0gsUUFBUTtJQUNoQyxNQUFNSyxPQUFPTCxRQUFRO0lBQ3JCLE9BQU8sR0FBV0ssT0FBUkQsTUFBSyxLQUFvQyxPQUFqQ0MsS0FBS0MsUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRztBQUNoRDtBQUVBLFNBQVNDLGdCQUFnQkMsS0FBYTtJQUNwQyxJQUFJLENBQUNBLE9BQU8sT0FBTztJQUNuQixNQUFNQyxVQUFVRCxNQUFNRSxJQUFJO0lBQzFCLElBQUksQ0FBQ0QsU0FBUyxPQUFPO0lBQ3JCLElBQUksZ0JBQWdCRSxJQUFJLENBQUNGLFVBQVUsT0FBT1QsS0FBS0MsR0FBRyxDQUFDLEdBQUdXLFdBQVdIO0lBQ2pFLE1BQU1JLFFBQVFKLFFBQVFLLEtBQUssQ0FBQztJQUM1QixJQUFJRCxNQUFNRSxNQUFNLEtBQUssR0FBRztRQUN0QixNQUFNWixPQUFPYSxTQUFTSCxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQ2hDLE1BQU1ULE9BQU9RLFdBQVdDLEtBQUssQ0FBQyxFQUFFO1FBQ2hDLElBQUlJLE9BQU9DLEtBQUssQ0FBQ2YsU0FBU2MsT0FBT0MsS0FBSyxDQUFDZCxPQUFPLE9BQU87UUFDckQsT0FBT0osS0FBS0MsR0FBRyxDQUFDLEdBQUdFLE9BQU8sS0FBS0M7SUFDakM7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTZTtJQUNQLE9BQU9uQixLQUFLb0IsTUFBTSxHQUFHZixRQUFRLENBQUMsSUFBSWdCLEtBQUssQ0FBQyxHQUFHLE1BQU1DLEtBQUtDLEdBQUcsR0FBR2xCLFFBQVEsQ0FBQztBQUN2RTtB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RCxnQkFBZ0JWLElBQUluRCxFQUFFLEVBQUVGO3dEQUMxQjtrRUFDRDs7Ozs7Ozs7Ozs7OzBEQUlILDhEQUFDa0c7Z0RBQUlDLFdBQVU7O29EQUFpQztvREFDdkM7b0RBQ045QyxJQUFJaEQsS0FBSyxDQUFDdkUsTUFBTSxLQUFLLElBQ2xCLFFBQ0F1SCxJQUFJaEQsS0FBSyxDQUFDeUIsR0FBRyxDQUFDLENBQUNzQyxJQUFNeEosV0FBV3dKLEVBQUVsQixJQUFJLEdBQUc4RixJQUFJLENBQUM7Ozs7Ozs7O3VDQXpGL0MzRixJQUFJbkQsRUFBRTs7Ozs7Ozs7Ozs7Ozs7OztrQ0FnR25CLDhEQUFDZ0c7d0JBQUlDLFdBQVU7a0NBQ2IsNEVBQUN4TCxnRUFBV0E7NEJBQ1Y4QixVQUFVQSxZQUFZNEk7NEJBQ3RCNEQsY0FBYyxDQUFDQyxJQUFNak0sZUFBZWlNOzRCQUNwQ0MsY0FBYy9KOzRCQUNkWCxVQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNdEI7R0Fyd0JnQmxDO0tBQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNhbHZpXFxEZXNrdG9wXFxQZXJmVG9vbFxcc3JjXFxjb21wb25lbnRzXFxNYXJraW5nUGFuZWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE11c2ljUGxheWVyIH0gZnJvbSBcIkAvY29tcG9uZW50cy9NdXNpY1BsYXllclwiO1xuXG5pbnRlcmZhY2UgUGFydEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHRpbWVwb2ludF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbiAgdGltZXBvaW50X2VuZF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIFN1YnBhcnRJdGVtIHtcbiAgaWQ6IHN0cmluZztcbiAgcGFydF9pZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICB0aW1lcG9pbnRfc2Vjb25kcz86IG51bWJlciB8IG51bGw7XG4gIHRpbWVwb2ludF9lbmRfc2Vjb25kcz86IG51bWJlciB8IG51bGw7XG59XG5cbmludGVyZmFjZSBNYXJrIHtcbiAgaWQ6IHN0cmluZztcbiAgdGltZTogbnVtYmVyO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE1hcmtSb3cge1xuICBpZDogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xuICBub3RlPzogc3RyaW5nO1xuICBtYXJrczogTWFya1tdO1xufVxuXG50eXBlIEFzc2lnbm1lbnRWYWx1ZSA9XG4gIHwgc3RyaW5nXG4gIHwge1xuICAgICAgbWFya0lkPzogc3RyaW5nO1xuICAgICAgdGltZTogbnVtYmVyO1xuICAgIH07XG5cbmludGVyZmFjZSBNYXJraW5nUGFuZWxQcm9wcyB7XG4gIHBlcmZvcm1hbmNlSWQ6IHN0cmluZztcbiAgcGFydHM6IFBhcnRJdGVtW107XG4gIG11c2ljVXJsPzogc3RyaW5nIHwgbnVsbDtcbiAgcGVyZm9ybWFuY2VUaXRsZT86IHN0cmluZztcbiAgb25QYXJ0c1VwZGF0ZWQ6IChwYXJ0czogUGFydEl0ZW1bXSkgPT4gdm9pZDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZShzZWNvbmRzOiBudW1iZXIpIHtcbiAgY29uc3QgdG90YWwgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHNlY29uZHMpKTtcbiAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IodG90YWwgLyA2MCk7XG4gIGNvbnN0IHNlY3MgPSB0b3RhbCAlIDYwO1xuICByZXR1cm4gYCR7bWluc306JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWA7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZVN0cmluZyh2YWx1ZTogc3RyaW5nKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpO1xuICBpZiAoIXRyaW1tZWQpIHJldHVybiBudWxsO1xuICBpZiAoL15cXGQrKFxcLlxcZCspPyQvLnRlc3QodHJpbW1lZCkpIHJldHVybiBNYXRoLm1heCgwLCBwYXJzZUZsb2F0KHRyaW1tZWQpKTtcbiAgY29uc3QgcGFydHMgPSB0cmltbWVkLnNwbGl0KFwiOlwiKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGNvbnN0IG1pbnMgPSBwYXJzZUludChwYXJ0c1swXSwgMTApO1xuICAgIGNvbnN0IHNlY3MgPSBwYXJzZUZsb2F0KHBhcnRzWzFdKTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKG1pbnMpIHx8IE51bWJlci5pc05hTihzZWNzKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIG1pbnMgKiA2MCArIHNlY3MpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB1dWlkKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgMTApICsgRGF0ZS5ub3coKS50b1N0cmluZygzNik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBNYXJraW5nUGFuZWwoeyBwZXJmb3JtYW5jZUlkLCBwYXJ0cywgbXVzaWNVcmwsIHBlcmZvcm1hbmNlVGl0bGUsIG9uUGFydHNVcGRhdGVkIH06IE1hcmtpbmdQYW5lbFByb3BzKSB7XG4gIGNvbnN0IFtyb3dzLCBzZXRSb3dzXSA9IHVzZVN0YXRlPE1hcmtSb3dbXT4oW10pO1xuICBjb25zdCBbYWN0aXZlUm93SWQsIHNldEFjdGl2ZVJvd0lkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbYXNzaWdubWVudHMsIHNldEFzc2lnbm1lbnRzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIEFzc2lnbm1lbnRWYWx1ZT4+KHt9KTtcbiAgY29uc3QgW3N1YnBhcnRzQnlQYXJ0LCBzZXRTdWJwYXJ0c0J5UGFydF0gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBTdWJwYXJ0SXRlbVtdPj4oe30pO1xuICBjb25zdCBbbmV3U3VicGFydFRpdGxlLCBzZXROZXdTdWJwYXJ0VGl0bGVdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oe30pO1xuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2Vzc2lvblRpdGxlLCBzZXRTZXNzaW9uVGl0bGVdID0gdXNlU3RhdGUoXCJOZXcgTWFya2luZyBTZXNzaW9uXCIpO1xuICBjb25zdCBbY3VzdG9tVGl0bGUsIHNldEN1c3RvbVRpdGxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nlc3Npb25MaXN0LCBzZXRTZXNzaW9uTGlzdF0gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWRTZXNzaW9uSWQsIHNldFNlbGVjdGVkU2Vzc2lvbklkXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFthbGxTZXNzaW9ucywgc2V0QWxsU2Vzc2lvbnNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGVyZm9ybWFuY2VOYW1lTWFwLCBzZXRQZXJmb3JtYW5jZU5hbWVNYXBdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oe30pO1xuICBjb25zdCBbbXVzaWNEdXJhdGlvbiwgc2V0TXVzaWNEdXJhdGlvbl0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9DbGVhbnVwUmVmID0gdXNlUmVmPCgoKSA9PiB2b2lkKSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBhdWRpb1JlZiA9IHVzZVJlZjxIVE1MQXVkaW9FbGVtZW50PihudWxsKTtcbiAgY29uc3QgdGltZWxpbmVSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbbWFudWFsVGltZWxpbmVMZW5ndGgsIHNldE1hbnVhbFRpbWVsaW5lTGVuZ3RoXSA9IHVzZVN0YXRlPG51bWJlcj4oMTgwKTtcbiAgY29uc3QgW3BhcnRUaW1lbGluZU92ZXJyaWRlcywgc2V0UGFydFRpbWVsaW5lT3ZlcnJpZGVzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIHsgc3RhcnQ6IG51bWJlciB8IG51bGw7IGVuZDogbnVtYmVyIHwgbnVsbCB9Pj4oe30pO1xuICBjb25zdCBbc3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzLCBzZXRTdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgeyBzdGFydDogbnVtYmVyIHwgbnVsbDsgZW5kOiBudW1iZXIgfCBudWxsIH0+Pih7fSk7XG4gIGNvbnN0IFtkcmFnZ2luZ1BhcnRJZCwgc2V0RHJhZ2dpbmdQYXJ0SWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQ/LigpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVBdWRpb1JlYWR5ID0gKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCkgPT4ge1xuICAgIGlmIChhdWRpb0NsZWFudXBSZWYuY3VycmVudCkgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQoKTtcbiAgICBpZiAoIWF1ZGlvKSB7XG4gICAgICBzZXRNdXNpY0R1cmF0aW9uKG51bGwpO1xuICAgICAgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IE51bWJlci5pc0Zpbml0ZShhdWRpby5kdXJhdGlvbikgPyBhdWRpby5kdXJhdGlvbiA6IG51bGw7XG4gICAgICBzZXRNdXNpY0R1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICB9O1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCB1cGRhdGUpO1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJkdXJhdGlvbmNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIHVwZGF0ZSgpO1xuICAgIGF1ZGlvQ2xlYW51cFJlZi5jdXJyZW50ID0gKCkgPT4ge1xuICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsIHVwZGF0ZSk7XG4gICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHVyYXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGFzc2lnbmVkTWFya0NvdW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIE9iamVjdC52YWx1ZXMoYXNzaWdubWVudHMpLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvdW50c1t2YWx1ZV0gPSAoY291bnRzW3ZhbHVlXSB8fCAwKSArIDE7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlPy5tYXJrSWQpIHtcbiAgICAgICAgY291bnRzW3ZhbHVlLm1hcmtJZF0gPSAoY291bnRzW3ZhbHVlLm1hcmtJZF0gfHwgMCkgKyAxO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHM7XG4gIH0sIFthc3NpZ25tZW50c10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBmaXJzdFJvdyA9IHsgaWQ6IHV1aWQoKSwgbGFiZWw6IFwiUm93IDFcIiwgbm90ZTogXCJcIiwgbWFya3M6IFtdIH07XG4gICAgICBzZXRSb3dzKFtmaXJzdFJvd10pO1xuICAgICAgc2V0QWN0aXZlUm93SWQoZmlyc3RSb3cuaWQpO1xuICAgIH1cbiAgfSwgW3Jvd3MubGVuZ3RoXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY3VzdG9tVGl0bGUpIHJldHVybjtcbiAgICBjb25zdCB0aXRsZSA9IGAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX0gwrcgJHtwZXJmb3JtYW5jZVRpdGxlIHx8IFwiUGVyZm9ybWFuY2VcIn1gO1xuICAgIHNldFNlc3Npb25UaXRsZSh0aXRsZSk7XG4gIH0sIFtwZXJmb3JtYW5jZVRpdGxlLCBjdXN0b21UaXRsZV0pO1xuICBjb25zdCB0aW1lbGluZUxlbmd0aCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHRpbWVzOiBudW1iZXJbXSA9IFtdO1xuICAgIHBhcnRzLmZvckVhY2goKHBhcnQpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJyaWRlID0gcGFydFRpbWVsaW5lT3ZlcnJpZGVzW3BhcnQuaWRdO1xuICAgICAgY29uc3Qgc3RhcnQgPSBvdmVycmlkZT8uc3RhcnQgPz8gcGFydC50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBwYXJ0LnRpbWVwb2ludF9lbmRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsKSB0aW1lcy5wdXNoKHN0YXJ0KTtcbiAgICAgIGlmIChlbmQgIT09IG51bGwpIHRpbWVzLnB1c2goZW5kKTtcbiAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBlbmQgPT09IG51bGwpIHRpbWVzLnB1c2goc3RhcnQgKyAxMCk7XG4gICAgfSk7XG4gICAgT2JqZWN0LnZhbHVlcyhzdWJwYXJ0c0J5UGFydCkuZmxhdCgpLmZvckVhY2goKHN1YikgPT4ge1xuICAgICAgY29uc3Qgb3ZlcnJpZGUgPSBzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXNbc3ViLmlkXTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gb3ZlcnJpZGU/LnN0YXJ0ID8/IHN1Yi50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgY29uc3QgZW5kID0gb3ZlcnJpZGU/LmVuZCA/PyBzdWIudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgICBpZiAoc3RhcnQgIT09IG51bGwpIHRpbWVzLnB1c2goc3RhcnQpO1xuICAgICAgaWYgKGVuZCAhPT0gbnVsbCkgdGltZXMucHVzaChlbmQpO1xuICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsICYmIGVuZCA9PT0gbnVsbCkgdGltZXMucHVzaChzdGFydCArIDEwKTtcbiAgICB9KTtcbiAgICBjb25zdCBtYXhUaW1lID0gdGltZXMubGVuZ3RoID8gTWF0aC5tYXgoLi4udGltZXMpIDogMDtcbiAgICBpZiAobXVzaWNEdXJhdGlvbiAmJiBOdW1iZXIuaXNGaW5pdGUobXVzaWNEdXJhdGlvbikpIHJldHVybiBNYXRoLm1heChtdXNpY0R1cmF0aW9uLCBtYXhUaW1lLCAxMCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KG1hbnVhbFRpbWVsaW5lTGVuZ3RoLCBtYXhUaW1lLCAxMCk7XG4gIH0sIFttdXNpY0R1cmF0aW9uLCBtYW51YWxUaW1lbGluZUxlbmd0aCwgcGFydHMsIHN1YnBhcnRzQnlQYXJ0LCBwYXJ0VGltZWxpbmVPdmVycmlkZXMsIHN1YnBhcnRUaW1lbGluZU92ZXJyaWRlc10pO1xuXG4gIGNvbnN0IGdldFBhcnRTdGFydEVuZCA9IChwYXJ0OiBQYXJ0SXRlbSkgPT4ge1xuICAgIGNvbnN0IG92ZXJyaWRlID0gcGFydFRpbWVsaW5lT3ZlcnJpZGVzW3BhcnQuaWRdO1xuICAgIGNvbnN0IHN0YXJ0ID0gb3ZlcnJpZGU/LnN0YXJ0ID8/IHBhcnQudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbDtcbiAgICBjb25zdCBlbmQgPSBvdmVycmlkZT8uZW5kID8/IHBhcnQudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgcmV0dXJuIHsgc3RhcnQsIGVuZCB9O1xuICB9O1xuXG4gIGNvbnN0IHNldFBhcnRTdGFydEVuZCA9IChwYXJ0SWQ6IHN0cmluZywgc3RhcnQ6IG51bWJlciB8IG51bGwsIGVuZDogbnVtYmVyIHwgbnVsbCkgPT4ge1xuICAgIHNldFBhcnRUaW1lbGluZU92ZXJyaWRlcygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbcGFydElkXTogeyBzdGFydCwgZW5kIH0sXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IHNldFN1YnBhcnRTdGFydEVuZCA9IChzdWJwYXJ0SWQ6IHN0cmluZywgc3RhcnQ6IG51bWJlciB8IG51bGwsIGVuZDogbnVtYmVyIHwgbnVsbCkgPT4ge1xuICAgIHNldFN1YnBhcnRUaW1lbGluZU92ZXJyaWRlcygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbc3VicGFydElkXTogeyBzdGFydCwgZW5kIH0sXG4gICAgfSkpO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwZXJmb3JtYW5jZUlkKSByZXR1cm47XG4gICAgY29uc3QgZmV0Y2hTdWJwYXJ0cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcGFydHMubWFwKGFzeW5jIChwYXJ0KSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvc3VicGFydHM/cGFydElkPSR7cGFydC5pZH1gKTtcbiAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIFtwYXJ0LmlkLCBbXV0gYXMgY29uc3Q7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgcmV0dXJuIFtwYXJ0LmlkLCBkYXRhIHx8IFtdXSBhcyBjb25zdDtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIFN1YnBhcnRJdGVtW10+ID0ge307XG4gICAgICBlbnRyaWVzLmZvckVhY2goKFtwYXJ0SWQsIGxpc3RdKSA9PiB7XG4gICAgICAgIG1hcFtwYXJ0SWRdID0gbGlzdDtcbiAgICAgIH0pO1xuICAgICAgc2V0U3VicGFydHNCeVBhcnQobWFwKTtcbiAgICB9O1xuICAgIGZldGNoU3VicGFydHMoKTtcbiAgfSwgW3BlcmZvcm1hbmNlSWQsIHBhcnRzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXBlcmZvcm1hbmNlSWQpIHJldHVybjtcbiAgICBjb25zdCBmZXRjaFNlc3Npb25zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGFsbFNlc3Npb25zID8gXCIvYXBpL21hcmtpbmctc2Vzc2lvbnM/YWxsPTFcIiA6IGAvYXBpL21hcmtpbmctc2Vzc2lvbnM/cGVyZm9ybWFuY2VJZD0ke3BlcmZvcm1hbmNlSWR9YFxuICAgICAgKTtcbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHNldFNlc3Npb25MaXN0KGRhdGEgfHwgW10pO1xuICAgIH07XG4gICAgZmV0Y2hTZXNzaW9ucygpO1xuICB9LCBbcGVyZm9ybWFuY2VJZCwgYWxsU2Vzc2lvbnNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZldGNoUGVyZm9ybWFuY2VOYW1lcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9wZXJmb3JtYW5jZXNcIik7XG4gICAgICBpZiAoIXJlcy5vaykgcmV0dXJuO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgIChkYXRhIHx8IFtdKS5mb3JFYWNoKChwZXJmOiBhbnkpID0+IHtcbiAgICAgICAgbWFwW3BlcmYuaWRdID0gcGVyZi50aXRsZSB8fCBcIlBlcmZvcm1hbmNlXCI7XG4gICAgICB9KTtcbiAgICAgIHNldFBlcmZvcm1hbmNlTmFtZU1hcChtYXApO1xuICAgIH07XG4gICAgZmV0Y2hQZXJmb3JtYW5jZU5hbWVzKCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNvbnN0IHRhZyA9IHRhcmdldD8udGFnTmFtZT8udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICh0YWcgPT09IFwiaW5wdXRcIiB8fCB0YWcgPT09IFwidGV4dGFyZWFcIiB8fCB0YWcgPT09IFwic2VsZWN0XCIpIHJldHVybjtcblxuICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiU3BhY2VcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCByb3dJZCA9IGFjdGl2ZVJvd0lkIHx8IHJvd3NbMF0/LmlkO1xuICAgICAgICBpZiAoIXJvd0lkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG1hcms6IE1hcmsgPSB7XG4gICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICB0aW1lOiBjdXJyZW50VGltZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0Um93cygocHJldikgPT5cbiAgICAgICAgICBwcmV2Lm1hcCgocm93KSA9PlxuICAgICAgICAgICAgcm93LmlkID09PSByb3dJZCA/IHsgLi4ucm93LCBtYXJrczogWy4uLnJvdy5tYXJrcywgbWFya10gfSA6IHJvd1xuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJlXCIgfHwgZXZlbnQua2V5ID09PSBcIkVcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBuZXh0SW5kZXggPSByb3dzLmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnN0IG5ld1JvdzogTWFya1JvdyA9IHtcbiAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgIGxhYmVsOiBgUm93ICR7bmV4dEluZGV4fWAsXG4gICAgICAgICAgbm90ZTogXCJcIixcbiAgICAgICAgICBtYXJrczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldFJvd3MoKHByZXYpID0+IHtcbiAgICAgICAgICBjb25zdCBpZHggPSBhY3RpdmVSb3dJZCA/IHByZXYuZmluZEluZGV4KChyKSA9PiByLmlkID09PSBhY3RpdmVSb3dJZCkgOiBwcmV2Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBbLi4ucHJldiwgbmV3Um93XTtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICAgIG5leHQuc3BsaWNlKGlkeCArIDEsIDAsIG5ld1Jvdyk7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRBY3RpdmVSb3dJZChuZXdSb3cuaWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgfSwgW2FjdGl2ZVJvd0lkLCBjdXJyZW50VGltZSwgcm93c10pO1xuXG4gIGNvbnN0IGhhbmRsZURyb3BUb1JvdyA9IChyb3dJZDogc3RyaW5nLCBtYXJrSWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFJvd3MoKHByZXYpID0+IHtcbiAgICAgIGxldCBtb3ZlZDogTWFyayB8IG51bGwgPSBudWxsO1xuICAgICAgY29uc3QgcmVtb3ZlZCA9IHByZXYubWFwKChyb3cpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dE1hcmtzID0gcm93Lm1hcmtzLmZpbHRlcigobSkgPT4ge1xuICAgICAgICAgIGlmIChtLmlkID09PSBtYXJrSWQpIHtcbiAgICAgICAgICAgIG1vdmVkID0gbTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyAuLi5yb3csIG1hcmtzOiBuZXh0TWFya3MgfTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFtb3ZlZCkgcmV0dXJuIHByZXY7XG4gICAgICByZXR1cm4gcmVtb3ZlZC5tYXAoKHJvdykgPT5cbiAgICAgICAgcm93LmlkID09PSByb3dJZCA/IHsgLi4ucm93LCBtYXJrczogWy4uLnJvdy5tYXJrcywgbW92ZWQhXSB9IDogcm93XG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVJlbW92ZU1hcmsgPSAocm93SWQ6IHN0cmluZywgbWFya0lkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRSb3dzKChwcmV2KSA9PlxuICAgICAgcHJldi5tYXAoKHJvdykgPT5cbiAgICAgICAgcm93LmlkID09PSByb3dJZCA/IHsgLi4ucm93LCBtYXJrczogcm93Lm1hcmtzLmZpbHRlcigobSkgPT4gbS5pZCAhPT0gbWFya0lkKSB9IDogcm93XG4gICAgICApXG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBub3JtYWxpemVBc3NpZ25tZW50cyA9IChyb3dzU25hcHNob3Q6IE1hcmtSb3dbXSwgcmF3OiBSZWNvcmQ8c3RyaW5nLCBBc3NpZ25tZW50VmFsdWU+KSA9PiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZDogUmVjb3JkPHN0cmluZywgQXNzaWdubWVudFZhbHVlPiA9IHt9O1xuICAgIE9iamVjdC5lbnRyaWVzKHJhdyB8fCB7fSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IG1hcmsgPSByb3dzU25hcHNob3QuZmxhdE1hcCgocikgPT4gci5tYXJrcykuZmluZCgobSkgPT4gbS5pZCA9PT0gdmFsdWUpO1xuICAgICAgICBpZiAobWFyaykge1xuICAgICAgICAgIG5vcm1hbGl6ZWRba2V5XSA9IHsgbWFya0lkOiB2YWx1ZSwgdGltZTogbWFyay50aW1lIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG5vcm1hbGl6ZWRba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9O1xuXG4gIGNvbnN0IGdldEFzc2lnbmVkVGltZSA9ICh0YXJnZXRLZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gYXNzaWdubWVudHNbdGFyZ2V0S2V5XTtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgIGNvbnN0IG1hcmsgPSByb3cubWFya3MuZmluZCgobSkgPT4gbS5pZCA9PT0gdmFsdWUpO1xuICAgICAgICBpZiAobWFyaykgcmV0dXJuIG1hcmsudGltZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUudGltZSA/PyBudWxsO1xuICB9O1xuXG4gIGNvbnN0IGdldEV4aXN0aW5nVGltZSA9ICh0eXBlOiBcInBhcnRcIiB8IFwic3VicGFydFwiLCBpZDogc3RyaW5nLCBmaWVsZDogXCJzdGFydFwiIHwgXCJlbmRcIikgPT4ge1xuICAgIGlmICh0eXBlID09PSBcInBhcnRcIikge1xuICAgICAgY29uc3QgcGFydCA9IHBhcnRzLmZpbmQoKHApID0+IHAuaWQgPT09IGlkKTtcbiAgICAgIGlmICghcGFydCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gZmllbGQgPT09IFwic3RhcnRcIiA/IHBhcnQudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbCA6IHBhcnQudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHN1YiA9IE9iamVjdC52YWx1ZXMoc3VicGFydHNCeVBhcnQpLmZsYXQoKS5maW5kKChzKSA9PiBzLmlkID09PSBpZCk7XG4gICAgaWYgKCFzdWIpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBmaWVsZCA9PT0gXCJzdGFydFwiID8gc3ViLnRpbWVwb2ludF9zZWNvbmRzID8/IG51bGwgOiBzdWIudGltZXBvaW50X2VuZF9zZWNvbmRzID8/IG51bGw7XG4gIH07XG5cbiAgY29uc3QgYXNzaWduTWFya1RvVGFyZ2V0ID0gKHRhcmdldEtleTogc3RyaW5nLCBtYXJrSWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IFt0eXBlLCBpZCwgZmllbGRdID0gdGFyZ2V0S2V5LnNwbGl0KFwiOlwiKSBhcyBbXCJwYXJ0XCIgfCBcInN1YnBhcnRcIiwgc3RyaW5nLCBcInN0YXJ0XCIgfCBcImVuZFwiXTtcbiAgICBjb25zdCBtYXJrVGltZSA9IHJvd3MuZmxhdE1hcCgocikgPT4gci5tYXJrcykuZmluZCgobSkgPT4gbS5pZCA9PT0gbWFya0lkKT8udGltZTtcbiAgICBpZiAobWFya1RpbWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb3Bwb3NpdGVGaWVsZDogXCJzdGFydFwiIHwgXCJlbmRcIiA9IGZpZWxkID09PSBcInN0YXJ0XCIgPyBcImVuZFwiIDogXCJzdGFydFwiO1xuICAgIGNvbnN0IGFzc2lnbmVkT3Bwb3NpdGUgPSBnZXRBc3NpZ25lZFRpbWUoYCR7dHlwZX06JHtpZH06JHtvcHBvc2l0ZUZpZWxkfWApO1xuICAgIGNvbnN0IGV4aXN0aW5nT3Bwb3NpdGUgPSBnZXRFeGlzdGluZ1RpbWUodHlwZSwgaWQsIG9wcG9zaXRlRmllbGQpO1xuICAgIGNvbnN0IG9wcG9zaXRlVGltZSA9IGFzc2lnbmVkT3Bwb3NpdGUgPz8gZXhpc3RpbmdPcHBvc2l0ZTtcblxuICAgIGlmIChmaWVsZCA9PT0gXCJlbmRcIiAmJiBvcHBvc2l0ZVRpbWUgIT09IG51bGwgJiYgbWFya1RpbWUgPCBvcHBvc2l0ZVRpbWUpIHtcbiAgICAgIGFsZXJ0KFwiRW5kIHRpbWUgY2Fubm90IGJlIGJlZm9yZSBzdGFydCB0aW1lLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGZpZWxkID09PSBcInN0YXJ0XCIgJiYgb3Bwb3NpdGVUaW1lICE9PSBudWxsICYmIG1hcmtUaW1lID4gb3Bwb3NpdGVUaW1lKSB7XG4gICAgICBhbGVydChcIlN0YXJ0IHRpbWUgY2Fubm90IGJlIGFmdGVyIGVuZCB0aW1lLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRBc3NpZ25tZW50cygocHJldikgPT4gKHsgLi4ucHJldiwgW3RhcmdldEtleV06IHsgbWFya0lkLCB0aW1lOiBtYXJrVGltZSB9IH0pKTtcbiAgfTtcblxuICBjb25zdCBjbGVhckFzc2lnbm1lbnQgPSAodGFyZ2V0S2V5OiBzdHJpbmcpID0+IHtcbiAgICBzZXRBc3NpZ25tZW50cygocHJldikgPT4ge1xuICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9O1xuICAgICAgZGVsZXRlIG5leHRbdGFyZ2V0S2V5XTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlclRpbWVUYXJnZXQgPSAodHlwZTogXCJwYXJ0XCIgfCBcInN1YnBhcnRcIiwgaWQ6IHN0cmluZywgZmllbGQ6IFwic3RhcnRcIiB8IFwiZW5kXCIpID0+IHtcbiAgICBjb25zdCB0YXJnZXRLZXkgPSBgJHt0eXBlfToke2lkfToke2ZpZWxkfWA7XG4gICAgY29uc3QgYXNzaWduZWRWYWx1ZSA9IGFzc2lnbm1lbnRzW3RhcmdldEtleV07XG4gICAgY29uc3QgYXNzaWduZWRNYXJrSWQgPSB0eXBlb2YgYXNzaWduZWRWYWx1ZSA9PT0gXCJzdHJpbmdcIiA/IGFzc2lnbmVkVmFsdWUgOiBhc3NpZ25lZFZhbHVlPy5tYXJrSWQ7XG4gICAgY29uc3QgYXNzaWduZWRUaW1lID0gZ2V0QXNzaWduZWRUaW1lKHRhcmdldEtleSk7XG4gICAgY29uc3QgZXhpc3RpbmdUaW1lID0gZ2V0RXhpc3RpbmdUaW1lKHR5cGUsIGlkLCBmaWVsZCk7XG4gICAgY29uc3Qgc2hvd1RpbWUgPSBhc3NpZ25lZFRpbWUgIT09IG51bGwgPyBhc3NpZ25lZFRpbWUgOiBleGlzdGluZ1RpbWU7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2Bib3JkZXIgYm9yZGVyLWRhc2hlZCByb3VuZGVkIHB4LTIgcHktMSB0ZXh0LXhzIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yICR7XG4gICAgICAgICAgYXNzaWduZWRNYXJrSWQgPyBcImJvcmRlci1lbWVyYWxkLTQwMCBiZy1lbWVyYWxkLTUwXCIgOiBcImJvcmRlci1ncmF5LTMwMCBiZy13aGl0ZVwiXG4gICAgICAgIH1gfVxuICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICBvbkRyb3A9eyhlKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFya0lkID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIm1hcmtJZFwiKTtcbiAgICAgICAgICBpZiAoIW1hcmtJZCkgcmV0dXJuO1xuICAgICAgICAgIGFzc2lnbk1hcmtUb1RhcmdldCh0YXJnZXRLZXksIG1hcmtJZCk7XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDAgdXBwZXJjYXNlXCI+e2ZpZWxkfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwXCI+XG4gICAgICAgICAge3Nob3dUaW1lICE9PSBudWxsID8gZm9ybWF0VGltZShzaG93VGltZSkgOiBcIi0tOi0tXCJ9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAge2Fzc2lnbmVkTWFya0lkICYmIChcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0xIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCB0ZXh0LVsxMHB4XSBiZy1lbWVyYWxkLTYwMCB0ZXh0LXdoaXRlXCI+XG4gICAgICAgICAgICBDaGlwXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApfVxuICAgICAgICB7YXNzaWduZWRNYXJrSWQgJiYgKFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGNsZWFyQXNzaWdubWVudCh0YXJnZXRLZXkpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtYXV0byB0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwXCJcbiAgICAgICAgICAgIHRpdGxlPVwiUmVtb3ZlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICDDg+KAlFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTYXZlU2Vzc2lvbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgcGVyZm9ybWFuY2VfaWQ6IHBlcmZvcm1hbmNlSWQsXG4gICAgICB0aXRsZTogc2Vzc2lvblRpdGxlIHx8IFwiTWFya2luZyBTZXNzaW9uXCIsXG4gICAgICByb3dzLFxuICAgICAgYXNzaWdubWVudHMsXG4gICAgfTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcIi9hcGkvbWFya2luZy1zZXNzaW9uc1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgfSk7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBzZXRTZXNzaW9uTGlzdCgocHJldikgPT4gW2NyZWF0ZWQsIC4uLnByZXZdKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQXBwbHkgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0U2F2aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVzQnlQYXJ0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gICAgICBjb25zdCB1cGRhdGVzQnlTdWJwYXJ0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKGFzc2lnbm1lbnRzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgY29uc3QgW3R5cGUsIGlkLCBmaWVsZF0gPSBrZXkuc3BsaXQoXCI6XCIpIGFzIFtcInBhcnRcIiB8IFwic3VicGFydFwiLCBzdHJpbmcsIFwic3RhcnRcIiB8IFwiZW5kXCJdO1xuICAgICAgICBjb25zdCBtYXJrSWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZSA6IHZhbHVlPy5tYXJrSWQ7XG4gICAgICAgIGNvbnN0IG1hcmtUaW1lID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyByb3dzLmZsYXRNYXAoKHIpID0+IHIubWFya3MpLmZpbmQoKG0pID0+IG0uaWQgPT09IHZhbHVlKT8udGltZVxuICAgICAgICAgIDogdmFsdWU/LnRpbWU7XG4gICAgICAgIGlmIChtYXJrVGltZSA9PT0gdW5kZWZpbmVkIHx8IG1hcmtUaW1lID09PSBudWxsKSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlID09PSBcInBhcnRcIikge1xuICAgICAgICAgIHVwZGF0ZXNCeVBhcnRbaWRdID0gdXBkYXRlc0J5UGFydFtpZF0gfHwge307XG4gICAgICAgICAgdXBkYXRlc0J5UGFydFtpZF1bZmllbGQgPT09IFwic3RhcnRcIiA/IFwidGltZXBvaW50X3NlY29uZHNcIiA6IFwidGltZXBvaW50X2VuZF9zZWNvbmRzXCJdID0gbWFya1RpbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlc0J5U3VicGFydFtpZF0gPSB1cGRhdGVzQnlTdWJwYXJ0W2lkXSB8fCB7fTtcbiAgICAgICAgICB1cGRhdGVzQnlTdWJwYXJ0W2lkXVtmaWVsZCA9PT0gXCJzdGFydFwiID8gXCJ0aW1lcG9pbnRfc2Vjb25kc1wiIDogXCJ0aW1lcG9pbnRfZW5kX3NlY29uZHNcIl0gPSBtYXJrVGltZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRQYXJ0czogUGFydEl0ZW1bXSA9IFtdO1xuICAgICAgY29uc3QgdXBkYXRlZFN1YnBhcnRzOiBTdWJwYXJ0SXRlbVtdID0gW107XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgT2JqZWN0LmVudHJpZXModXBkYXRlc0J5UGFydCkubWFwKGFzeW5jIChbcGFydElkLCBwYXlsb2FkXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL3BhcnRzLyR7cGFydElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgdXBkYXRlZFBhcnRzLnB1c2godXBkYXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZXNCeVN1YnBhcnQpLm1hcChhc3luYyAoW3N1YnBhcnRJZCwgcGF5bG9hZF0pID0+IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9zdWJwYXJ0cy8ke3N1YnBhcnRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVkKSB1cGRhdGVkU3VicGFydHMucHVzaCh1cGRhdGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBpZiAodXBkYXRlZFBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb25QYXJ0c1VwZGF0ZWQoXG4gICAgICAgICAgcGFydHMubWFwKChwYXJ0KSA9PiB1cGRhdGVkUGFydHMuZmluZCgodSkgPT4gdS5pZCA9PT0gcGFydC5pZCkgfHwgcGFydClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICh1cGRhdGVkU3VicGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICBzZXRTdWJwYXJ0c0J5UGFydCgocHJldikgPT4ge1xuICAgICAgICAgIGNvbnN0IG5leHQgPSB7IC4uLnByZXYgfTtcbiAgICAgICAgICB1cGRhdGVkU3VicGFydHMuZm9yRWFjaCgoc3ViKSA9PiB7XG4gICAgICAgICAgICBuZXh0W3N1Yi5wYXJ0X2lkXSA9IChuZXh0W3N1Yi5wYXJ0X2lkXSB8fCBbXSkubWFwKChzKSA9PlxuICAgICAgICAgICAgICBzLmlkID09PSBzdWIuaWQgPyB7IC4uLnMsIC4uLnN1YiB9IDogc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFNhdmluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVTYXZlVGltZWxpbmUgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0U2F2aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVzQnlQYXJ0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gICAgICBjb25zdCB1cGRhdGVzQnlTdWJwYXJ0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgICAgIHBhcnRzLmZvckVhY2goKHBhcnQpID0+IHtcbiAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSBnZXRQYXJ0U3RhcnRFbmQocGFydCk7XG4gICAgICAgIGlmIChzdGFydCAhPT0gbnVsbCkge1xuICAgICAgICAgIHVwZGF0ZXNCeVBhcnRbcGFydC5pZF0gPSB7XG4gICAgICAgICAgICB0aW1lcG9pbnRfc2Vjb25kczogc3RhcnQsXG4gICAgICAgICAgICB0aW1lcG9pbnRfZW5kX3NlY29uZHM6IGVuZCA/PyBudWxsLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBPYmplY3QudmFsdWVzKHN1YnBhcnRzQnlQYXJ0KS5mbGF0KCkuZm9yRWFjaCgoc3ViKSA9PiB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gc3VicGFydFRpbWVsaW5lT3ZlcnJpZGVzW3N1Yi5pZF07XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gb3ZlcnJpZGU/LnN0YXJ0ID8/IHN1Yi50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsO1xuICAgICAgICBjb25zdCBlbmQgPSBvdmVycmlkZT8uZW5kID8/IHN1Yi50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsKSB7XG4gICAgICAgICAgdXBkYXRlc0J5U3VicGFydFtzdWIuaWRdID0ge1xuICAgICAgICAgICAgdGltZXBvaW50X3NlY29uZHM6IHN0YXJ0LFxuICAgICAgICAgICAgdGltZXBvaW50X2VuZF9zZWNvbmRzOiBlbmQgPz8gbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdXBkYXRlZFBhcnRzOiBQYXJ0SXRlbVtdID0gW107XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgT2JqZWN0LmVudHJpZXModXBkYXRlc0J5UGFydCkubWFwKGFzeW5jIChbcGFydElkLCBwYXlsb2FkXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL3BhcnRzLyR7cGFydElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgdXBkYXRlZFBhcnRzLnB1c2godXBkYXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZXNCeVN1YnBhcnQpLm1hcChhc3luYyAoW3N1YnBhcnRJZCwgcGF5bG9hZF0pID0+IHtcbiAgICAgICAgICBhd2FpdCBmZXRjaChgL2FwaS9zdWJwYXJ0cy8ke3N1YnBhcnRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGlmICh1cGRhdGVkUGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICBvblBhcnRzVXBkYXRlZChcbiAgICAgICAgICBwYXJ0cy5tYXAoKHBhcnQpID0+IHVwZGF0ZWRQYXJ0cy5maW5kKCh1KSA9PiB1LmlkID09PSBwYXJ0LmlkKSB8fCBwYXJ0KVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIHhsOmdyaWQtY29scy1bMzIwcHhfMWZyXSBnYXAtNlwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+UGFydHMgJiBTdWJwYXJ0czwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBtYi00XCI+XG4gICAgICAgICAgRHJvcCB0aW1lIGNoaXBzIG9udG8gU3RhcnQvRW5kLiBPbmx5IGRyb3BwZWQgY2hpcHMgY2hhbmdlIHRpbWVwb2ludHMgd2hlbiBzYXZlZC5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAge3BhcnRzLm1hcCgocGFydCkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e3BhcnQuaWR9IGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPntwYXJ0Lm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiBtYi0yXCI+XG4gICAgICAgICAgICAgICAge3JlbmRlclRpbWVUYXJnZXQoXCJwYXJ0XCIsIHBhcnQuaWQsIFwic3RhcnRcIil9XG4gICAgICAgICAgICAgICAge3JlbmRlclRpbWVUYXJnZXQoXCJwYXJ0XCIsIHBhcnQuaWQsIFwiZW5kXCIpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgeyhzdWJwYXJ0c0J5UGFydFtwYXJ0LmlkXSB8fCBbXSkubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgeyhzdWJwYXJ0c0J5UGFydFtwYXJ0LmlkXSB8fCBbXSkubWFwKChzdWIpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3N1Yi5pZH0gY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTEwMCByb3VuZGVkIHAtMiBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMFwiPntzdWIudGl0bGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC0yIG10LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJUaW1lVGFyZ2V0KFwic3VicGFydFwiLCBzdWIuaWQsIFwic3RhcnRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyVGltZVRhcmdldChcInN1YnBhcnRcIiwgc3ViLmlkLCBcImVuZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17bmV3U3VicGFydFRpdGxlW3BhcnQuaWRdIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgIHNldE5ld1N1YnBhcnRUaXRsZSgocHJldikgPT4gKHsgLi4ucHJldiwgW3BhcnQuaWRdOiBlLnRhcmdldC52YWx1ZSB9KSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQWRkIHN1YnBhcnRcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIHB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC14c1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gKG5ld1N1YnBhcnRUaXRsZVtwYXJ0LmlkXSB8fCBcIlwiKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGl0bGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL3N1YnBhcnRzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhcnRfaWQ6IHBhcnQuaWQsIHRpdGxlIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFN1YnBhcnRzQnlQYXJ0KChwcmV2KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwYXJ0LmlkXTogWy4uLihwcmV2W3BhcnQuaWRdIHx8IFtdKSwgY3JlYXRlZF0sXG4gICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldE5ld1N1YnBhcnRUaXRsZSgocHJldikgPT4gKHsgLi4ucHJldiwgW3BhcnQuaWRdOiBcIlwiIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgdGV4dC14c1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQWRkXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5NYXJraW5nIFNlc3Npb248L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtYXV0byBmbGV4IGdhcC0yIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2Vzc2lvblRpdGxlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2Vzc2lvblRpdGxlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIHNldEN1c3RvbVRpdGxlKHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlc3Npb24gdGl0bGVcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2F2ZVNlc3Npb259XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcm91bmRlZCB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNhdmUgU2Vzc2lvblxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFwcGx5fVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzYXZpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZCB0ZXh0LXNtIGRpc2FibGVkOmJnLWdyYXktNDAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzYXZpbmcgPyBcIlNhdmluZy4uLlwiIDogXCJBcHBseSBUaW1lcG9pbnRzXCJ9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMlwiPlxuICAgICAgICAgICAgSG90a2V5czogU3BhY2UgPSBtYXJrIHRpbWUsIEUgPSBuZXcgcm93LiBXb3JrcyB3aGlsZSBtdXNpYyBpcyBwbGF5aW5nIG9yIHBhdXNlZC5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0xXCI+XG4gICAgICAgICAgICBNdXNpYyBsZW5ndGg6IHttdXNpY0R1cmF0aW9uID8gZm9ybWF0VGltZShtdXNpY0R1cmF0aW9uKSA6IFwiw6/Cv8K9XCJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci1kYXNoZWQgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgcC0zIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgV2F2ZWZvcm0gdmlldzogbm90IGF2YWlsYWJsZSB5ZXQuIFdlIGNhbiBhZGQgYSB3YXZlZm9ybSBwcmV2aWV3IGluIGEgZm9sbG93LXVwLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBmbGV4IGZsZXgtd3JhcCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkU2Vzc2lvbklkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkU2Vzc2lvbklkKGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvbWFya2luZy1zZXNzaW9ucy8ke2lkfWApO1xuICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgc2V0U2Vzc2lvblRpdGxlKGRhdGEudGl0bGUgfHwgXCJNYXJraW5nIFNlc3Npb25cIik7XG4gICAgICAgICAgICAgICAgc2V0Q3VzdG9tVGl0bGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFJvd3MgPSAoZGF0YS5yb3dzIHx8IFtdKS5tYXAoKHJvdzogTWFya1JvdykgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC4uLnJvdyxcbiAgICAgICAgICAgICAgICAgIG5vdGU6IHJvdy5ub3RlIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHNldFJvd3MobmV4dFJvd3MpO1xuICAgICAgICAgICAgICAgIHNldEFzc2lnbm1lbnRzKG5vcm1hbGl6ZUFzc2lnbm1lbnRzKG5leHRSb3dzLCBkYXRhLmFzc2lnbm1lbnRzIHx8IHt9KSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj5Mb2FkIHNhdmVkIHNlc3Npb24uLi48L29wdGlvbj5cbiAgICAgICAgICAgICAge3Nlc3Npb25MaXN0Lm1hcCgoc2VzcykgPT4gKFxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtzZXNzLmlkfSB2YWx1ZT17c2Vzcy5pZH0+XG4gICAgICAgICAgICAgICAgICB7c2Vzcy50aXRsZSB8fCBcIlVudGl0bGVkXCJ9IMOvwr/CvSB7cGVyZm9ybWFuY2VOYW1lTWFwW3Nlc3MucGVyZm9ybWFuY2VfaWRdIHx8IFwiUGVyZm9ybWFuY2VcIn0gw6/Cv8K9IHtuZXcgRGF0ZShzZXNzLmNyZWF0ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgY2hlY2tlZD17YWxsU2Vzc2lvbnN9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBbGxTZXNzaW9ucyhlLnRhcmdldC5jaGVja2VkKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTQgdy00XCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgU2hvdyBzZXNzaW9ucyBmcm9tIGFsbCBwZXJmb3JtYW5jZXNcbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJvdyA9IHsgaWQ6IHV1aWQoKSwgbGFiZWw6IFwiUm93IDFcIiwgbm90ZTogXCJcIiwgbWFya3M6IFtdIH07XG4gICAgICAgICAgICAgICAgc2V0Um93cyhbZmlyc3RSb3ddKTtcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVSb3dJZChmaXJzdFJvdy5pZCk7XG4gICAgICAgICAgICAgICAgc2V0QXNzaWdubWVudHMoe30pO1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkU2Vzc2lvbklkKFwiXCIpO1xuICAgICAgICAgICAgICAgIHNldEN1c3RvbVRpdGxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgTmV3IFNlc3Npb25cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTNcIj5NYXJrIENoaXBzPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIHtyb3dzLm1hcCgocm93KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e3Jvdy5pZH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVSb3dJZChyb3cuaWQpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJvcmRlciByb3VuZGVkLWxnIHAtMyBjdXJzb3ItcG9pbnRlciAke1xuICAgICAgICAgICAgICAgICAgYWN0aXZlUm93SWQgPT09IHJvdy5pZCA/IFwiYm9yZGVyLWJsdWUtNDAwIGJnLWJsdWUtNTBcIiA6IFwiYm9yZGVyLWdyYXktMjAwXCJcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVSb3dJZChyb3cuaWQpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVSb3dJZCA9PT0gcm93LmlkID8gXCJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlXCIgOiBcImJnLWdyYXktMTAwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3Jvdy5sYWJlbH1cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+RHJvcCBjaGlwcyBpbnRvIHRoZSBlbXB0eSBzbG90IHRvIG9yZ2FuaXplLjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIHtyb3dzLmxlbmd0aCA+IDEgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSb3dzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigocikgPT4gci5pZCAhPT0gcm93LmlkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlUm93SWQgPT09IHJvdy5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWxsYmFjayA9IHJvd3MuZmluZCgocikgPT4gci5pZCAhPT0gcm93LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlUm93SWQoZmFsbGJhY2sgPyBmYWxsYmFjay5pZCA6IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtYXV0byB0ZXh0LXhzIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC04MDBcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgRGVsZXRlIFJvd1xuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17cm93Lm5vdGUgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgc2V0Um93cygocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICBwcmV2Lm1hcCgocikgPT4gKHIuaWQgPT09IHJvdy5pZCA/IHsgLi4uciwgbm90ZTogZS50YXJnZXQudmFsdWUgfSA6IHIpKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlJvdyBub3Rlcy4uLlwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCB0ZXh0LXhzIG1iLTJcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAge3Jvdy5tYXJrcy5tYXAoKG1hcmspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNhZ2UgPSBhc3NpZ25lZE1hcmtDb3VudHNbbWFyay5pZF0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JDbGFzcyA9XG4gICAgICAgICAgICAgICAgICAgICAgdXNhZ2UgPj0gMlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLWdyYXktMjAwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYmcteWVsbG93LTIwMCB0ZXh0LXllbGxvdy05MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctaW5kaWdvLTEwMCB0ZXh0LWluZGlnby04MDBcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGtleT17bWFyay5pZH1cbiAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGVcbiAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydD17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJtYXJrSWRcIiwgbWFyay5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzIGN1cnNvci1tb3ZlICR7Y29sb3JDbGFzc31gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2Zvcm1hdFRpbWUobWFyay50aW1lKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVJlbW92ZU1hcmsocm93LmlkLCBtYXJrLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1bMTBweF0gdGV4dC1ncmF5LTYwMCBob3Zlcjp0ZXh0LWdyYXktODAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgY2hpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIMOvwr/CvVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWRhc2hlZCBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIlxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0lkID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIm1hcmtJZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcmtJZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURyb3BUb1Jvdyhyb3cuaWQsIG1hcmtJZCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIEVtcHR5IHNsb3RcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LVsxMXB4XSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICBUaW1lczp7XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7cm93Lm1hcmtzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICA/IFwiw6/Cv8K9XCJcbiAgICAgICAgICAgICAgICAgICAgOiByb3cubWFya3MubWFwKChtKSA9PiBmb3JtYXRUaW1lKG0udGltZSkpLmpvaW4oXCIsIFwiKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPE11c2ljUGxheWVyXG4gICAgICAgICAgICBtdXNpY1VybD17bXVzaWNVcmwgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgb25UaW1lVXBkYXRlPXsodCkgPT4gc2V0Q3VycmVudFRpbWUodCl9XG4gICAgICAgICAgICBvbkF1ZGlvUmVhZHk9e2hhbmRsZUF1ZGlvUmVhZHl9XG4gICAgICAgICAgICBhdWRpb1JlZj17YXVkaW9SZWZ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwiTXVzaWNQbGF5ZXIiLCJmb3JtYXRUaW1lIiwic2Vjb25kcyIsInRvdGFsIiwiTWF0aCIsIm1heCIsImZsb29yIiwibWlucyIsInNlY3MiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwicGFyc2VUaW1lU3RyaW5nIiwidmFsdWUiLCJ0cmltbWVkIiwidHJpbSIsInRlc3QiLCJwYXJzZUZsb2F0IiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInBhcnNlSW50IiwiTnVtYmVyIiwiaXNOYU4iLCJ1dWlkIiwicmFuZG9tIiwic2xpY2UiLCJEYXRlIiwibm93IiwiTWFya2luZ1BhbmVsIiwicGVyZm9ybWFuY2VJZCIsIm11c2ljVXJsIiwicGVyZm9ybWFuY2VUaXRsZSIsIm9uUGFydHNVcGRhdGVkIiwicm93cyIsInNldFJvd3MiLCJhY3RpdmVSb3dJZCIsInNldEFjdGl2ZVJvd0lkIiwiY3VycmVudFRpbWUiLCJzZXRDdXJyZW50VGltZSIsImFzc2lnbm1lbnRzIiwic2V0QXNzaWdubWVudHMiLCJzdWJwYXJ0c0J5UGFydCIsInNldFN1YnBhcnRzQnlQYXJ0IiwibmV3U3VicGFydFRpdGxlIiwic2V0TmV3U3VicGFydFRpdGxlIiwic2F2aW5nIiwic2V0U2F2aW5nIiwic2Vzc2lvblRpdGxlIiwic2V0U2Vzc2lvblRpdGxlIiwiY3VzdG9tVGl0bGUiLCJzZXRDdXN0b21UaXRsZSIsInNlc3Npb25MaXN0Iiwic2V0U2Vzc2lvbkxpc3QiLCJzZWxlY3RlZFNlc3Npb25JZCIsInNldFNlbGVjdGVkU2Vzc2lvbklkIiwiYWxsU2Vzc2lvbnMiLCJzZXRBbGxTZXNzaW9ucyIsInBlcmZvcm1hbmNlTmFtZU1hcCIsInNldFBlcmZvcm1hbmNlTmFtZU1hcCIsIm11c2ljRHVyYXRpb24iLCJzZXRNdXNpY0R1cmF0aW9uIiwiYXVkaW9DbGVhbnVwUmVmIiwiYXVkaW9SZWYiLCJ0aW1lbGluZVJlZiIsIm1hbnVhbFRpbWVsaW5lTGVuZ3RoIiwic2V0TWFudWFsVGltZWxpbmVMZW5ndGgiLCJwYXJ0VGltZWxpbmVPdmVycmlkZXMiLCJzZXRQYXJ0VGltZWxpbmVPdmVycmlkZXMiLCJzdWJwYXJ0VGltZWxpbmVPdmVycmlkZXMiLCJzZXRTdWJwYXJ0VGltZWxpbmVPdmVycmlkZXMiLCJkcmFnZ2luZ1BhcnRJZCIsInNldERyYWdnaW5nUGFydElkIiwiY3VycmVudCIsImhhbmRsZUF1ZGlvUmVhZHkiLCJhdWRpbyIsInVwZGF0ZSIsImR1cmF0aW9uIiwiaXNGaW5pdGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFzc2lnbmVkTWFya0NvdW50cyIsImNvdW50cyIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJtYXJrSWQiLCJmaXJzdFJvdyIsImlkIiwibGFiZWwiLCJub3RlIiwibWFya3MiLCJ0aXRsZSIsInRvTG9jYWxlU3RyaW5nIiwidGltZWxpbmVMZW5ndGgiLCJ0aW1lcyIsInBhcnQiLCJvdmVycmlkZSIsInN0YXJ0IiwidGltZXBvaW50X3NlY29uZHMiLCJlbmQiLCJ0aW1lcG9pbnRfZW5kX3NlY29uZHMiLCJwdXNoIiwiZmxhdCIsInN1YiIsIm1heFRpbWUiLCJnZXRQYXJ0U3RhcnRFbmQiLCJzZXRQYXJ0U3RhcnRFbmQiLCJwYXJ0SWQiLCJwcmV2Iiwic2V0U3VicGFydFN0YXJ0RW5kIiwic3VicGFydElkIiwiZmV0Y2hTdWJwYXJ0cyIsImVudHJpZXMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicmVzIiwiZmV0Y2giLCJvayIsImRhdGEiLCJqc29uIiwibGlzdCIsImZldGNoU2Vzc2lvbnMiLCJmZXRjaFBlcmZvcm1hbmNlTmFtZXMiLCJwZXJmIiwiaGFuZGxlS2V5RG93biIsImV2ZW50IiwidGFyZ2V0IiwidGFnIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiY29kZSIsInByZXZlbnREZWZhdWx0Iiwicm93SWQiLCJtYXJrIiwidGltZSIsImNyZWF0ZWRBdCIsInRvSVNPU3RyaW5nIiwicm93Iiwia2V5IiwibmV4dEluZGV4IiwibmV3Um93IiwiaWR4IiwiZmluZEluZGV4IiwiciIsIm5leHQiLCJzcGxpY2UiLCJ3aW5kb3ciLCJoYW5kbGVEcm9wVG9Sb3ciLCJtb3ZlZCIsInJlbW92ZWQiLCJuZXh0TWFya3MiLCJmaWx0ZXIiLCJtIiwiaGFuZGxlUmVtb3ZlTWFyayIsIm5vcm1hbGl6ZUFzc2lnbm1lbnRzIiwicm93c1NuYXBzaG90IiwicmF3Iiwibm9ybWFsaXplZCIsImZsYXRNYXAiLCJmaW5kIiwiZ2V0QXNzaWduZWRUaW1lIiwidGFyZ2V0S2V5IiwiZ2V0RXhpc3RpbmdUaW1lIiwidHlwZSIsImZpZWxkIiwicCIsInMiLCJhc3NpZ25NYXJrVG9UYXJnZXQiLCJtYXJrVGltZSIsInVuZGVmaW5lZCIsIm9wcG9zaXRlRmllbGQiLCJhc3NpZ25lZE9wcG9zaXRlIiwiZXhpc3RpbmdPcHBvc2l0ZSIsIm9wcG9zaXRlVGltZSIsImFsZXJ0IiwiY2xlYXJBc3NpZ25tZW50IiwicmVuZGVyVGltZVRhcmdldCIsImFzc2lnbmVkVmFsdWUiLCJhc3NpZ25lZE1hcmtJZCIsImFzc2lnbmVkVGltZSIsImV4aXN0aW5nVGltZSIsInNob3dUaW1lIiwiZGl2IiwiY2xhc3NOYW1lIiwib25EcmFnT3ZlciIsImUiLCJvbkRyb3AiLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwic3BhbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJoYW5kbGVTYXZlU2Vzc2lvbiIsInBheWxvYWQiLCJwZXJmb3JtYW5jZV9pZCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZWQiLCJoYW5kbGVBcHBseSIsInVwZGF0ZXNCeVBhcnQiLCJ1cGRhdGVzQnlTdWJwYXJ0IiwidXBkYXRlZFBhcnRzIiwidXBkYXRlZFN1YnBhcnRzIiwidXBkYXRlZCIsInUiLCJwYXJ0X2lkIiwiaGFuZGxlU2F2ZVRpbWVsaW5lIiwibmFtZSIsImlucHV0Iiwib25DaGFuZ2UiLCJwbGFjZWhvbGRlciIsImRpc2FibGVkIiwic2VsZWN0IiwibmV4dFJvd3MiLCJvcHRpb24iLCJzZXNzIiwiY3JlYXRlZF9hdCIsImNoZWNrZWQiLCJzdG9wUHJvcGFnYXRpb24iLCJmYWxsYmFjayIsInVzYWdlIiwiY29sb3JDbGFzcyIsImRyYWdnYWJsZSIsIm9uRHJhZ1N0YXJ0Iiwic2V0RGF0YSIsImpvaW4iLCJvblRpbWVVcGRhdGUiLCJ0Iiwib25BdWRpb1JlYWR5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MarkingPanel.tsx\n"));

/***/ })

});