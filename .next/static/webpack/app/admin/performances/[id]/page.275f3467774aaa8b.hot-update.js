"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/performances/[id]/page",{

/***/ "(app-pages-browser)/./src/components/MarkingPanel.tsx":
/*!*****************************************!*\
  !*** ./src/components/MarkingPanel.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MarkingPanel: () => (/* binding */ MarkingPanel)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/MusicPlayer */ \"(app-pages-browser)/./src/components/MusicPlayer.tsx\");\n/* __next_internal_client_entry_do_not_use__ MarkingPanel auto */ \nvar _s = $RefreshSig$();\n\n\nfunction formatTime(seconds) {\n    const total = Math.max(0, Math.floor(seconds));\n    const mins = Math.floor(total / 60);\n    const secs = total % 60;\n    return \"\".concat(mins, \":\").concat(secs.toString().padStart(2, \"0\"));\n}\nfunction uuid() {\n    return Math.random().toString(36).slice(2, 10) + Date.now().toString(36);\n}\nfunction MarkingPanel(param) {\n    let { performanceId, parts, musicUrl, performanceTitle, onPartsUpdated } = param;\n    _s();\n    const [rows, setRows] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeRowId, setActiveRowId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [assignments, setAssignments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [subpartsByPart, setSubpartsByPart] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [newSubpartTitle, setNewSubpartTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionTitle, setSessionTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"New Marking Session\");\n    const [customTitle, setCustomTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sessionList, setSessionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedSessionId, setSelectedSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [allSessions, setAllSessions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [performanceNameMap, setPerformanceNameMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [musicDuration, setMusicDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioCleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            return ({\n                \"MarkingPanel.useEffect\": ()=>{\n                    var _audioCleanupRef_current;\n                    (_audioCleanupRef_current = audioCleanupRef.current) === null || _audioCleanupRef_current === void 0 ? void 0 : _audioCleanupRef_current.call(audioCleanupRef);\n                }\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    const handleAudioReady = (audio)=>{\n        if (audioCleanupRef.current) audioCleanupRef.current();\n        if (!audio) {\n            setMusicDuration(null);\n            audioCleanupRef.current = null;\n            return;\n        }\n        const update = ()=>{\n            const duration = Number.isFinite(audio.duration) ? audio.duration : null;\n            setMusicDuration(duration);\n        };\n        audio.addEventListener(\"loadedmetadata\", update);\n        audio.addEventListener(\"durationchange\", update);\n        update();\n        audioCleanupRef.current = ()=>{\n            audio.removeEventListener(\"loadedmetadata\", update);\n            audio.removeEventListener(\"durationchange\", update);\n        };\n    };\n    const assignedMarkCounts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MarkingPanel.useMemo[assignedMarkCounts]\": ()=>{\n            const counts = {};\n            Object.values(assignments).forEach({\n                \"MarkingPanel.useMemo[assignedMarkCounts]\": (value)=>{\n                    if (typeof value === \"string\") {\n                        counts[value] = (counts[value] || 0) + 1;\n                    } else if (value === null || value === void 0 ? void 0 : value.markId) {\n                        counts[value.markId] = (counts[value.markId] || 0) + 1;\n                    }\n                }\n            }[\"MarkingPanel.useMemo[assignedMarkCounts]\"]);\n            return counts;\n        }\n    }[\"MarkingPanel.useMemo[assignedMarkCounts]\"], [\n        assignments\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (rows.length === 0) {\n                const firstRow = {\n                    id: uuid(),\n                    label: \"Row 1\",\n                    note: \"\",\n                    marks: []\n                };\n                setRows([\n                    firstRow\n                ]);\n                setActiveRowId(firstRow.id);\n            }\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        rows.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (customTitle) return;\n            const title = \"\".concat(new Date().toLocaleString(), \" \\xc2\\xb7 \").concat(performanceTitle || \"Performance\");\n            setSessionTitle(title);\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceTitle,\n        customTitle\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSubparts = {\n                \"MarkingPanel.useEffect.fetchSubparts\": async ()=>{\n                    const entries = await Promise.all(parts.map({\n                        \"MarkingPanel.useEffect.fetchSubparts\": async (part)=>{\n                            const res = await fetch(\"/api/subparts?partId=\".concat(part.id));\n                            if (!res.ok) return [\n                                part.id,\n                                []\n                            ];\n                            const data = await res.json();\n                            return [\n                                part.id,\n                                data || []\n                            ];\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]));\n                    const map = {};\n                    entries.forEach({\n                        \"MarkingPanel.useEffect.fetchSubparts\": (param)=>{\n                            let [partId, list] = param;\n                            map[partId] = list;\n                        }\n                    }[\"MarkingPanel.useEffect.fetchSubparts\"]);\n                    setSubpartsByPart(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchSubparts\"];\n            fetchSubparts();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        parts\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            if (!performanceId) return;\n            const fetchSessions = {\n                \"MarkingPanel.useEffect.fetchSessions\": async ()=>{\n                    const res = await fetch(allSessions ? \"/api/marking-sessions?all=1\" : \"/api/marking-sessions?performanceId=\".concat(performanceId));\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    setSessionList(data || []);\n                }\n            }[\"MarkingPanel.useEffect.fetchSessions\"];\n            fetchSessions();\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        performanceId,\n        allSessions\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const fetchPerformanceNames = {\n                \"MarkingPanel.useEffect.fetchPerformanceNames\": async ()=>{\n                    const res = await fetch(\"/api/performances\");\n                    if (!res.ok) return;\n                    const data = await res.json();\n                    const map = {};\n                    (data || []).forEach({\n                        \"MarkingPanel.useEffect.fetchPerformanceNames\": (perf)=>{\n                            map[perf.id] = perf.title || \"Performance\";\n                        }\n                    }[\"MarkingPanel.useEffect.fetchPerformanceNames\"]);\n                    setPerformanceNameMap(map);\n                }\n            }[\"MarkingPanel.useEffect.fetchPerformanceNames\"];\n            fetchPerformanceNames();\n        }\n    }[\"MarkingPanel.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MarkingPanel.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"MarkingPanel.useEffect.handleKeyDown\": (event)=>{\n                    var _target_tagName;\n                    const target = event.target;\n                    const tag = target === null || target === void 0 ? void 0 : (_target_tagName = target.tagName) === null || _target_tagName === void 0 ? void 0 : _target_tagName.toLowerCase();\n                    if (tag === \"input\" || tag === \"textarea\" || tag === \"select\") return;\n                    if (event.code === \"Space\") {\n                        var _rows_;\n                        event.preventDefault();\n                        const rowId = activeRowId || ((_rows_ = rows[0]) === null || _rows_ === void 0 ? void 0 : _rows_.id);\n                        if (!rowId) return;\n                        const mark = {\n                            id: uuid(),\n                            time: currentTime,\n                            createdAt: new Date().toISOString()\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>prev.map({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (row)=>row.id === rowId ? {\n                                            ...row,\n                                            marks: [\n                                                ...row.marks,\n                                                mark\n                                            ]\n                                        } : row\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"])\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                    }\n                    if (event.key === \"e\" || event.key === \"E\") {\n                        event.preventDefault();\n                        const nextIndex = rows.length + 1;\n                        const newRow = {\n                            id: uuid(),\n                            label: \"Row \".concat(nextIndex),\n                            note: \"\",\n                            marks: []\n                        };\n                        setRows({\n                            \"MarkingPanel.useEffect.handleKeyDown\": (prev)=>{\n                                const idx = activeRowId ? prev.findIndex({\n                                    \"MarkingPanel.useEffect.handleKeyDown\": (r)=>r.id === activeRowId\n                                }[\"MarkingPanel.useEffect.handleKeyDown\"]) : prev.length - 1;\n                                if (idx === -1) return [\n                                    ...prev,\n                                    newRow\n                                ];\n                                const next = [\n                                    ...prev\n                                ];\n                                next.splice(idx + 1, 0, newRow);\n                                return next;\n                            }\n                        }[\"MarkingPanel.useEffect.handleKeyDown\"]);\n                        setActiveRowId(newRow.id);\n                    }\n                }\n            }[\"MarkingPanel.useEffect.handleKeyDown\"];\n            window.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"MarkingPanel.useEffect\": ()=>window.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"MarkingPanel.useEffect\"];\n        }\n    }[\"MarkingPanel.useEffect\"], [\n        activeRowId,\n        currentTime,\n        rows\n    ]);\n    const handleDropToRow = (rowId, markId)=>{\n        setRows((prev)=>{\n            let moved = null;\n            const removed = prev.map((row)=>{\n                const nextMarks = row.marks.filter((m)=>{\n                    if (m.id === markId) {\n                        moved = m;\n                        return false;\n                    }\n                    return true;\n                });\n                return {\n                    ...row,\n                    marks: nextMarks\n                };\n            });\n            if (!moved) return prev;\n            return removed.map((row)=>row.id === rowId ? {\n                    ...row,\n                    marks: [\n                        ...row.marks,\n                        moved\n                    ]\n                } : row);\n        });\n    };\n    const getAssignedTime = (targetKey)=>{\n        const value = assignments[targetKey];\n        if (!value) return null;\n        if (typeof value === \"string\") {\n            for (const row of rows){\n                const mark = row.marks.find((m)=>m.id === value);\n                if (mark) return mark.time;\n            }\n            return null;\n        }\n        var _value_time;\n        return (_value_time = value.time) !== null && _value_time !== void 0 ? _value_time : null;\n    };\n    const getExistingTime = (type, id, field)=>{\n        if (type === \"part\") {\n            const part = parts.find((p)=>p.id === id);\n            if (!part) return null;\n            var _part_timepoint_seconds, _part_timepoint_end_seconds;\n            return field === \"start\" ? (_part_timepoint_seconds = part.timepoint_seconds) !== null && _part_timepoint_seconds !== void 0 ? _part_timepoint_seconds : null : (_part_timepoint_end_seconds = part.timepoint_end_seconds) !== null && _part_timepoint_end_seconds !== void 0 ? _part_timepoint_end_seconds : null;\n        }\n        const sub = Object.values(subpartsByPart).flat().find((s)=>s.id === id);\n        if (!sub) return null;\n        var _sub_timepoint_seconds, _sub_timepoint_end_seconds;\n        return field === \"start\" ? (_sub_timepoint_seconds = sub.timepoint_seconds) !== null && _sub_timepoint_seconds !== void 0 ? _sub_timepoint_seconds : null : (_sub_timepoint_end_seconds = sub.timepoint_end_seconds) !== null && _sub_timepoint_end_seconds !== void 0 ? _sub_timepoint_end_seconds : null;\n    };\n    const assignMarkToTarget = (targetKey, markId)=>{\n        var _rows_flatMap_find;\n        const [type, id, field] = targetKey.split(\":\");\n        const markTime = (_rows_flatMap_find = rows.flatMap((r)=>r.marks).find((m)=>m.id === markId)) === null || _rows_flatMap_find === void 0 ? void 0 : _rows_flatMap_find.time;\n        if (markTime === undefined) return;\n        const oppositeField = field === \"start\" ? \"end\" : \"start\";\n        const assignedOpposite = getAssignedTime(\"\".concat(type, \":\").concat(id, \":\").concat(oppositeField));\n        const existingOpposite = getExistingTime(type, id, oppositeField);\n        const oppositeTime = assignedOpposite !== null && assignedOpposite !== void 0 ? assignedOpposite : existingOpposite;\n        if (field === \"end\" && oppositeTime !== null && markTime < oppositeTime) {\n            alert(\"End time cannot be before start time.\");\n            return;\n        }\n        if (field === \"start\" && oppositeTime !== null && markTime > oppositeTime) {\n            alert(\"Start time cannot be after end time.\");\n            return;\n        }\n        setAssignments((prev)=>({\n                ...prev,\n                [targetKey]: {\n                    markId,\n                    time: markTime\n                }\n            }));\n    };\n    const clearAssignment = (targetKey)=>{\n        setAssignments((prev)=>{\n            const next = {\n                ...prev\n            };\n            delete next[targetKey];\n            return next;\n        });\n    };\n    const renderTimeTarget = (type, id, field)=>{\n        const targetKey = \"\".concat(type, \":\").concat(id, \":\").concat(field);\n        const assignedValue = assignments[targetKey];\n        const assignedMarkId = typeof assignedValue === \"string\" ? assignedValue : assignedValue === null || assignedValue === void 0 ? void 0 : assignedValue.markId;\n        const assignedTime = getAssignedTime(targetKey);\n        const existingTime = getExistingTime(type, id, field);\n        const showTime = assignedTime !== null ? assignedTime : existingTime;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"border border-dashed rounded px-2 py-1 text-xs flex items-center gap-2 \".concat(assignedMarkId ? \"border-emerald-400 bg-emerald-50\" : \"border-gray-300 bg-white\"),\n            onDragOver: (e)=>e.preventDefault(),\n            onDrop: (e)=>{\n                const markId = e.dataTransfer.getData(\"markId\");\n                if (!markId) return;\n                assignMarkToTarget(targetKey, markId);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-gray-500 uppercase\",\n                    children: field\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 317,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: showTime !== null ? formatTime(showTime) : \"--:--\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 318,\n                    columnNumber: 9\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"ml-1 px-2 py-0.5 rounded-full text-[10px] bg-emerald-600 text-white\",\n                    children: \"Chip\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 322,\n                    columnNumber: 11\n                }, this),\n                assignedMarkId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>clearAssignment(targetKey),\n                    className: \"ml-auto text-red-600 hover:text-red-800\",\n                    title: \"Remove\",\n                    children: \"\\xc3—\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                    lineNumber: 327,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n            lineNumber: 306,\n            columnNumber: 7\n        }, this);\n    };\n    const handleSaveSession = async ()=>{\n        const payload = {\n            performance_id: performanceId,\n            title: sessionTitle || \"Marking Session\",\n            rows,\n            assignments\n        };\n        const res = await fetch(\"/api/marking-sessions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n        if (res.ok) {\n            const created = await res.json();\n            setSessionList((prev)=>[\n                    created,\n                    ...prev\n                ]);\n        }\n    };\n    const handleApply = async ()=>{\n        setSaving(true);\n        try {\n            const updatesByPart = {};\n            const updatesBySubpart = {};\n            Object.entries(assignments).forEach((param)=>{\n                let [key, markId] = param;\n                const [type, id, field] = key.split(\":\");\n                const mark = rows.flatMap((r)=>r.marks).find((m)=>m.id === markId);\n                if (!mark) return;\n                if (type === \"part\") {\n                    updatesByPart[id] = updatesByPart[id] || {};\n                    updatesByPart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = mark.time;\n                } else {\n                    updatesBySubpart[id] = updatesBySubpart[id] || {};\n                    updatesBySubpart[id][field === \"start\" ? \"timepoint_seconds\" : \"timepoint_end_seconds\"] = mark.time;\n                }\n            });\n            const updatedParts = [];\n            const updatedSubparts = [];\n            await Promise.all(Object.entries(updatesByPart).map(async (param)=>{\n                let [partId, payload] = param;\n                const res = await fetch(\"/api/parts/\".concat(partId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    updatedParts.push(updated);\n                }\n            }));\n            await Promise.all(Object.entries(updatesBySubpart).map(async (param)=>{\n                let [subpartId, payload] = param;\n                const res = await fetch(\"/api/subparts/\".concat(subpartId), {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(payload)\n                });\n                if (res.ok) {\n                    const updated = await res.json();\n                    if (updated) updatedSubparts.push(updated);\n                }\n            }));\n            if (updatedParts.length > 0) {\n                onPartsUpdated(parts.map((part)=>updatedParts.find((u)=>u.id === part.id) || part));\n            }\n            if (updatedSubparts.length > 0) {\n                setSubpartsByPart((prev)=>{\n                    const next = {\n                        ...prev\n                    };\n                    updatedSubparts.forEach((sub)=>{\n                        next[sub.part_id] = (next[sub.part_id] || []).map((s)=>s.id === sub.id ? {\n                                ...s,\n                                ...sub\n                            } : s);\n                    });\n                    return next;\n                });\n            }\n        } finally{\n            setSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"grid grid-cols-1 xl:grid-cols-[320px_1fr] gap-6\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xl font-bold text-gray-900 mb-2\",\n                        children: \"Parts & Subparts\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 430,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 mb-4\",\n                        children: \"Drop time chips onto Start/End. Only dropped chips change timepoints when saved.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 431,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: parts.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"border border-gray-200 rounded-lg p-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-semibold text-gray-900 mb-2\",\n                                        children: part.name\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 437,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid grid-cols-2 gap-2 mb-2\",\n                                        children: [\n                                            renderTimeTarget(\"part\", part.id, \"start\"),\n                                            renderTimeTarget(\"part\", part.id, \"end\")\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 438,\n                                        columnNumber: 15\n                                    }, this),\n                                    (subpartsByPart[part.id] || []).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 space-y-2\",\n                                        children: (subpartsByPart[part.id] || []).map((sub)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border border-gray-100 rounded p-2 bg-gray-50\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-sm font-semibold text-gray-800\",\n                                                        children: sub.title\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 446,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"grid grid-cols-2 gap-2 mt-2\",\n                                                        children: [\n                                                            renderTimeTarget(\"subpart\", sub.id, \"start\"),\n                                                            renderTimeTarget(\"subpart\", sub.id, \"end\")\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 447,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, sub.id, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 445,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 443,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-3 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: newSubpartTitle[part.id] || \"\",\n                                                onChange: (e)=>setNewSubpartTitle((prev)=>({\n                                                            ...prev,\n                                                            [part.id]: e.target.value\n                                                        })),\n                                                placeholder: \"Add subpart\",\n                                                className: \"flex-1 px-2 py-1 border border-gray-300 rounded text-xs\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 456,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: async ()=>{\n                                                    const title = (newSubpartTitle[part.id] || \"\").trim();\n                                                    if (!title) return;\n                                                    const res = await fetch(\"/api/subparts\", {\n                                                        method: \"POST\",\n                                                        headers: {\n                                                            \"Content-Type\": \"application/json\"\n                                                        },\n                                                        body: JSON.stringify({\n                                                            part_id: part.id,\n                                                            title\n                                                        })\n                                                    });\n                                                    if (res.ok) {\n                                                        const created = await res.json();\n                                                        setSubpartsByPart((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: [\n                                                                    ...prev[part.id] || [],\n                                                                    created\n                                                                ]\n                                                            }));\n                                                        setNewSubpartTitle((prev)=>({\n                                                                ...prev,\n                                                                [part.id]: \"\"\n                                                            }));\n                                                    }\n                                                },\n                                                className: \"px-2 py-1 bg-gray-900 text-white rounded text-xs\",\n                                                children: \"Add\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 465,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 455,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, part.id, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 436,\n                                columnNumber: 13\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 434,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 429,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-wrap items-center gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xl font-bold text-gray-900\",\n                                        children: \"Marking Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 496,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"ml-auto flex gap-2 items-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: sessionTitle,\n                                                onChange: (e)=>{\n                                                    setSessionTitle(e.target.value);\n                                                    setCustomTitle(true);\n                                                },\n                                                className: \"px-3 py-1 border border-gray-300 rounded text-sm\",\n                                                placeholder: \"Session title\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 498,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleSaveSession,\n                                                className: \"px-3 py-1 bg-gray-900 text-white rounded text-sm\",\n                                                children: \"Save Session\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 507,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: handleApply,\n                                                disabled: saving,\n                                                className: \"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:bg-gray-400\",\n                                                children: saving ? \"Saving...\" : \"Apply Timepoints\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 513,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 497,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 495,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-2\",\n                                children: \"Hotkeys: Space = mark time, E = new row. Works while music is playing or paused.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 522,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-500 mt-1\",\n                                children: [\n                                    \"Music length: \",\n                                    musicDuration ? formatTime(musicDuration) : \"—\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 525,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 bg-gray-50 border border-dashed border-gray-300 rounded p-3 text-xs text-gray-500\",\n                                children: \"Waveform view: not available yet. We can add a waveform preview in a follow-up.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 528,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 flex flex-wrap items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                        value: selectedSessionId,\n                                        onChange: async (e)=>{\n                                            const id = e.target.value;\n                                            setSelectedSessionId(id);\n                                            if (!id) return;\n                                            const res = await fetch(\"/api/marking-sessions/\".concat(id));\n                                            if (!res.ok) return;\n                                            const data = await res.json();\n                                            setSessionTitle(data.title || \"Marking Session\");\n                                            setCustomTitle(true);\n                                            setRows((data.rows || []).map((row)=>({\n                                                    ...row,\n                                                    note: row.note || \"\"\n                                                })));\n                                            setAssignments(data.assignments || {});\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                value: \"\",\n                                                children: \"Load saved session...\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 551,\n                                                columnNumber: 15\n                                            }, this),\n                                            sessionList.map((sess)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: sess.id,\n                                                    children: [\n                                                        sess.title || \"Untitled\",\n                                                        \" \\xb7 \",\n                                                        performanceNameMap[sess.performance_id] || \"Performance\",\n                                                        \" \\xb7 \",\n                                                        new Date(sess.created_at).toLocaleString()\n                                                    ]\n                                                }, sess.id, true, {\n                                                    fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                    lineNumber: 553,\n                                                    columnNumber: 17\n                                                }, this))\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 532,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-xs text-gray-600 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: allSessions,\n                                                onChange: (e)=>setAllSessions(e.target.checked),\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 559,\n                                                columnNumber: 15\n                                            }, this),\n                                            \"Show sessions from all performances\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 558,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            const firstRow = {\n                                                id: uuid(),\n                                                label: \"Row 1\",\n                                                note: \"\",\n                                                marks: []\n                                            };\n                                            setRows([\n                                                firstRow\n                                            ]);\n                                            setActiveRowId(firstRow.id);\n                                            setAssignments({});\n                                            setSelectedSessionId(\"\");\n                                            setCustomTitle(false);\n                                        },\n                                        className: \"px-2 py-1 border border-gray-300 rounded text-sm\",\n                                        children: \"New Session\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 567,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 531,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 494,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-lg font-semibold text-gray-900 mb-3\",\n                                children: \"Mark Chips\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 584,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-4\",\n                                children: rows.map((row)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"border border-gray-200 rounded-lg p-3\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3 mb-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>setActiveRowId(row.id),\n                                                        className: \"px-2 py-1 rounded text-xs font-semibold \".concat(activeRowId === row.id ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700\"),\n                                                        children: row.label\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 589,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: \"Drop chips into the empty slot to organize.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 597,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 588,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: row.note || \"\",\n                                                onChange: (e)=>setRows((prev)=>prev.map((r)=>r.id === row.id ? {\n                                                                ...r,\n                                                                note: e.target.value\n                                                            } : r)),\n                                                placeholder: \"Row notes...\",\n                                                className: \"w-full px-2 py-1 border border-gray-200 rounded text-xs mb-2\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 599,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-2\",\n                                                children: [\n                                                    row.marks.filter((m)=>!assignedMarkIds.has(m.id)).map((mark)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            draggable: true,\n                                                            onDragStart: (e)=>{\n                                                                e.dataTransfer.setData(\"markId\", mark.id);\n                                                            },\n                                                            className: \"px-2 py-1 bg-indigo-100 text-indigo-800 rounded text-xs cursor-move\",\n                                                            children: formatTime(mark.time)\n                                                        }, mark.id, false, {\n                                                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                            lineNumber: 611,\n                                                            columnNumber: 21\n                                                        }, this)),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"px-2 py-1 border border-dashed border-gray-300 rounded text-xs text-gray-500\",\n                                                        onDragOver: (e)=>e.preventDefault(),\n                                                        onDrop: (e)=>{\n                                                            const markId = e.dataTransfer.getData(\"markId\");\n                                                            if (!markId) return;\n                                                            handleDropToRow(row.id, markId);\n                                                        },\n                                                        children: \"Empty slot\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                        lineNumber: 622,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                                lineNumber: 609,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, row.id, true, {\n                                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                        lineNumber: 587,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                                lineNumber: 585,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 583,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-white border border-gray-200 rounded-lg p-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MusicPlayer__WEBPACK_IMPORTED_MODULE_2__.MusicPlayer, {\n                            musicUrl: musicUrl || undefined,\n                            onTimeUpdate: (t)=>setCurrentTime(t),\n                            onAudioReady: handleAudioReady,\n                            audioRef: audioRef\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                            lineNumber: 640,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                        lineNumber: 639,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n                lineNumber: 493,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\calvi\\\\Desktop\\\\PerfTool\\\\src\\\\components\\\\MarkingPanel.tsx\",\n        lineNumber: 428,\n        columnNumber: 5\n    }, this);\n}\n_s(MarkingPanel, \"dJLzvscvD+JUct4aSAe8XtMykWw=\");\n_c = MarkingPanel;\nvar _c;\n$RefreshReg$(_c, \"MarkingPanel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hcmtpbmdQYW5lbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU2RDtBQUNOO0FBNkN2RCxTQUFTSyxXQUFXQyxPQUFlO0lBQ2pDLE1BQU1DLFFBQVFDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxLQUFLLENBQUNKO0lBQ3JDLE1BQU1LLE9BQU9ILEtBQUtFLEtBQUssQ0FBQ0gsUUFBUTtJQUNoQyxNQUFNSyxPQUFPTCxRQUFRO0lBQ3JCLE9BQU8sR0FBV0ssT0FBUkQsTUFBSyxLQUFvQyxPQUFqQ0MsS0FBS0MsUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRztBQUNoRDtBQUVBLFNBQVNDO0lBQ1AsT0FBT1AsS0FBS1EsTUFBTSxHQUFHSCxRQUFRLENBQUMsSUFBSUksS0FBSyxDQUFDLEdBQUcsTUFBTUMsS0FBS0MsR0FBRyxHQUFHTixRQUFRLENBQUM7QUFDdkU7QUFFTyxTQUFTTyxhQUFhLEtBQXVGO1FBQXZGLEVBQUVDLGFBQWEsRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLGdCQUFnQixFQUFFQyxjQUFjLEVBQXFCLEdBQXZGOztJQUMzQixNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR3hCLCtDQUFRQSxDQUFZLEVBQUU7SUFDOUMsTUFBTSxDQUFDeUIsYUFBYUMsZUFBZSxHQUFHMUIsK0NBQVFBLENBQWdCO0lBQzlELE1BQU0sQ0FBQzJCLGFBQWFDLGVBQWUsR0FBRzVCLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQzZCLGFBQWFDLGVBQWUsR0FBRzlCLCtDQUFRQSxDQUFrQyxDQUFDO0lBQ2pGLE1BQU0sQ0FBQytCLGdCQUFnQkMsa0JBQWtCLEdBQUdoQywrQ0FBUUEsQ0FBZ0MsQ0FBQztJQUNyRixNQUFNLENBQUNpQyxpQkFBaUJDLG1CQUFtQixHQUFHbEMsK0NBQVFBLENBQXlCLENBQUM7SUFDaEYsTUFBTSxDQUFDbUMsUUFBUUMsVUFBVSxHQUFHcEMsK0NBQVFB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QUFNLENBQUMsQ0FBQ0MsSUFBTSxDQUFDc0UsZ0JBQWdCQyxHQUFHLENBQUN2RSxFQUFFbkQsRUFBRSxHQUFHVSxHQUFHLENBQUMsQ0FBQ3FCLHFCQUN4RCw4REFBQ2tEOzREQUVDMEMsU0FBUzs0REFDVEMsYUFBYSxDQUFDeEM7Z0VBQ1pBLEVBQUVFLFlBQVksQ0FBQ3VDLE9BQU8sQ0FBQyxVQUFVOUYsS0FBSy9CLEVBQUU7NERBQzFDOzREQUNBa0YsV0FBVTtzRUFFVHZKLFdBQVdvRyxLQUFLQyxJQUFJOzJEQVBoQkQsS0FBSy9CLEVBQUU7Ozs7O2tFQVVoQiw4REFBQ2lGO3dEQUNDQyxXQUFVO3dEQUNWQyxZQUFZLENBQUNDLElBQU1BLEVBQUV2RCxjQUFjO3dEQUNuQ3dELFFBQVEsQ0FBQ0Q7NERBQ1AsTUFBTXZGLFNBQVN1RixFQUFFRSxZQUFZLENBQUNDLE9BQU8sQ0FBQzs0REFDdEMsSUFBSSxDQUFDMUYsUUFBUTs0REFDYmlELGdCQUFnQlYsSUFBSXBDLEVBQUUsRUFBRUg7d0RBQzFCO2tFQUNEOzs7Ozs7Ozs7Ozs7O3VDQTNDS3VDLElBQUlwQyxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7O2tDQW9EdEIsOERBQUNpRjt3QkFBSUMsV0FBVTtrQ0FDYiw0RUFBQ3hKLGdFQUFXQTs0QkFDVm1CLFVBQVVBLFlBQVl1SDs0QkFDdEIwRCxjQUFjLENBQUNDLElBQU0xSyxlQUFlMEs7NEJBQ3BDQyxjQUFjako7NEJBQ2RGLFVBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU10QjtHQTlrQmdCbkM7S0FBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY2FsdmlcXERlc2t0b3BcXFBlcmZUb29sXFxzcmNcXGNvbXBvbmVudHNcXE1hcmtpbmdQYW5lbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTXVzaWNQbGF5ZXIgfSBmcm9tIFwiQC9jb21wb25lbnRzL011c2ljUGxheWVyXCI7XG5cbmludGVyZmFjZSBQYXJ0SXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdGltZXBvaW50X3NlY29uZHM/OiBudW1iZXIgfCBudWxsO1xuICB0aW1lcG9pbnRfZW5kX3NlY29uZHM/OiBudW1iZXIgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgU3VicGFydEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBwYXJ0X2lkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHRpbWVwb2ludF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbiAgdGltZXBvaW50X2VuZF9zZWNvbmRzPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIE1hcmsge1xuICBpZDogc3RyaW5nO1xuICB0aW1lOiBudW1iZXI7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTWFya1JvdyB7XG4gIGlkOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIG5vdGU/OiBzdHJpbmc7XG4gIG1hcmtzOiBNYXJrW107XG59XG5cbnR5cGUgQXNzaWdubWVudFZhbHVlID1cbiAgfCBzdHJpbmdcbiAgfCB7XG4gICAgICBtYXJrSWQ/OiBzdHJpbmc7XG4gICAgICB0aW1lOiBudW1iZXI7XG4gICAgfTtcblxuaW50ZXJmYWNlIE1hcmtpbmdQYW5lbFByb3BzIHtcbiAgcGVyZm9ybWFuY2VJZDogc3RyaW5nO1xuICBwYXJ0czogUGFydEl0ZW1bXTtcbiAgbXVzaWNVcmw/OiBzdHJpbmcgfCBudWxsO1xuICBwZXJmb3JtYW5jZVRpdGxlPzogc3RyaW5nO1xuICBvblBhcnRzVXBkYXRlZDogKHBhcnRzOiBQYXJ0SXRlbVtdKSA9PiB2b2lkO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lKHNlY29uZHM6IG51bWJlcikge1xuICBjb25zdCB0b3RhbCA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3Ioc2Vjb25kcykpO1xuICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcih0b3RhbCAvIDYwKTtcbiAgY29uc3Qgc2VjcyA9IHRvdGFsICUgNjA7XG4gIHJldHVybiBgJHttaW5zfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbn1cblxuZnVuY3Rpb24gdXVpZCgpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIsIDEwKSArIERhdGUubm93KCkudG9TdHJpbmcoMzYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTWFya2luZ1BhbmVsKHsgcGVyZm9ybWFuY2VJZCwgcGFydHMsIG11c2ljVXJsLCBwZXJmb3JtYW5jZVRpdGxlLCBvblBhcnRzVXBkYXRlZCB9OiBNYXJraW5nUGFuZWxQcm9wcykge1xuICBjb25zdCBbcm93cywgc2V0Um93c10gPSB1c2VTdGF0ZTxNYXJrUm93W10+KFtdKTtcbiAgY29uc3QgW2FjdGl2ZVJvd0lkLCBzZXRBY3RpdmVSb3dJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2N1cnJlbnRUaW1lLCBzZXRDdXJyZW50VGltZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2Fzc2lnbm1lbnRzLCBzZXRBc3NpZ25tZW50c10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBBc3NpZ25tZW50VmFsdWU+Pih7fSk7XG4gIGNvbnN0IFtzdWJwYXJ0c0J5UGFydCwgc2V0U3VicGFydHNCeVBhcnRdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgU3VicGFydEl0ZW1bXT4+KHt9KTtcbiAgY29uc3QgW25ld1N1YnBhcnRUaXRsZSwgc2V0TmV3U3VicGFydFRpdGxlXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHt9KTtcbiAgY29uc3QgW3NhdmluZywgc2V0U2F2aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nlc3Npb25UaXRsZSwgc2V0U2Vzc2lvblRpdGxlXSA9IHVzZVN0YXRlKFwiTmV3IE1hcmtpbmcgU2Vzc2lvblwiKTtcbiAgY29uc3QgW2N1c3RvbVRpdGxlLCBzZXRDdXN0b21UaXRsZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZXNzaW9uTGlzdCwgc2V0U2Vzc2lvbkxpc3RdID0gdXNlU3RhdGU8YW55W10+KFtdKTtcbiAgY29uc3QgW3NlbGVjdGVkU2Vzc2lvbklkLCBzZXRTZWxlY3RlZFNlc3Npb25JZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbYWxsU2Vzc2lvbnMsIHNldEFsbFNlc3Npb25zXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3BlcmZvcm1hbmNlTmFtZU1hcCwgc2V0UGVyZm9ybWFuY2VOYW1lTWFwXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHt9KTtcbiAgY29uc3QgW211c2ljRHVyYXRpb24sIHNldE11c2ljRHVyYXRpb25dID0gdXNlU3RhdGU8bnVtYmVyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvQ2xlYW51cFJlZiA9IHVzZVJlZjwoKCkgPT4gdm9pZCkgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWY8SFRNTEF1ZGlvRWxlbWVudD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQ/LigpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVBdWRpb1JlYWR5ID0gKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCkgPT4ge1xuICAgIGlmIChhdWRpb0NsZWFudXBSZWYuY3VycmVudCkgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQoKTtcbiAgICBpZiAoIWF1ZGlvKSB7XG4gICAgICBzZXRNdXNpY0R1cmF0aW9uKG51bGwpO1xuICAgICAgYXVkaW9DbGVhbnVwUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IE51bWJlci5pc0Zpbml0ZShhdWRpby5kdXJhdGlvbikgPyBhdWRpby5kdXJhdGlvbiA6IG51bGw7XG4gICAgICBzZXRNdXNpY0R1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICB9O1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCB1cGRhdGUpO1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJkdXJhdGlvbmNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIHVwZGF0ZSgpO1xuICAgIGF1ZGlvQ2xlYW51cFJlZi5jdXJyZW50ID0gKCkgPT4ge1xuICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsIHVwZGF0ZSk7XG4gICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHVyYXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGFzc2lnbmVkTWFya0NvdW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIE9iamVjdC52YWx1ZXMoYXNzaWdubWVudHMpLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvdW50c1t2YWx1ZV0gPSAoY291bnRzW3ZhbHVlXSB8fCAwKSArIDE7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlPy5tYXJrSWQpIHtcbiAgICAgICAgY291bnRzW3ZhbHVlLm1hcmtJZF0gPSAoY291bnRzW3ZhbHVlLm1hcmtJZF0gfHwgMCkgKyAxO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHM7XG4gIH0sIFthc3NpZ25tZW50c10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBmaXJzdFJvdyA9IHsgaWQ6IHV1aWQoKSwgbGFiZWw6IFwiUm93IDFcIiwgbm90ZTogXCJcIiwgbWFya3M6IFtdIH07XG4gICAgICBzZXRSb3dzKFtmaXJzdFJvd10pO1xuICAgICAgc2V0QWN0aXZlUm93SWQoZmlyc3RSb3cuaWQpO1xuICAgIH1cbiAgfSwgW3Jvd3MubGVuZ3RoXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY3VzdG9tVGl0bGUpIHJldHVybjtcbiAgICBjb25zdCB0aXRsZSA9IGAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX0gw4LCtyAke3BlcmZvcm1hbmNlVGl0bGUgfHwgXCJQZXJmb3JtYW5jZVwifWA7XG4gICAgc2V0U2Vzc2lvblRpdGxlKHRpdGxlKTtcbiAgfSwgW3BlcmZvcm1hbmNlVGl0bGUsIGN1c3RvbVRpdGxlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXBlcmZvcm1hbmNlSWQpIHJldHVybjtcbiAgICBjb25zdCBmZXRjaFN1YnBhcnRzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBwYXJ0cy5tYXAoYXN5bmMgKHBhcnQpID0+IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9zdWJwYXJ0cz9wYXJ0SWQ9JHtwYXJ0LmlkfWApO1xuICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm4gW3BhcnQuaWQsIFtdXSBhcyBjb25zdDtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICByZXR1cm4gW3BhcnQuaWQsIGRhdGEgfHwgW11dIGFzIGNvbnN0O1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgU3VicGFydEl0ZW1bXT4gPSB7fTtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoW3BhcnRJZCwgbGlzdF0pID0+IHtcbiAgICAgICAgbWFwW3BhcnRJZF0gPSBsaXN0O1xuICAgICAgfSk7XG4gICAgICBzZXRTdWJwYXJ0c0J5UGFydChtYXApO1xuICAgIH07XG4gICAgZmV0Y2hTdWJwYXJ0cygpO1xuICB9LCBbcGVyZm9ybWFuY2VJZCwgcGFydHNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcGVyZm9ybWFuY2VJZCkgcmV0dXJuO1xuICAgIGNvbnN0IGZldGNoU2Vzc2lvbnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYWxsU2Vzc2lvbnMgPyBcIi9hcGkvbWFya2luZy1zZXNzaW9ucz9hbGw9MVwiIDogYC9hcGkvbWFya2luZy1zZXNzaW9ucz9wZXJmb3JtYW5jZUlkPSR7cGVyZm9ybWFuY2VJZH1gXG4gICAgICApO1xuICAgICAgaWYgKCFyZXMub2spIHJldHVybjtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgc2V0U2Vzc2lvbkxpc3QoZGF0YSB8fCBbXSk7XG4gICAgfTtcbiAgICBmZXRjaFNlc3Npb25zKCk7XG4gIH0sIFtwZXJmb3JtYW5jZUlkLCBhbGxTZXNzaW9uc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZmV0Y2hQZXJmb3JtYW5jZU5hbWVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL3BlcmZvcm1hbmNlc1wiKTtcbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgKGRhdGEgfHwgW10pLmZvckVhY2goKHBlcmY6IGFueSkgPT4ge1xuICAgICAgICBtYXBbcGVyZi5pZF0gPSBwZXJmLnRpdGxlIHx8IFwiUGVyZm9ybWFuY2VcIjtcbiAgICAgIH0pO1xuICAgICAgc2V0UGVyZm9ybWFuY2VOYW1lTWFwKG1hcCk7XG4gICAgfTtcbiAgICBmZXRjaFBlcmZvcm1hbmNlTmFtZXMoKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgdGFnID0gdGFyZ2V0Py50YWdOYW1lPy50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHRhZyA9PT0gXCJpbnB1dFwiIHx8IHRhZyA9PT0gXCJ0ZXh0YXJlYVwiIHx8IHRhZyA9PT0gXCJzZWxlY3RcIikgcmV0dXJuO1xuXG4gICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJTcGFjZVwiKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHJvd0lkID0gYWN0aXZlUm93SWQgfHwgcm93c1swXT8uaWQ7XG4gICAgICAgIGlmICghcm93SWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbWFyazogTWFyayA9IHtcbiAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgIHRpbWU6IGN1cnJlbnRUaW1lLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9O1xuICAgICAgICBzZXRSb3dzKChwcmV2KSA9PlxuICAgICAgICAgIHByZXYubWFwKChyb3cpID0+XG4gICAgICAgICAgICByb3cuaWQgPT09IHJvd0lkID8geyAuLi5yb3csIG1hcmtzOiBbLi4ucm93Lm1hcmtzLCBtYXJrXSB9IDogcm93XG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcImVcIiB8fCBldmVudC5rZXkgPT09IFwiRVwiKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHJvd3MubGVuZ3RoICsgMTtcbiAgICAgICAgY29uc3QgbmV3Um93OiBNYXJrUm93ID0ge1xuICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgbGFiZWw6IGBSb3cgJHtuZXh0SW5kZXh9YCxcbiAgICAgICAgICBub3RlOiBcIlwiLFxuICAgICAgICAgIG1hcmtzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0Um93cygocHJldikgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkeCA9IGFjdGl2ZVJvd0lkID8gcHJldi5maW5kSW5kZXgoKHIpID0+IHIuaWQgPT09IGFjdGl2ZVJvd0lkKSA6IHByZXYubGVuZ3RoIC0gMTtcbiAgICAgICAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIFsuLi5wcmV2LCBuZXdSb3ddO1xuICAgICAgICAgIGNvbnN0IG5leHQgPSBbLi4ucHJldl07XG4gICAgICAgICAgbmV4dC5zcGxpY2UoaWR4ICsgMSwgMCwgbmV3Um93KTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEFjdGl2ZVJvd0lkKG5ld1Jvdy5pZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleURvd24pO1xuICB9LCBbYWN0aXZlUm93SWQsIGN1cnJlbnRUaW1lLCByb3dzXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJvcFRvUm93ID0gKHJvd0lkOiBzdHJpbmcsIG1hcmtJZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0Um93cygocHJldikgPT4ge1xuICAgICAgbGV0IG1vdmVkOiBNYXJrIHwgbnVsbCA9IG51bGw7XG4gICAgICBjb25zdCByZW1vdmVkID0gcHJldi5tYXAoKHJvdykgPT4ge1xuICAgICAgICBjb25zdCBuZXh0TWFya3MgPSByb3cubWFya3MuZmlsdGVyKChtKSA9PiB7XG4gICAgICAgICAgaWYgKG0uaWQgPT09IG1hcmtJZCkge1xuICAgICAgICAgICAgbW92ZWQgPSBtO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IC4uLnJvdywgbWFya3M6IG5leHRNYXJrcyB9O1xuICAgICAgfSk7XG4gICAgICBpZiAoIW1vdmVkKSByZXR1cm4gcHJldjtcbiAgICAgIHJldHVybiByZW1vdmVkLm1hcCgocm93KSA9PlxuICAgICAgICByb3cuaWQgPT09IHJvd0lkID8geyAuLi5yb3csIG1hcmtzOiBbLi4ucm93Lm1hcmtzLCBtb3ZlZCFdIH0gOiByb3dcbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0QXNzaWduZWRUaW1lID0gKHRhcmdldEtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBhc3NpZ25tZW50c1t0YXJnZXRLZXldO1xuICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgY29uc3QgbWFyayA9IHJvdy5tYXJrcy5maW5kKChtKSA9PiBtLmlkID09PSB2YWx1ZSk7XG4gICAgICAgIGlmIChtYXJrKSByZXR1cm4gbWFyay50aW1lO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZS50aW1lID8/IG51bGw7XG4gIH07XG5cbiAgY29uc3QgZ2V0RXhpc3RpbmdUaW1lID0gKHR5cGU6IFwicGFydFwiIHwgXCJzdWJwYXJ0XCIsIGlkOiBzdHJpbmcsIGZpZWxkOiBcInN0YXJ0XCIgfCBcImVuZFwiKSA9PiB7XG4gICAgaWYgKHR5cGUgPT09IFwicGFydFwiKSB7XG4gICAgICBjb25zdCBwYXJ0ID0gcGFydHMuZmluZCgocCkgPT4gcC5pZCA9PT0gaWQpO1xuICAgICAgaWYgKCFwYXJ0KSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiBmaWVsZCA9PT0gXCJzdGFydFwiID8gcGFydC50aW1lcG9pbnRfc2Vjb25kcyA/PyBudWxsIDogcGFydC50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgc3ViID0gT2JqZWN0LnZhbHVlcyhzdWJwYXJ0c0J5UGFydCkuZmxhdCgpLmZpbmQoKHMpID0+IHMuaWQgPT09IGlkKTtcbiAgICBpZiAoIXN1YikgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGZpZWxkID09PSBcInN0YXJ0XCIgPyBzdWIudGltZXBvaW50X3NlY29uZHMgPz8gbnVsbCA6IHN1Yi50aW1lcG9pbnRfZW5kX3NlY29uZHMgPz8gbnVsbDtcbiAgfTtcblxuICBjb25zdCBhc3NpZ25NYXJrVG9UYXJnZXQgPSAodGFyZ2V0S2V5OiBzdHJpbmcsIG1hcmtJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgW3R5cGUsIGlkLCBmaWVsZF0gPSB0YXJnZXRLZXkuc3BsaXQoXCI6XCIpIGFzIFtcInBhcnRcIiB8IFwic3VicGFydFwiLCBzdHJpbmcsIFwic3RhcnRcIiB8IFwiZW5kXCJdO1xuICAgIGNvbnN0IG1hcmtUaW1lID0gcm93cy5mbGF0TWFwKChyKSA9PiByLm1hcmtzKS5maW5kKChtKSA9PiBtLmlkID09PSBtYXJrSWQpPy50aW1lO1xuICAgIGlmIChtYXJrVGltZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICBjb25zdCBvcHBvc2l0ZUZpZWxkOiBcInN0YXJ0XCIgfCBcImVuZFwiID0gZmllbGQgPT09IFwic3RhcnRcIiA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XG4gICAgY29uc3QgYXNzaWduZWRPcHBvc2l0ZSA9IGdldEFzc2lnbmVkVGltZShgJHt0eXBlfToke2lkfToke29wcG9zaXRlRmllbGR9YCk7XG4gICAgY29uc3QgZXhpc3RpbmdPcHBvc2l0ZSA9IGdldEV4aXN0aW5nVGltZSh0eXBlLCBpZCwgb3Bwb3NpdGVGaWVsZCk7XG4gICAgY29uc3Qgb3Bwb3NpdGVUaW1lID0gYXNzaWduZWRPcHBvc2l0ZSA/PyBleGlzdGluZ09wcG9zaXRlO1xuXG4gICAgaWYgKGZpZWxkID09PSBcImVuZFwiICYmIG9wcG9zaXRlVGltZSAhPT0gbnVsbCAmJiBtYXJrVGltZSA8IG9wcG9zaXRlVGltZSkge1xuICAgICAgYWxlcnQoXCJFbmQgdGltZSBjYW5ub3QgYmUgYmVmb3JlIHN0YXJ0IHRpbWUuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZmllbGQgPT09IFwic3RhcnRcIiAmJiBvcHBvc2l0ZVRpbWUgIT09IG51bGwgJiYgbWFya1RpbWUgPiBvcHBvc2l0ZVRpbWUpIHtcbiAgICAgIGFsZXJ0KFwiU3RhcnQgdGltZSBjYW5ub3QgYmUgYWZ0ZXIgZW5kIHRpbWUuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldEFzc2lnbm1lbnRzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbdGFyZ2V0S2V5XTogeyBtYXJrSWQsIHRpbWU6IG1hcmtUaW1lIH0gfSkpO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyQXNzaWdubWVudCA9ICh0YXJnZXRLZXk6IHN0cmluZykgPT4ge1xuICAgIHNldEFzc2lnbm1lbnRzKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCBuZXh0ID0geyAuLi5wcmV2IH07XG4gICAgICBkZWxldGUgbmV4dFt0YXJnZXRLZXldO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyVGltZVRhcmdldCA9ICh0eXBlOiBcInBhcnRcIiB8IFwic3VicGFydFwiLCBpZDogc3RyaW5nLCBmaWVsZDogXCJzdGFydFwiIHwgXCJlbmRcIikgPT4ge1xuICAgIGNvbnN0IHRhcmdldEtleSA9IGAke3R5cGV9OiR7aWR9OiR7ZmllbGR9YDtcbiAgICBjb25zdCBhc3NpZ25lZFZhbHVlID0gYXNzaWdubWVudHNbdGFyZ2V0S2V5XTtcbiAgICBjb25zdCBhc3NpZ25lZE1hcmtJZCA9IHR5cGVvZiBhc3NpZ25lZFZhbHVlID09PSBcInN0cmluZ1wiID8gYXNzaWduZWRWYWx1ZSA6IGFzc2lnbmVkVmFsdWU/Lm1hcmtJZDtcbiAgICBjb25zdCBhc3NpZ25lZFRpbWUgPSBnZXRBc3NpZ25lZFRpbWUodGFyZ2V0S2V5KTtcbiAgICBjb25zdCBleGlzdGluZ1RpbWUgPSBnZXRFeGlzdGluZ1RpbWUodHlwZSwgaWQsIGZpZWxkKTtcbiAgICBjb25zdCBzaG93VGltZSA9IGFzc2lnbmVkVGltZSAhPT0gbnVsbCA/IGFzc2lnbmVkVGltZSA6IGV4aXN0aW5nVGltZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17YGJvcmRlciBib3JkZXItZGFzaGVkIHJvdW5kZWQgcHgtMiBweS0xIHRleHQteHMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgJHtcbiAgICAgICAgICBhc3NpZ25lZE1hcmtJZCA/IFwiYm9yZGVyLWVtZXJhbGQtNDAwIGJnLWVtZXJhbGQtNTBcIiA6IFwiYm9yZGVyLWdyYXktMzAwIGJnLXdoaXRlXCJcbiAgICAgICAgfWB9XG4gICAgICAgIG9uRHJhZ092ZXI9eyhlKSA9PiBlLnByZXZlbnREZWZhdWx0KCl9XG4gICAgICAgIG9uRHJvcD17KGUpID0+IHtcbiAgICAgICAgICBjb25zdCBtYXJrSWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwibWFya0lkXCIpO1xuICAgICAgICAgIGlmICghbWFya0lkKSByZXR1cm47XG4gICAgICAgICAgYXNzaWduTWFya1RvVGFyZ2V0KHRhcmdldEtleSwgbWFya0lkKTtcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCB1cHBlcmNhc2VcIj57ZmllbGR9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj5cbiAgICAgICAgICB7c2hvd1RpbWUgIT09IG51bGwgPyBmb3JtYXRUaW1lKHNob3dUaW1lKSA6IFwiLS06LS1cIn1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICB7YXNzaWduZWRNYXJrSWQgJiYgKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTEgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIHRleHQtWzEwcHhdIGJnLWVtZXJhbGQtNjAwIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgIENoaXBcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICl9XG4gICAgICAgIHthc3NpZ25lZE1hcmtJZCAmJiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gY2xlYXJBc3NpZ25tZW50KHRhcmdldEtleSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtbC1hdXRvIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC04MDBcIlxuICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIMOD4oCUXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNhdmVTZXNzaW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBwZXJmb3JtYW5jZV9pZDogcGVyZm9ybWFuY2VJZCxcbiAgICAgIHRpdGxlOiBzZXNzaW9uVGl0bGUgfHwgXCJNYXJraW5nIFNlc3Npb25cIixcbiAgICAgIHJvd3MsXG4gICAgICBhc3NpZ25tZW50cyxcbiAgICB9O1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9tYXJraW5nLXNlc3Npb25zXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KTtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHNldFNlc3Npb25MaXN0KChwcmV2KSA9PiBbY3JlYXRlZCwgLi4ucHJldl0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVBcHBseSA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRTYXZpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZXNCeVBhcnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgIGNvbnN0IHVwZGF0ZXNCeVN1YnBhcnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgICAgT2JqZWN0LmVudHJpZXMoYXNzaWdubWVudHMpLmZvckVhY2goKFtrZXksIG1hcmtJZF0pID0+IHtcbiAgICAgICAgY29uc3QgW3R5cGUsIGlkLCBmaWVsZF0gPSBrZXkuc3BsaXQoXCI6XCIpIGFzIFtcInBhcnRcIiB8IFwic3VicGFydFwiLCBzdHJpbmcsIFwic3RhcnRcIiB8IFwiZW5kXCJdO1xuICAgICAgICBjb25zdCBtYXJrID0gcm93cy5mbGF0TWFwKChyKSA9PiByLm1hcmtzKS5maW5kKChtKSA9PiBtLmlkID09PSBtYXJrSWQpO1xuICAgICAgICBpZiAoIW1hcmspIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicGFydFwiKSB7XG4gICAgICAgICAgdXBkYXRlc0J5UGFydFtpZF0gPSB1cGRhdGVzQnlQYXJ0W2lkXSB8fCB7fTtcbiAgICAgICAgICB1cGRhdGVzQnlQYXJ0W2lkXVtmaWVsZCA9PT0gXCJzdGFydFwiID8gXCJ0aW1lcG9pbnRfc2Vjb25kc1wiIDogXCJ0aW1lcG9pbnRfZW5kX3NlY29uZHNcIl0gPSBtYXJrLnRpbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlc0J5U3VicGFydFtpZF0gPSB1cGRhdGVzQnlTdWJwYXJ0W2lkXSB8fCB7fTtcbiAgICAgICAgICB1cGRhdGVzQnlTdWJwYXJ0W2lkXVtmaWVsZCA9PT0gXCJzdGFydFwiID8gXCJ0aW1lcG9pbnRfc2Vjb25kc1wiIDogXCJ0aW1lcG9pbnRfZW5kX3NlY29uZHNcIl0gPSBtYXJrLnRpbWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVkUGFydHM6IFBhcnRJdGVtW10gPSBbXTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTdWJwYXJ0czogU3VicGFydEl0ZW1bXSA9IFtdO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZXNCeVBhcnQpLm1hcChhc3luYyAoW3BhcnRJZCwgcGF5bG9hZF0pID0+IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9wYXJ0cy8ke3BhcnRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIHVwZGF0ZWRQYXJ0cy5wdXNoKHVwZGF0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBPYmplY3QuZW50cmllcyh1cGRhdGVzQnlTdWJwYXJ0KS5tYXAoYXN5bmMgKFtzdWJwYXJ0SWQsIHBheWxvYWRdKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvc3VicGFydHMvJHtzdWJwYXJ0SWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZCkgdXBkYXRlZFN1YnBhcnRzLnB1c2godXBkYXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgaWYgKHVwZGF0ZWRQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9uUGFydHNVcGRhdGVkKFxuICAgICAgICAgIHBhcnRzLm1hcCgocGFydCkgPT4gdXBkYXRlZFBhcnRzLmZpbmQoKHUpID0+IHUuaWQgPT09IHBhcnQuaWQpIHx8IHBhcnQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlZFN1YnBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2V0U3VicGFydHNCeVBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0geyAuLi5wcmV2IH07XG4gICAgICAgICAgdXBkYXRlZFN1YnBhcnRzLmZvckVhY2goKHN1YikgPT4ge1xuICAgICAgICAgICAgbmV4dFtzdWIucGFydF9pZF0gPSAobmV4dFtzdWIucGFydF9pZF0gfHwgW10pLm1hcCgocykgPT5cbiAgICAgICAgICAgICAgcy5pZCA9PT0gc3ViLmlkID8geyAuLi5zLCAuLi5zdWIgfSA6IHNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSB4bDpncmlkLWNvbHMtWzMyMHB4XzFmcl0gZ2FwLTZcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPlBhcnRzICYgU3VicGFydHM8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWItNFwiPlxuICAgICAgICAgIERyb3AgdGltZSBjaGlwcyBvbnRvIFN0YXJ0L0VuZC4gT25seSBkcm9wcGVkIGNoaXBzIGNoYW5nZSB0aW1lcG9pbnRzIHdoZW4gc2F2ZWQuXG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIHtwYXJ0cy5tYXAoKHBhcnQpID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtwYXJ0LmlkfSBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC0zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj57cGFydC5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTIgbWItMlwiPlxuICAgICAgICAgICAgICAgIHtyZW5kZXJUaW1lVGFyZ2V0KFwicGFydFwiLCBwYXJ0LmlkLCBcInN0YXJ0XCIpfVxuICAgICAgICAgICAgICAgIHtyZW5kZXJUaW1lVGFyZ2V0KFwicGFydFwiLCBwYXJ0LmlkLCBcImVuZFwiKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsoc3VicGFydHNCeVBhcnRbcGFydC5pZF0gfHwgW10pLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgIHsoc3VicGFydHNCeVBhcnRbcGFydC5pZF0gfHwgW10pLm1hcCgoc3ViKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzdWIuaWR9IGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0xMDAgcm91bmRlZCBwLTIgYmctZ3JheS01MFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj57c3ViLnRpdGxlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiBtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyVGltZVRhcmdldChcInN1YnBhcnRcIiwgc3ViLmlkLCBcInN0YXJ0XCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclRpbWVUYXJnZXQoXCJzdWJwYXJ0XCIsIHN1Yi5pZCwgXCJlbmRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld1N1YnBhcnRUaXRsZVtwYXJ0LmlkXSB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PlxuICAgICAgICAgICAgICAgICAgICBzZXROZXdTdWJwYXJ0VGl0bGUoKHByZXYpID0+ICh7IC4uLnByZXYsIFtwYXJ0LmlkXTogZS50YXJnZXQudmFsdWUgfSkpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFkZCBzdWJwYXJ0XCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQteHNcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IChuZXdTdWJwYXJ0VGl0bGVbcGFydC5pZF0gfHwgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpdGxlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9zdWJwYXJ0c1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXJ0X2lkOiBwYXJ0LmlkLCB0aXRsZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRTdWJwYXJ0c0J5UGFydCgocHJldikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgICAgICAgICAgICBbcGFydC5pZF06IFsuLi4ocHJldltwYXJ0LmlkXSB8fCBbXSksIGNyZWF0ZWRdLFxuICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXROZXdTdWJwYXJ0VGl0bGUoKHByZXYpID0+ICh7IC4uLnByZXYsIFtwYXJ0LmlkXTogXCJcIiB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYmctZ3JheS05MDAgdGV4dC13aGl0ZSByb3VuZGVkIHRleHQteHNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEFkZFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwXCI+TWFya2luZyBTZXNzaW9uPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLWF1dG8gZmxleCBnYXAtMiBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdmFsdWU9e3Nlc3Npb25UaXRsZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFNlc3Npb25UaXRsZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBzZXRDdXN0b21UaXRsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZXNzaW9uIHRpdGxlXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNhdmVTZXNzaW9ufVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTYXZlIFNlc3Npb25cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBcHBseX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgdGV4dC1zbSBkaXNhYmxlZDpiZy1ncmF5LTQwMFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7c2F2aW5nID8gXCJTYXZpbmcuLi5cIiA6IFwiQXBwbHkgVGltZXBvaW50c1wifVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTJcIj5cbiAgICAgICAgICAgIEhvdGtleXM6IFNwYWNlID0gbWFyayB0aW1lLCBFID0gbmV3IHJvdy4gV29ya3Mgd2hpbGUgbXVzaWMgaXMgcGxheWluZyBvciBwYXVzZWQuXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxuICAgICAgICAgICAgTXVzaWMgbGVuZ3RoOiB7bXVzaWNEdXJhdGlvbiA/IGZvcm1hdFRpbWUobXVzaWNEdXJhdGlvbikgOiBcIuKAlFwifVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBiZy1ncmF5LTUwIGJvcmRlciBib3JkZXItZGFzaGVkIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHAtMyB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIFdhdmVmb3JtIHZpZXc6IG5vdCBhdmFpbGFibGUgeWV0LiBXZSBjYW4gYWRkIGEgd2F2ZWZvcm0gcHJldmlldyBpbiBhIGZvbGxvdy11cC5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZFNlc3Npb25JZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFNlc3Npb25JZChpZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL21hcmtpbmctc2Vzc2lvbnMvJHtpZH1gKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIHNldFNlc3Npb25UaXRsZShkYXRhLnRpdGxlIHx8IFwiTWFya2luZyBTZXNzaW9uXCIpO1xuICAgICAgICAgICAgICAgIHNldEN1c3RvbVRpdGxlKHRydWUpO1xuICAgICAgICAgICAgICAgIHNldFJvd3MoKGRhdGEucm93cyB8fCBbXSkubWFwKChyb3c6IE1hcmtSb3cpID0+ICh7XG4gICAgICAgICAgICAgICAgICAuLi5yb3csXG4gICAgICAgICAgICAgICAgICBub3RlOiByb3cubm90ZSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgc2V0QXNzaWdubWVudHMoZGF0YS5hc3NpZ25tZW50cyB8fCB7fSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj5Mb2FkIHNhdmVkIHNlc3Npb24uLi48L29wdGlvbj5cbiAgICAgICAgICAgICAge3Nlc3Npb25MaXN0Lm1hcCgoc2VzcykgPT4gKFxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtzZXNzLmlkfSB2YWx1ZT17c2Vzcy5pZH0+XG4gICAgICAgICAgICAgICAgICB7c2Vzcy50aXRsZSB8fCBcIlVudGl0bGVkXCJ9IMK3IHtwZXJmb3JtYW5jZU5hbWVNYXBbc2Vzcy5wZXJmb3JtYW5jZV9pZF0gfHwgXCJQZXJmb3JtYW5jZVwifSDCtyB7bmV3IERhdGUoc2Vzcy5jcmVhdGVkX2F0KS50b0xvY2FsZVN0cmluZygpfVxuICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2FsbFNlc3Npb25zfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0QWxsU2Vzc2lvbnMoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC00IHctNFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIFNob3cgc2Vzc2lvbnMgZnJvbSBhbGwgcGVyZm9ybWFuY2VzXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3cgPSB7IGlkOiB1dWlkKCksIGxhYmVsOiBcIlJvdyAxXCIsIG5vdGU6IFwiXCIsIG1hcmtzOiBbXSB9O1xuICAgICAgICAgICAgICAgIHNldFJvd3MoW2ZpcnN0Um93XSk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlUm93SWQoZmlyc3RSb3cuaWQpO1xuICAgICAgICAgICAgICAgIHNldEFzc2lnbm1lbnRzKHt9KTtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFNlc3Npb25JZChcIlwiKTtcbiAgICAgICAgICAgICAgICBzZXRDdXN0b21UaXRsZShmYWxzZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIE5ldyBTZXNzaW9uXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0zXCI+TWFyayBDaGlwczwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICB7cm93cy5tYXAoKHJvdykgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17cm93LmlkfSBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVJvd0lkKHJvdy5pZCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTIgcHktMSByb3VuZGVkIHRleHQteHMgZm9udC1zZW1pYm9sZCAke1xuICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVJvd0lkID09PSByb3cuaWQgPyBcImJnLWJsdWUtNjAwIHRleHQtd2hpdGVcIiA6IFwiYmctZ3JheS0xMDAgdGV4dC1ncmF5LTcwMFwiXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7cm93LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5Ecm9wIGNoaXBzIGludG8gdGhlIGVtcHR5IHNsb3QgdG8gb3JnYW5pemUuPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3Jvdy5ub3RlIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgIHNldFJvd3MoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgcHJldi5tYXAoKHIpID0+IChyLmlkID09PSByb3cuaWQgPyB7IC4uLnIsIG5vdGU6IGUudGFyZ2V0LnZhbHVlIH0gOiByKSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJSb3cgbm90ZXMuLi5cIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQgdGV4dC14cyBtYi0yXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIHtyb3cubWFya3MuZmlsdGVyKChtKSA9PiAhYXNzaWduZWRNYXJrSWRzLmhhcyhtLmlkKSkubWFwKChtYXJrKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e21hcmsuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwibWFya0lkXCIsIG1hcmsuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIGJnLWluZGlnby0xMDAgdGV4dC1pbmRpZ28tODAwIHJvdW5kZWQgdGV4dC14cyBjdXJzb3ItbW92ZVwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZShtYXJrLnRpbWUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1kYXNoZWQgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtJZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJtYXJrSWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrSWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEcm9wVG9Sb3cocm93LmlkLCBtYXJrSWQpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBFbXB0eSBzbG90XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPE11c2ljUGxheWVyXG4gICAgICAgICAgICBtdXNpY1VybD17bXVzaWNVcmwgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgb25UaW1lVXBkYXRlPXsodCkgPT4gc2V0Q3VycmVudFRpbWUodCl9XG4gICAgICAgICAgICBvbkF1ZGlvUmVhZHk9e2hhbmRsZUF1ZGlvUmVhZHl9XG4gICAgICAgICAgICBhdWRpb1JlZj17YXVkaW9SZWZ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIk11c2ljUGxheWVyIiwiZm9ybWF0VGltZSIsInNlY29uZHMiLCJ0b3RhbCIsIk1hdGgiLCJtYXgiLCJmbG9vciIsIm1pbnMiLCJzZWNzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsInV1aWQiLCJyYW5kb20iLCJzbGljZSIsIkRhdGUiLCJub3ciLCJNYXJraW5nUGFuZWwiLCJwZXJmb3JtYW5jZUlkIiwicGFydHMiLCJtdXNpY1VybCIsInBlcmZvcm1hbmNlVGl0bGUiLCJvblBhcnRzVXBkYXRlZCIsInJvd3MiLCJzZXRSb3dzIiwiYWN0aXZlUm93SWQiLCJzZXRBY3RpdmVSb3dJZCIsImN1cnJlbnRUaW1lIiwic2V0Q3VycmVudFRpbWUiLCJhc3NpZ25tZW50cyIsInNldEFzc2lnbm1lbnRzIiwic3VicGFydHNCeVBhcnQiLCJzZXRTdWJwYXJ0c0J5UGFydCIsIm5ld1N1YnBhcnRUaXRsZSIsInNldE5ld1N1YnBhcnRUaXRsZSIsInNhdmluZyIsInNldFNhdmluZyIsInNlc3Npb25UaXRsZSIsInNldFNlc3Npb25UaXRsZSIsImN1c3RvbVRpdGxlIiwic2V0Q3VzdG9tVGl0bGUiLCJzZXNzaW9uTGlzdCIsInNldFNlc3Npb25MaXN0Iiwic2VsZWN0ZWRTZXNzaW9uSWQiLCJzZXRTZWxlY3RlZFNlc3Npb25JZCIsImFsbFNlc3Npb25zIiwic2V0QWxsU2Vzc2lvbnMiLCJwZXJmb3JtYW5jZU5hbWVNYXAiLCJzZXRQZXJmb3JtYW5jZU5hbWVNYXAiLCJtdXNpY0R1cmF0aW9uIiwic2V0TXVzaWNEdXJhdGlvbiIsImF1ZGlvQ2xlYW51cFJlZiIsImF1ZGlvUmVmIiwiY3VycmVudCIsImhhbmRsZUF1ZGlvUmVhZHkiLCJhdWRpbyIsInVwZGF0ZSIsImR1cmF0aW9uIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFzc2lnbmVkTWFya0NvdW50cyIsImNvdW50cyIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJ2YWx1ZSIsIm1hcmtJZCIsImxlbmd0aCIsImZpcnN0Um93IiwiaWQiLCJsYWJlbCIsIm5vdGUiLCJtYXJrcyIsInRpdGxlIiwidG9Mb2NhbGVTdHJpbmciLCJmZXRjaFN1YnBhcnRzIiwiZW50cmllcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJwYXJ0IiwicmVzIiwiZmV0Y2giLCJvayIsImRhdGEiLCJqc29uIiwicGFydElkIiwibGlzdCIsImZldGNoU2Vzc2lvbnMiLCJmZXRjaFBlcmZvcm1hbmNlTmFtZXMiLCJwZXJmIiwiaGFuZGxlS2V5RG93biIsImV2ZW50IiwidGFyZ2V0IiwidGFnIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiY29kZSIsInByZXZlbnREZWZhdWx0Iiwicm93SWQiLCJtYXJrIiwidGltZSIsImNyZWF0ZWRBdCIsInRvSVNPU3RyaW5nIiwicHJldiIsInJvdyIsImtleSIsIm5leHRJbmRleCIsIm5ld1JvdyIsImlkeCIsImZpbmRJbmRleCIsInIiLCJuZXh0Iiwic3BsaWNlIiwid2luZG93IiwiaGFuZGxlRHJvcFRvUm93IiwibW92ZWQiLCJyZW1vdmVkIiwibmV4dE1hcmtzIiwiZmlsdGVyIiwibSIsImdldEFzc2lnbmVkVGltZSIsInRhcmdldEtleSIsImZpbmQiLCJnZXRFeGlzdGluZ1RpbWUiLCJ0eXBlIiwiZmllbGQiLCJwIiwidGltZXBvaW50X3NlY29uZHMiLCJ0aW1lcG9pbnRfZW5kX3NlY29uZHMiLCJzdWIiLCJmbGF0IiwicyIsImFzc2lnbk1hcmtUb1RhcmdldCIsInNwbGl0IiwibWFya1RpbWUiLCJmbGF0TWFwIiwidW5kZWZpbmVkIiwib3Bwb3NpdGVGaWVsZCIsImFzc2lnbmVkT3Bwb3NpdGUiLCJleGlzdGluZ09wcG9zaXRlIiwib3Bwb3NpdGVUaW1lIiwiYWxlcnQiLCJjbGVhckFzc2lnbm1lbnQiLCJyZW5kZXJUaW1lVGFyZ2V0IiwiYXNzaWduZWRWYWx1ZSIsImFzc2lnbmVkTWFya0lkIiwiYXNzaWduZWRUaW1lIiwiZXhpc3RpbmdUaW1lIiwic2hvd1RpbWUiLCJkaXYiLCJjbGFzc05hbWUiLCJvbkRyYWdPdmVyIiwiZSIsIm9uRHJvcCIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJzcGFuIiwiYnV0dG9uIiwib25DbGljayIsImhhbmRsZVNhdmVTZXNzaW9uIiwicGF5bG9hZCIsInBlcmZvcm1hbmNlX2lkIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY3JlYXRlZCIsImhhbmRsZUFwcGx5IiwidXBkYXRlc0J5UGFydCIsInVwZGF0ZXNCeVN1YnBhcnQiLCJ1cGRhdGVkUGFydHMiLCJ1cGRhdGVkU3VicGFydHMiLCJ1cGRhdGVkIiwicHVzaCIsInN1YnBhcnRJZCIsInUiLCJwYXJ0X2lkIiwibmFtZSIsImlucHV0Iiwib25DaGFuZ2UiLCJwbGFjZWhvbGRlciIsInRyaW0iLCJkaXNhYmxlZCIsInNlbGVjdCIsIm9wdGlvbiIsInNlc3MiLCJjcmVhdGVkX2F0IiwiY2hlY2tlZCIsImFzc2lnbmVkTWFya0lkcyIsImhhcyIsImRyYWdnYWJsZSIsIm9uRHJhZ1N0YXJ0Iiwic2V0RGF0YSIsIm9uVGltZVVwZGF0ZSIsInQiLCJvbkF1ZGlvUmVhZHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MarkingPanel.tsx\n"));

/***/ })

});